/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var j_=Object.create;var Li=Object.defineProperty,G_=Object.defineProperties,B_=Object.getOwnPropertyDescriptor,H_=Object.getOwnPropertyDescriptors,z_=Object.getOwnPropertyNames,pp=Object.getOwnPropertySymbols,K_=Object.getPrototypeOf,hp=Object.prototype.hasOwnProperty,V_=Object.prototype.propertyIsEnumerable;var mp=(r,e,t)=>e in r?Li(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,he=(r,e)=>{for(var t in e||(e={}))hp.call(e,t)&&mp(r,t,e[t]);if(pp)for(var t of pp(e))V_.call(e,t)&&mp(r,t,e[t]);return r},Dt=(r,e)=>G_(r,H_(e));var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Q_=(r,e)=>{for(var t in e)Li(r,t,{get:e[t],enumerable:!0})},gp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of z_(e))!hp.call(r,i)&&i!==t&&Li(r,i,{get:()=>e[i],enumerable:!(n=B_(e,i))||n.enumerable});return r};var ya=(r,e,t)=>(t=r!=null?j_(K_(r)):{},gp(e||!r||!r.__esModule?Li(t,"default",{value:r,enumerable:!0}):t,r)),X_=r=>gp(Li({},"__esModule",{value:!0}),r);var F=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Ee=_(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.matchAnyPattern=jr.extractTerms=jr.repeatedTimeunitPattern=void 0;function tb(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}jr.repeatedTimeunitPattern=tb;function yp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}jr.extractTerms=yp;function rb(r){return`(?:${yp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}jr.matchAnyPattern=rb});var ge=_((mu,hu)=>{(function(r,e){typeof mu=="object"&&typeof hu!="undefined"?hu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(mu,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",p="year",h="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(j,A,E){var B=String(j);return!B||B.length>=A?j:""+Array(A+1-B.length).join(E)+j},q={s:$,z:function(j){var A=-j.utcOffset(),E=Math.abs(A),B=Math.floor(E/60),C=E%60;return(A<=0?"+":"-")+$(B,2,"0")+":"+$(C,2,"0")},m:function j(A,E){if(A.date()<E.date())return-j(E,A);var B=12*(E.year()-A.year())+(E.month()-A.month()),C=A.clone().add(B,l),X=E-C<0,d=A.clone().add(B+(X?-1:1),l);return+(-(B+(E-C)/(X?C-d:d-C))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:l,y:p,w:u,d:o,D:h,h:a,m:s,s:i,ms:n,Q:c}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},U="en",ie={};ie[U]=M;var re=function(j){return j instanceof Pe},ve=function(j,A,E){var B;if(!j)return U;if(typeof j=="string")ie[j]&&(B=j),A&&(ie[j]=A,B=j);else{var C=j.name;ie[C]=j,B=C}return!E&&B&&(U=B),B||!E&&U},G=function(j,A){if(re(j))return j.clone();var E=typeof A=="object"?A:{};return E.date=j,E.args=arguments,new Pe(E)},V=q;V.l=ve,V.i=re,V.w=function(j,A){return G(j,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var Pe=function(){function j(E){this.$L=ve(E.locale,null,!0),this.parse(E)}var A=j.prototype;return A.parse=function(E){this.$d=function(B){var C=B.date,X=B.utc;if(C===null)return new Date(NaN);if(V.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var d=C.match(y);if(d){var f=d[2]-1||0,m=(d[7]||"0").substring(0,3);return X?new Date(Date.UTC(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)):new Date(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)}}return new Date(C)}(E),this.$x=E.x||{},this.init()},A.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},A.$utils=function(){return V},A.isValid=function(){return this.$d.toString()!==v},A.isSame=function(E,B){var C=G(E);return this.startOf(B)<=C&&C<=this.endOf(B)},A.isAfter=function(E,B){return G(E)<this.startOf(B)},A.isBefore=function(E,B){return this.endOf(B)<G(E)},A.$g=function(E,B,C){return V.u(E)?this[B]:this.set(C,E)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(E,B){var C=this,X=!!V.u(B)||B,d=V.p(E),f=function(D,P){var me=V.w(C.$u?Date.UTC(C.$y,P,D):new Date(C.$y,P,D),C);return X?me:me.endOf(o)},m=function(D,P){return V.w(C.toDate()[D].apply(C.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(P)),C)},g=this.$W,T=this.$M,b=this.$D,w="set"+(this.$u?"UTC":"");switch(d){case p:return X?f(1,0):f(31,11);case l:return X?f(1,T):f(0,T+1);case u:var S=this.$locale().weekStart||0,k=(g<S?g+7:g)-S;return f(X?b-k:b+(6-k),T);case o:case h:return m(w+"Hours",0);case a:return m(w+"Minutes",1);case s:return m(w+"Seconds",2);case i:return m(w+"Milliseconds",3);default:return this.clone()}},A.endOf=function(E){return this.startOf(E,!1)},A.$set=function(E,B){var C,X=V.p(E),d="set"+(this.$u?"UTC":""),f=(C={},C[o]=d+"Date",C[h]=d+"Date",C[l]=d+"Month",C[p]=d+"FullYear",C[a]=d+"Hours",C[s]=d+"Minutes",C[i]=d+"Seconds",C[n]=d+"Milliseconds",C)[X],m=X===o?this.$D+(B-this.$W):B;if(X===l||X===p){var g=this.clone().set(h,1);g.$d[f](m),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},A.set=function(E,B){return this.clone().$set(E,B)},A.get=function(E){return this[V.p(E)]()},A.add=function(E,B){var C,X=this;E=Number(E);var d=V.p(B),f=function(T){var b=G(X);return V.w(b.date(b.date()+Math.round(T*E)),X)};if(d===l)return this.set(l,this.$M+E);if(d===p)return this.set(p,this.$y+E);if(d===o)return f(1);if(d===u)return f(7);var m=(C={},C[s]=e,C[a]=t,C[i]=r,C)[d]||1,g=this.$d.getTime()+E*m;return V.w(g,this)},A.subtract=function(E,B){return this.add(-1*E,B)},A.format=function(E){var B=this,C=this.$locale();if(!this.isValid())return C.invalidDate||v;var X=E||"YYYY-MM-DDTHH:mm:ssZ",d=V.z(this),f=this.$H,m=this.$m,g=this.$M,T=C.weekdays,b=C.months,w=function(P,me,ae,te){return P&&(P[me]||P(B,X))||ae[me].substr(0,te)},S=function(P){return V.s(f%12||12,P,"0")},k=C.meridiem||function(P,me,ae){var te=P<12?"AM":"PM";return ae?te.toLowerCase():te},D={YY:String(this.$y).slice(-2),YYYY:this.$y,M:g+1,MM:V.s(g+1,2,"0"),MMM:w(C.monthsShort,g,b,3),MMMM:w(b,g),D:this.$D,DD:V.s(this.$D,2,"0"),d:String(this.$W),dd:w(C.weekdaysMin,this.$W,T,2),ddd:w(C.weekdaysShort,this.$W,T,3),dddd:T[this.$W],H:String(f),HH:V.s(f,2,"0"),h:S(1),hh:S(2),a:k(f,m,!0),A:k(f,m,!1),m:String(m),mm:V.s(m,2,"0"),s:String(this.$s),ss:V.s(this.$s,2,"0"),SSS:V.s(this.$ms,3,"0"),Z:d};return X.replace(O,function(P,me){return me||D[P]||d.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(E,B,C){var X,d=V.p(B),f=G(E),m=(f.utcOffset()-this.utcOffset())*e,g=this-f,T=V.m(this,f);return T=(X={},X[p]=T/12,X[l]=T,X[c]=T/3,X[u]=(g-m)/6048e5,X[o]=(g-m)/864e5,X[a]=g/t,X[s]=g/e,X[i]=g/r,X)[d]||g,C?T:V.a(T)},A.daysInMonth=function(){return this.endOf(l).$D},A.$locale=function(){return ie[this.$L]},A.locale=function(E,B){if(!E)return this.$L;var C=this.clone(),X=ve(E,B,!0);return X&&(C.$L=X),C},A.clone=function(){return V.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},j}(),Fe=Pe.prototype;return G.prototype=Fe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",p],["$D",h]].forEach(function(j){Fe[j[1]]=function(A){return this.$g(A,j[0],j[1])}}),G.extend=function(j,A){return j.$i||(j(A,Pe,G),j.$i=!0),G},G.locale=ve,G.isDayjs=re,G.unix=function(j){return G(1e3*j)},G.en=ie[U],G.Ls=ie,G.p={},G})});var nt=_(Gr=>{"use strict";var nb=Gr&&Gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.findYearClosestToRef=Gr.findMostLikelyADYear=void 0;var ib=nb(ge());function sb(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Gr.findMostLikelyADYear=sb;function ab(r,e,t){let n=ib.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Gr.findYearClosestToRef=ab});var it=_(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.parseTimeUnits=ne.TIME_UNITS_PATTERN=ne.parseYear=ne.YEAR_PATTERN=ne.parseOrdinalNumberPattern=ne.ORDINAL_NUMBER_PATTERN=ne.parseNumberPattern=ne.NUMBER_PATTERN=ne.TIME_UNIT_DICTIONARY=ne.ORDINAL_WORD_DICTIONARY=ne.INTEGER_WORD_DICTIONARY=ne.MONTH_DICTIONARY=ne.FULL_MONTH_NAME_DICTIONARY=ne.WEEKDAY_DICTIONARY=void 0;var _a=Ee(),ob=nt();ne.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};ne.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};ne.MONTH_DICTIONARY=Object.assign(Object.assign({},ne.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});ne.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};ne.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};ne.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};ne.NUMBER_PATTERN=`(?:${_a.matchAnyPattern(ne.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function _p(r){let e=r.toLowerCase();return ne.INTEGER_WORD_DICTIONARY[e]!==void 0?ne.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ne.parseNumberPattern=_p;ne.ORDINAL_NUMBER_PATTERN=`(?:${_a.matchAnyPattern(ne.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function ub(r){let e=r.toLowerCase();return ne.ORDINAL_WORD_DICTIONARY[e]!==void 0?ne.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}ne.parseOrdinalNumberPattern=ub;ne.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function lb(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return ob.findMostLikelyADYear(e)}ne.parseYear=lb;var bp=`(${ne.NUMBER_PATTERN})\\s{0,3}(${_a.matchAnyPattern(ne.TIME_UNIT_DICTIONARY)})`,Tp=new RegExp(bp,"i");ne.TIME_UNITS_PATTERN=_a.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",bp);function cb(r){let e={},t=r,n=Tp.exec(t);for(;n;)db(e,n),t=t.substring(n[0].length).trim(),n=Tp.exec(t);return e}ne.parseTimeUnits=cb;function db(r,e){let t=_p(e[1]),n=ne.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var vp=_((gu,yu)=>{(function(r,e){typeof gu=="object"&&typeof yu!="undefined"?yu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(gu,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var p=this.quarter()-1;return c?this.month(3*p).startOf(r).startOf("day"):this.month(3*p+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Ut=_(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.implySimilarTime=or.assignSimilarTime=or.assignSimilarDate=or.assignTheNextDay=void 0;var Ep=Be();function fb(r,e){e=e.add(1,"day"),wp(r,e),kp(r,e)}or.assignTheNextDay=fb;function wp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}or.assignSimilarDate=wp;function pb(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Ep.Meridiem.AM):r.assign("meridiem",Ep.Meridiem.PM)}or.assignSimilarTime=pb;function kp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}or.implySimilarTime=kp});var Op=_(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.toTimezoneOffset=cn.TIMEZONE_ABBR_MAP=void 0;cn.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function mb(r){var e;return r==null?null:typeof r=="number"?r:(e=cn.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}cn.toTimezoneOffset=mb});var Ne=_(ur=>{"use strict";var Dp=ur&&ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ur,"__esModule",{value:!0});ur.ParsingResult=ur.ParsingComponents=ur.ReferenceWithTimezone=void 0;var hb=Dp(vp()),ba=Dp(ge()),Tu=Ut(),gb=Op();ba.default.extend(hb.default);var _u=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=gb.toTimezoneOffset(e.timezone))}};ur.ReferenceWithTimezone=_u;var dn=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ba.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new dn(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ba.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ba.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new dn(e);return t.hour||t.minute||t.second?(Tu.assignSimilarTime(i,n),Tu.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Tu.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};ur.ParsingComponents=dn;var Ui=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new dn(e),this.end=s}clone(){let e=new Ui(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};ur.ParsingResult=Ui});var L=_(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.AbstractParserWithWordBoundaryChecking=void 0;var bu=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};va.AbstractParserWithWordBoundaryChecking=bu});var Sp=_(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var Eu=it(),yb=Ne(),Tb=L(),_b=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eu.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),bb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eu.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),vu=class extends Tb.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?bb:_b}innerExtract(e,t){let n=Eu.parseTimeUnits(t[1]);return yb.ParsingComponents.createRelativeFromReference(e.reference,n)}};wu.default=vu});var Pp=_(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var vb=nt(),Ap=it(),Cp=it(),Ea=it(),Eb=Ee(),wb=L(),kb=new RegExp(`(?:on\\s{0,3})?(${Ea.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ea.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Eb.matchAnyPattern(Ap.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Cp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Rp=1,Mp=2,Ob=3,xp=4,ku=class extends wb.AbstractParserWithWordBoundaryChecking{innerPattern(){return kb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ap.MONTH_DICTIONARY[t[Ob].toLowerCase()],s=Ea.parseOrdinalNumberPattern(t[Rp]);if(s>31)return t.index=t.index+t[Rp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[xp]){let a=Cp.parseYear(t[xp]);n.start.assign("year",a)}else{let a=vb.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Mp]){let a=Ea.parseOrdinalNumberPattern(t[Mp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ou.default=ku});var Up=_(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var Db=nt(),Fp=it(),wa=it(),Lp=it(),Sb=Ee(),Rb=L(),Mb=new RegExp(`(${Sb.matchAnyPattern(Fp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${wa.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${wa.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Lp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),xb=1,Ab=2,Np=3,Ip=4,Du=class extends Rb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Mb}innerExtract(e,t){let n=Fp.MONTH_DICTIONARY[t[xb].toLowerCase()],i=wa.parseOrdinalNumberPattern(t[Ab]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Ip]){let u=Lp.parseYear(t[Ip]);s.assign("year",u)}else{let u=Db.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Np])return s;let a=wa.parseOrdinalNumberPattern(t[Np]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Su.default=Du});var Yp=_(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Ru=it(),Cb=nt(),Pb=Ee(),qp=it(),Nb=L(),Ib=new RegExp(`((?:in)\\s*)?(${Pb.matchAnyPattern(Ru.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${qp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Fb=1,Lb=2,Wp=3,Mu=class extends Nb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ib}innerExtract(e,t){let n=t[Lb].toLowerCase();if(t[0].length<=3&&!Ru.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[Fb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Ru.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Wp]){let a=qp.parseYear(t[Wp]);i.start.assign("year",a)}else{let a=Cb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};xu.default=Mu});var Gp=_(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var jp=it(),Ub=Ee(),Wb=L(),qb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Ub.matchAnyPattern(jp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Yb=1,$b=2,$p=3,jb=4,Au=class extends Wb.AbstractParserWithWordBoundaryChecking{innerPattern(){return qb}innerExtract(e,t){let n=t[$p]?parseInt(t[$p]):jp.MONTH_DICTIONARY[t[$b].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Yb]);return{day:parseInt(t[jb]),month:n,year:i}}};Cu.default=Au});var Bp=_(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var Gb=L(),Bb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Hb=1,zb=2,Pu=class extends Gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Bb}innerExtract(e,t){let n=parseInt(t[zb]),i=parseInt(t[Hb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Nu.default=Pu});var fn=_(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.AbstractTimeExpressionParser=void 0;var yt=Be();function Kb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Vb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Hp=2,Hn=3,ka=4,Oa=5,Wi=6,Iu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Hp]);if(o>100){if(this.strictMode||t[Hn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Hn]!=null){if(t[Hn].length==1&&!t[Wi])return null;s=parseInt(t[Hn])}if(s>=60)return null;if(o>12&&(a=yt.Meridiem.PM),t[Wi]!=null){if(o>12)return null;let u=t[Wi][0].toLowerCase();u=="a"&&(a=yt.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=yt.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",yt.Meridiem.AM):i.imply("meridiem",yt.Meridiem.PM),t[Oa]!=null){let u=parseInt(t[Oa].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ka]!=null){let u=parseInt(t[ka]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Oa]!=null){let u=parseInt(t[Oa].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ka]!=null){let u=parseInt(t[ka]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Hp]),a=0,o=-1;if(t[Hn]!=null?a=parseInt(t[Hn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=yt.Meridiem.PM),t[Wi]!=null){if(s>12)return null;let u=t[Wi][0].toLowerCase();u=="a"&&(o=yt.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=yt.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==yt.Meridiem.AM?(n.start.imply("meridiem",yt.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",yt.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",yt.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",yt.Meridiem.PM)):s>12?i.imply("meridiem",yt.Meridiem.PM):s<=12&&i.imply("meridiem",yt.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Kb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Vb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Da.AbstractTimeExpressionParser=Iu});var zp=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var Sa=Be(),Qb=fn(),Fu=class extends Qb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Sa.Meridiem.PM)):i<6&&n.assign("meridiem",Sa.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Sa.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Sa.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Lu.default=Fu});var Wt=_(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.addImpliedTimeUnits=zn.reverseTimeUnits=void 0;function Xb(r){let e={};for(let t in r)e[t]=-r[t];return e}zn.reverseTimeUnits=Xb;function Zb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}zn.addImpliedTimeUnits=Zb});var Kp=_(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Wu=it(),Jb=Ne(),ev=L(),tv=Wt(),rv=new RegExp(`(${Wu.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),nv=new RegExp(`(${Wu.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Uu=class extends ev.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?nv:rv}innerExtract(e,t){let n=Wu.parseTimeUnits(t[1]),i=tv.reverseTimeUnits(n);return Jb.ParsingComponents.createRelativeFromReference(e.reference,i)}};qu.default=Uu});var Vp=_(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var $u=it(),iv=Ne(),sv=L(),av=new RegExp(`(${$u.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),ov=new RegExp("("+$u.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),uv=1,Yu=class extends sv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ov:av}innerExtract(e,t){let n=$u.parseTimeUnits(t[uv]);return iv.ParsingComponents.createRelativeFromReference(e.reference,n)}};ju.default=Yu});var Vn=_(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.MergingRefiner=Kn.Filter=void 0;var Gu=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};Kn.Filter=Gu;var Bu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};Kn.MergingRefiner=Bu});var lr=_(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var lv=Vn(),Hu=class extends lv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};zu.default=Hu});var Qp=_(qi=>{"use strict";var cv=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var dv=cv(lr()),Ku=class extends dv.default{patternBetween(){return/^\s*(to|-)\s*$/i}};qi.default=Ku});var Xp=_(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.mergeDateTimeComponent=Qn.mergeDateTimeResult=void 0;var fv=Be();function pv(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Vu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Vu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}Qn.mergeDateTimeResult=pv;function Vu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==fv.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}Qn.mergeDateTimeComponent=Vu});var br=_(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var mv=Vn(),Zp=Xp(),Qu=class extends mv.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Zp.mergeDateTimeResult(t,n):Zp.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Xu.default=Qu});var Jp=_(Yi=>{"use strict";var hv=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var gv=hv(br()),Zu=class extends gv.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Yi.default=Zu});var em=_(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var yv=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Tv={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Ju=class{constructor(e){this.timezone=Object.assign(Object.assign({},Tv),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=yv.exec(u);if(!l)return;let c=l[1].toUpperCase(),p=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(p===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${p} for: ${s.start}`)});let h=s.start.get("timezoneOffset");h!==null&&p!=h&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",p),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",p))}),t}};el.default=Ju});var Ra=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var _v=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),bv=1,vv=2,Ev=3,tl=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=_v.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[vv]),o=parseInt(s[Ev]||"0"),u=a*60+o;u>14*60||(s[bv]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};rl.default=tl});var tm=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var nl=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};il.default=nl});var rm=_($i=>{"use strict";var wv=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var kv=wv(ge()),sl=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=kv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};$i.default=sl});var nm=_(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var Ov=Vn(),al=class extends Ov.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};ol.default=al});var cl=_(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var Dv=L(),Sv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Rv=1,Mv=2,xv=3,im=4,Av=5,sm=6,am=7,om=8,um=9,ul=class extends Dv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Sv}innerExtract(e,t){let n={};if(n.year=parseInt(t[Rv]),n.month=parseInt(t[Mv]),n.day=parseInt(t[xv]),t[im]!=null)if(n.hour=parseInt(t[im]),n.minute=parseInt(t[Av]),t[sm]!=null&&(n.second=parseInt(t[sm])),t[am]!=null&&(n.millisecond=parseInt(t[am])),t[om]==null)n.timezoneOffset=0;else{let i=parseInt(t[om]),s=0;t[um]!=null&&(s=parseInt(t[um]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};ll.default=ul});var lm=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Cv=Vn(),dl=class extends Cv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};fl.default=dl});var vr=_(Xn=>{"use strict";var pn=Xn&&Xn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.includeCommonConfiguration=void 0;var Pv=pn(em()),Nv=pn(Ra()),cm=pn(tm()),Iv=pn(rm()),Fv=pn(nm()),Lv=pn(cl()),Uv=pn(lm());function Wv(r,e=!1){return r.parsers.unshift(new Lv.default),r.refiners.unshift(new Uv.default),r.refiners.unshift(new Pv.default),r.refiners.unshift(new Nv.default),r.refiners.unshift(new cm.default),r.refiners.push(new cm.default),r.refiners.push(new Iv.default),r.refiners.push(new Fv.default(e)),r}Xn.includeCommonConfiguration=Wv});var wr=_(Te=>{"use strict";var qv=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.noon=Te.morning=Te.midnight=Te.yesterdayEvening=Te.evening=Te.lastNight=Te.tonight=Te.theDayAfter=Te.tomorrow=Te.theDayBefore=Te.yesterday=Te.today=Te.now=void 0;var cr=Ne(),Zn=qv(ge()),Er=Ut(),ji=Be();function Yv(r){let e=Zn.default(r.instant),t=new cr.ParsingComponents(r,{});return Er.assignSimilarDate(t,e),Er.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}Te.now=Yv;function $v(r){let e=Zn.default(r.instant),t=new cr.ParsingComponents(r,{});return Er.assignSimilarDate(t,e),Er.implySimilarTime(t,e),t}Te.today=$v;function jv(r){return dm(r,1)}Te.yesterday=jv;function dm(r,e){return pl(r,-e)}Te.theDayBefore=dm;function Gv(r){return pl(r,1)}Te.tomorrow=Gv;function pl(r,e){let t=Zn.default(r.instant),n=new cr.ParsingComponents(r,{});return t=t.add(e,"day"),Er.assignSimilarDate(n,t),Er.implySimilarTime(n,t),n}Te.theDayAfter=pl;function Bv(r,e=22){let t=Zn.default(r.instant),n=new cr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ji.Meridiem.PM),Er.assignSimilarDate(n,t),n}Te.tonight=Bv;function Hv(r,e=0){let t=Zn.default(r.instant),n=new cr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Er.assignSimilarDate(n,t),n.imply("hour",e),n}Te.lastNight=Hv;function zv(r,e=20){let t=new cr.ParsingComponents(r,{});return t.imply("meridiem",ji.Meridiem.PM),t.imply("hour",e),t}Te.evening=zv;function Kv(r,e=20){let t=Zn.default(r.instant),n=new cr.ParsingComponents(r,{});return t=t.add(-1,"day"),Er.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ji.Meridiem.PM),n}Te.yesterdayEvening=Kv;function Vv(r){let e=new cr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}Te.midnight=Vv;function Qv(r,e=6){let t=new cr.ParsingComponents(r,{});return t.imply("meridiem",ji.Meridiem.AM),t.imply("hour",e),t}Te.morning=Qv;function Xv(r){let e=new cr.ParsingComponents(r,{});return e.imply("meridiem",ji.Meridiem.AM),e.imply("hour",12),e}Te.noon=Xv});var fm=_(Vt=>{"use strict";var Zv=Vt&&Vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Jv=Vt&&Vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eE=Vt&&Vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Zv(e,r,t);return Jv(e,r),e},tE=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});var rE=tE(ge()),nE=L(),iE=Ut(),Gi=eE(wr()),sE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,ml=class extends nE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return sE}innerExtract(e,t){let n=rE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Gi.now(e.reference);case"today":return Gi.today(e.reference);case"yesterday":return Gi.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Gi.tomorrow(e.reference);case"tonight":return Gi.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),iE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Vt.default=ml});var pm=_(Bi=>{"use strict";var aE=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var Ma=Be(),oE=L(),uE=aE(ge()),lE=Ut(),cE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,hl=class extends oE.AbstractParserWithWordBoundaryChecking{innerPattern(){return cE}innerExtract(e,t){let n=uE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ma.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ma.Meridiem.PM),i.imply("hour",20);break;case"midnight":lE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ma.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ma.Meridiem.AM),i.imply("hour",12);break}return i}};Bi.default=hl});var mn=_(Br=>{"use strict";var dE=Br&&Br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Br,"__esModule",{value:!0});Br.toDayJSClosestWeekday=Br.toDayJSWeekday=void 0;var mm=dE(ge());function fE(r,e,t){if(!t)return hm(r,e);let n=mm.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Br.toDayJSWeekday=fE;function hm(r,e){let t=mm.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Br.toDayJSClosestWeekday=hm});var ym=_(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var gm=it(),pE=Ee(),mE=L(),hE=mn(),gE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${pE.matchAnyPattern(gm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),yE=1,TE=2,_E=3,gl=class extends mE.AbstractParserWithWordBoundaryChecking{innerPattern(){return gE}innerExtract(e,t){let n=t[TE].toLowerCase(),i=gm.WEEKDAY_DICTIONARY[n],s=t[yE],a=t[_E],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=hE.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};yl.default=gl});var bm=_(Hi=>{"use strict";var bE=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var _m=it(),Tm=Ne(),vE=bE(ge()),EE=L(),wE=Ee(),kE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${wE.matchAnyPattern(_m.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),OE=1,DE=2,Tl=class extends EE.AbstractParserWithWordBoundaryChecking{innerPattern(){return kE}innerExtract(e,t){let n=t[OE].toLowerCase(),i=t[DE].toLowerCase(),s=_m.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Tm.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Tm.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=vE.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Hi.default=Tl});var Qt=_(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.ParsingContext=ti.Chrono=void 0;var Jn=Ne(),SE=_l(),ei=class{constructor(e){e=e||SE.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new ei({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new xa(e,t,n),s=[];return this.parsers.forEach(a=>{let o=ei.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof Jn.ParsingResult?c=l:l instanceof Jn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};ti.Chrono=ei;var xa=class{constructor(e,t,n){this.text=e,this.reference=new Jn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Jn.ParsingComponents?e:new Jn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new Jn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};ti.ParsingContext=xa});var hn=_(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var vm=nt(),RE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Aa=1,Em=5,wm=2,km=3,bl=4,vl=class{constructor(e){this.groupNumberMonth=e?km:wm,this.groupNumberDay=e?wm:km}pattern(){return RE}extract(e,t){if(t[Aa]=="/"||t[Em]=="/"){t.index+=t[0].length;return}let n=t.index+t[Aa].length,i=t[0].substr(t[Aa].length,t[0].length-t[Aa].length-t[Em].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[bl]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[bl]){let u=parseInt(t[bl]),l=vm.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=vm.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};El.default=vl});var Dm=_(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var Om=it(),ME=Ne(),xE=L(),AE=Wt(),CE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Om.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),wl=class extends xE.AbstractParserWithWordBoundaryChecking{innerPattern(){return CE}innerExtract(e,t){let n=t[1].toLowerCase(),i=Om.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=AE.reverseTimeUnits(i);break}return ME.ParsingComponents.createRelativeFromReference(e.reference,i)}};kl.default=wl});var Rm=_(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var PE=Vn(),Ol=Ne(),NE=it(),IE=Wt();function Sm(r){return r.text.match(/\s+(before|from)$/i)!=null}function FE(r){return r.text.match(/\s+(after|since)$/i)!=null}var Dl=class extends PE.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Sm(t)&&!FE(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=NE.parseTimeUnits(t.text);Sm(t)&&(i=IE.reverseTimeUnits(i));let s=Ol.ParsingComponents.createRelativeFromReference(new Ol.ReferenceWithTimezone(n.start.date()),i);return new Ol.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Sl.default=Dl});var _l=_(qe=>{"use strict";var ze=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.GB=qe.strict=qe.casual=void 0;var LE=ze(Sp()),UE=ze(Pp()),WE=ze(Up()),qE=ze(Yp()),YE=ze(Gp()),$E=ze(Bp()),jE=ze(zp()),GE=ze(Kp()),BE=ze(Vp()),HE=ze(Qp()),zE=ze(Jp()),KE=vr(),VE=ze(fm()),QE=ze(pm()),XE=ze(ym()),ZE=ze(bm()),Rl=Qt(),JE=ze(hn()),ew=ze(Dm()),tw=ze(Rm());qe.casual=new Rl.Chrono(Mm(!1));qe.strict=new Rl.Chrono(Ca(!0,!1));qe.GB=new Rl.Chrono(Ca(!1,!0));function rw(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=rw;function nw(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=nw;function Mm(r=!1){let e=Ca(!1,r);return e.parsers.unshift(new VE.default),e.parsers.unshift(new QE.default),e.parsers.unshift(new qE.default),e.parsers.unshift(new ZE.default),e.parsers.unshift(new ew.default),e}qe.createCasualConfiguration=Mm;function Ca(r=!0,e=!1){return KE.includeCommonConfiguration({parsers:[new JE.default(e),new LE.default,new UE.default,new WE.default,new XE.default,new YE.default,new $E.default,new jE.default(r),new GE.default(r),new BE.default(r)],refiners:[new tw.default,new zE.default,new HE.default]},r)}qe.createConfiguration=Ca});var xm=_(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var iw=fn(),Ml=class extends iw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};xl.default=Ml});var zi=_(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.parseTimeUnits=De.TIME_UNITS_PATTERN=De.parseYear=De.YEAR_PATTERN=De.parseNumberPattern=De.NUMBER_PATTERN=De.TIME_UNIT_DICTIONARY=De.INTEGER_WORD_DICTIONARY=De.MONTH_DICTIONARY=De.WEEKDAY_DICTIONARY=void 0;var Al=Ee(),sw=nt();De.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};De.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};De.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};De.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};De.NUMBER_PATTERN=`(?:${Al.matchAnyPattern(De.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Cm(r){let e=r.toLowerCase();return De.INTEGER_WORD_DICTIONARY[e]!==void 0?De.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}De.parseNumberPattern=Cm;De.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function aw(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return sw.findMostLikelyADYear(e)}De.parseYear=aw;var Pm=`(${De.NUMBER_PATTERN})\\s{0,5}(${Al.matchAnyPattern(De.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Am=new RegExp(Pm,"i");De.TIME_UNITS_PATTERN=Al.repeatedTimeunitPattern("",Pm);function ow(r){let e={},t=r,n=Am.exec(t);for(;n;)uw(e,n),t=t.substring(n[0].length),n=Am.exec(t);return e}De.parseTimeUnits=ow;function uw(r,e){let t=Cm(e[1]),n=De.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Im=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var Nm=zi(),lw=Ee(),cw=L(),dw=mn(),fw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${lw.matchAnyPattern(Nm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),pw=1,mw=3,hw=2,Cl=class extends cw.AbstractParserWithWordBoundaryChecking{innerPattern(){return fw}innerExtract(e,t){let n=t[hw].toLowerCase(),i=Nm.WEEKDAY_DICTIONARY[n],s=t[pw],a=t[mw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=dw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Pl.default=Cl});var Wm=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var Hr=Be(),gw=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),yw=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Tw=2,Fm=3,Lm=4,Um=5,ri=class{pattern(e){return gw}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ri.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=yw.exec(i);return s&&(n.end=ri.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Tw]),t[Fm]!=null&&(i=parseInt(t[Fm])),i>=60||n>24)return null;if(n>=12&&(s=Hr.Meridiem.PM),t[Um]!=null){if(n>12)return null;let a=t[Um].toLowerCase();a.match(/morgen|vormittag/)&&(s=Hr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Hr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Hr.Meridiem.AM,n=0):n<6?s=Hr.Meridiem.AM:(s=Hr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Hr.Meridiem.AM):e.imply("meridiem",Hr.Meridiem.PM),t[Lm]!=null){let a=parseInt(t[Lm]);if(a>=60)return null;e.assign("second",a)}return e}};Nl.default=ri});var qm=_(Ki=>{"use strict";var _w=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var bw=_w(lr()),Il=class extends bw.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Ki.default=Il});var Ym=_(Vi=>{"use strict";var vw=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var Ew=vw(br()),Fl=class extends Ew.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Vi.default=Fl});var Ll=_(Xi=>{"use strict";var ww=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var kw=ww(ge()),gn=Be(),Ow=L(),Dw=Ut(),Sw=Wt(),Qi=class extends Ow.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=kw.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return Dw.implySimilarTime(s,n),Qi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=Sw.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break}return e}};Xi.default=Qi});var Gm=_(Xt=>{"use strict";var Rw=Xt&&Xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Mw=Xt&&Xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xw=Xt&&Xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Rw(e,r,t);return Mw(e,r),e},jm=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var Aw=jm(ge()),Cw=L(),yn=Ut(),Pw=jm(Ll()),$m=xw(wr()),Nw=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),Iw=1,Fw=2,Ul=class extends Cw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Nw}innerExtract(e,t){let n=Aw.default(e.refDate),i=(t[Iw]||"").toLowerCase(),s=(t[Fw]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=$m.now(e.reference);break;case"heute":a=$m.today(e.reference);break;case"morgen":yn.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),yn.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),yn.assignSimilarDate(a,n),yn.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),yn.assignSimilarDate(a,n),yn.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),yn.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=Pw.default.extractTimeComponents(a,s)),a}};Xt.default=Ul});var Qm=_(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var Lw=nt(),Km=zi(),Vm=zi(),Uw=Ee(),Ww=L(),qw=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${Uw.matchAnyPattern(Km.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Vm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Bm=1,Hm=2,Yw=3,zm=4,Wl=class extends Ww.AbstractParserWithWordBoundaryChecking{innerPattern(){return qw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Km.MONTH_DICTIONARY[t[Yw].toLowerCase()],s=parseInt(t[Bm]);if(s>31)return t.index=t.index+t[Bm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[zm]){let a=Vm.parseYear(t[zm]);n.start.assign("year",a)}else{let a=Lw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Hm]){let a=parseInt(t[Hm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ql.default=Wl});var Xm=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var Pa=zi(),$w=Ne(),jw=L(),Gw=Wt(),Bw=Ee(),Yl=class extends jw.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Pa.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${Bw.matchAnyPattern(Pa.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Pa.parseNumberPattern(t[2]):1,i=Pa.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=Gw.reverseTimeUnits(s)),$w.ParsingComponents.createRelativeFromReference(e.reference,s)}};$l.default=Yl});var eh=_(Ke=>{"use strict";var Zt=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createConfiguration=Ke.createCasualConfiguration=Ke.parseDate=Ke.parse=Ke.strict=Ke.casual=void 0;var Hw=vr(),Zm=Qt(),zw=Zt(hn()),Kw=Zt(cl()),Vw=Zt(xm()),Qw=Zt(Im()),Xw=Zt(Wm()),Zw=Zt(qm()),Jw=Zt(Ym()),ek=Zt(Gm()),tk=Zt(Ll()),rk=Zt(Qm()),nk=Zt(Xm());Ke.casual=new Zm.Chrono(Jm());Ke.strict=new Zm.Chrono(jl(!0));function ik(r,e,t){return Ke.casual.parse(r,e,t)}Ke.parse=ik;function sk(r,e,t){return Ke.casual.parseDate(r,e,t)}Ke.parseDate=sk;function Jm(r=!0){let e=jl(!1,r);return e.parsers.unshift(new tk.default),e.parsers.unshift(new ek.default),e.parsers.unshift(new nk.default),e}Ke.createCasualConfiguration=Jm;function jl(r=!0,e=!0){return Hw.includeCommonConfiguration({parsers:[new Kw.default,new zw.default(e),new Vw.default,new Xw.default,new rk.default,new Qw.default],refiners:[new Zw.default,new Jw.default]},r)}Ke.createConfiguration=jl});var rh=_(Jt=>{"use strict";var ak=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ok=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uk=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ak(e,r,t);return ok(e,r),e},lk=Jt&&Jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});var ck=lk(ge()),dk=Be(),fk=L(),th=Ut(),Na=uk(wr()),Gl=class extends fk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=ck.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Na.now(e.reference);case"aujourd'hui":return Na.today(e.reference);case"hier":return Na.yesterday(e.reference);case"demain":return Na.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(th.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",dk.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),th.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Jt.default=Gl});var nh=_(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Zi=Be(),pk=L(),Bl=class extends pk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Zi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Zi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Zi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Zi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Zi.Meridiem.AM);break}return i}};Hl.default=Bl});var ih=_(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var mk=fn(),zl=class extends mk.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Kl.default=zl});var sh=_(Ji=>{"use strict";var hk=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var gk=hk(br()),Vl=class extends gk.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Ji.default=Vl});var ah=_(es=>{"use strict";var yk=es&&es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(es,"__esModule",{value:!0});var Tk=yk(lr()),Ql=class extends Tk.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};es.default=Ql});var zr=_(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.parseTimeUnits=ye.TIME_UNITS_PATTERN=ye.parseYear=ye.YEAR_PATTERN=ye.parseOrdinalNumberPattern=ye.ORDINAL_NUMBER_PATTERN=ye.parseNumberPattern=ye.NUMBER_PATTERN=ye.TIME_UNIT_DICTIONARY=ye.INTEGER_WORD_DICTIONARY=ye.MONTH_DICTIONARY=ye.WEEKDAY_DICTIONARY=void 0;var Xl=Ee();ye.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};ye.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};ye.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};ye.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};ye.NUMBER_PATTERN=`(?:${Xl.matchAnyPattern(ye.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function uh(r){let e=r.toLowerCase();return ye.INTEGER_WORD_DICTIONARY[e]!==void 0?ye.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}ye.parseNumberPattern=uh;ye.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function _k(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}ye.parseOrdinalNumberPattern=_k;ye.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function bk(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}ye.parseYear=bk;var lh=`(${ye.NUMBER_PATTERN})\\s{0,5}(${Xl.matchAnyPattern(ye.TIME_UNIT_DICTIONARY)})\\s{0,5}`,oh=new RegExp(lh,"i");ye.TIME_UNITS_PATTERN=Xl.repeatedTimeunitPattern("",lh);function vk(r){let e={},t=r,n=oh.exec(t);for(;n;)Ek(e,n),t=t.substring(n[0].length),n=oh.exec(t);return e}ye.parseTimeUnits=vk;function Ek(r,e){let t=uh(e[1]),n=ye.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var dh=_(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var ch=zr(),wk=Ee(),kk=L(),Ok=mn(),Dk=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${wk.matchAnyPattern(ch.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),Sk=1,Rk=2,Zl=class extends kk.AbstractParserWithWordBoundaryChecking{innerPattern(){return Dk}innerExtract(e,t){let n=t[Sk].toLowerCase(),i=ch.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[Rk];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=Ok.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Jl.default=Zl});var hh=_(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var ts=Be(),Mk=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),xk=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Ak=2,fh=3,ph=4,mh=5,ni=class{pattern(e){return Mk}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ni.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=xk.exec(i);return s&&(n.end=ni.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Ak]),t[fh]!=null&&(i=parseInt(t[fh])),i>=60||n>24)return null;if(n>=12&&(s=ts.Meridiem.PM),t[mh]!=null){if(n>12)return null;let a=t[mh][0].toLowerCase();a=="a"&&(s=ts.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=ts.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",ts.Meridiem.AM):e.imply("meridiem",ts.Meridiem.PM),t[ph]!=null){let a=parseInt(t[ph]);if(a>=60)return null;e.assign("second",a)}return e}};ec.default=ni});var vh=_(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var Ck=nt(),_h=zr(),bh=zr(),Ia=zr(),Pk=Ee(),Nk=L(),Ik=new RegExp(`(?:on\\s*?)?(${Ia.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Ia.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${Pk.matchAnyPattern(_h.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${bh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),gh=1,yh=2,Fk=3,Th=4,tc=class extends Nk.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ik}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=_h.MONTH_DICTIONARY[t[Fk].toLowerCase()],s=Ia.parseOrdinalNumberPattern(t[gh]);if(s>31)return t.index=t.index+t[gh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Th]){let a=bh.parseYear(t[Th]);n.start.assign("year",a)}else{let a=Ck.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[yh]){let a=Ia.parseOrdinalNumberPattern(t[yh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};rc.default=tc});var wh=_(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var Eh=zr(),Lk=Ne(),Uk=L(),Wk=Wt(),nc=class extends Uk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Eh.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Eh.parseTimeUnits(t[1]),i=Wk.reverseTimeUnits(n);return Lk.ParsingComponents.createRelativeFromReference(e.reference,i)}};ic.default=nc});var Oh=_(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var kh=zr(),qk=Ne(),Yk=L(),sc=class extends Yk.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${kh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=kh.parseTimeUnits(t[1]);return qk.ParsingComponents.createRelativeFromReference(e.reference,n)}};ac.default=sc});var Dh=_(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var Fa=zr(),$k=Ne(),jk=L(),Gk=Wt(),Bk=Ee(),oc=class extends jk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Fa.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${Bk.matchAnyPattern(Fa.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Fa.parseNumberPattern(t[1]):1,i=Fa.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=Gk.reverseTimeUnits(s)),$k.ParsingComponents.createRelativeFromReference(e.reference,s)}};uc.default=oc});var Mh=_(Ve=>{"use strict";var qt=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createConfiguration=Ve.createCasualConfiguration=Ve.parseDate=Ve.parse=Ve.strict=Ve.casual=void 0;var Hk=vr(),Sh=Qt(),zk=qt(rh()),Kk=qt(nh()),Vk=qt(hn()),Qk=qt(ih()),Xk=qt(sh()),Zk=qt(ah()),Jk=qt(dh()),e1=qt(hh()),t1=qt(vh()),r1=qt(wh()),n1=qt(Oh()),i1=qt(Dh());Ve.casual=new Sh.Chrono(Rh());Ve.strict=new Sh.Chrono(lc(!0));function s1(r,e,t){return Ve.casual.parse(r,e,t)}Ve.parse=s1;function a1(r,e,t){return Ve.casual.parseDate(r,e,t)}Ve.parseDate=a1;function Rh(r=!0){let e=lc(!1,r);return e.parsers.unshift(new zk.default),e.parsers.unshift(new Kk.default),e.parsers.unshift(new i1.default),e}Ve.createCasualConfiguration=Rh;function lc(r=!0,e=!0){return Hk.includeCommonConfiguration({parsers:[new Vk.default(e),new t1.default,new Qk.default,new e1.default,new r1.default,new n1.default,new Jk.default],refiners:[new Xk.default,new Zk.default]},r)}Ve.createConfiguration=lc});var xh=_(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.toHankaku=void 0;function o1(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,u1)}La.toHankaku=o1;function u1(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Ch=_(rs=>{"use strict";var l1=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var cc=xh(),c1=nt(),d1=l1(ge()),f1=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Ah=1,p1=2,dc=3,m1=4,h1=5,g1=6,fc=class{pattern(){return f1}extract(e,t){let n=parseInt(cc.toHankaku(t[h1])),i=parseInt(cc.toHankaku(t[g1])),s=e.createParsingComponents({day:i,month:n});if(t[Ah]&&t[Ah].match("\u540C|\u4ECA|\u672C")){let a=d1.default(e.refDate);s.assign("year",a.year())}if(t[p1]){let a=t[m1],o=a=="\u5143"?1:parseInt(cc.toHankaku(a));t[dc]=="\u4EE4\u548C"?o+=2018:t[dc]=="\u5E73\u6210"?o+=1988:t[dc]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=c1.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};rs.default=fc});var Ph=_(ns=>{"use strict";var y1=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var T1=y1(lr()),pc=class extends T1.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};ns.default=pc});var Ih=_(er=>{"use strict";var _1=er&&er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),b1=er&&er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),v1=er&&er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_1(e,r,t);return b1(e,r),e},E1=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});var w1=E1(ge()),Nh=Be(),mc=v1(wr()),k1=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,hc=class{pattern(){return k1}extract(e,t){let n=t[0],i=w1.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return mc.yesterday(e.reference);case"\u660E\u65E5":return mc.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return mc.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Nh.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Nh.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};er.default=hc});var Uh=_(Qe=>{"use strict";var gc=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createConfiguration=Qe.createCasualConfiguration=Qe.parseDate=Qe.parse=Qe.strict=Qe.casual=void 0;var O1=gc(Ch()),D1=gc(Ph()),S1=gc(Ih()),Fh=Qt();Qe.casual=new Fh.Chrono(Lh());Qe.strict=new Fh.Chrono(yc());function R1(r,e,t){return Qe.casual.parse(r,e,t)}Qe.parse=R1;function M1(r,e,t){return Qe.casual.parseDate(r,e,t)}Qe.parseDate=M1;function Lh(){let r=yc();return r.parsers.unshift(new S1.default),r}Qe.createCasualConfiguration=Lh;function yc(){return{parsers:[new O1.default],refiners:[new D1.default]}}Qe.createConfiguration=yc});var Ua=_(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.parseYear=dr.YEAR_PATTERN=dr.MONTH_DICTIONARY=dr.WEEKDAY_DICTIONARY=void 0;dr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};dr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};dr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function x1(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}dr.parseYear=x1});var qh=_(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var Wh=Ua(),A1=Ee(),C1=L(),P1=mn(),N1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${A1.matchAnyPattern(Wh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),I1=1,F1=2,L1=3,Tc=class extends C1.AbstractParserWithWordBoundaryChecking{innerPattern(){return N1}innerExtract(e,t){let n=t[F1].toLowerCase(),i=Wh.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[I1],a=t[L1],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=P1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};_c.default=Tc});var Yh=_(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var U1=fn(),bc=class extends U1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};vc.default=bc});var $h=_(is=>{"use strict";var W1=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var q1=W1(br()),Ec=class extends q1.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};is.default=Ec});var jh=_(ss=>{"use strict";var Y1=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var $1=Y1(lr()),wc=class extends $1.default{patternBetween(){return/^\s*(?:-)\s*$/i}};ss.default=wc});var Vh=_(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var j1=nt(),zh=Ua(),Kh=Ua(),G1=Ee(),B1=L(),H1=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${G1.matchAnyPattern(zh.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Kh.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Gh=1,Bh=2,z1=3,Hh=4,kc=class extends B1.AbstractParserWithWordBoundaryChecking{innerPattern(){return H1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=zh.MONTH_DICTIONARY[t[z1].toLowerCase()],s=parseInt(t[Gh]);if(s>31)return t.index=t.index+t[Gh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Hh]){let a=Kh.parseYear(t[Hh]);n.start.assign("year",a)}else{let a=j1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Bh]){let a=parseInt(t[Bh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Oc.default=kc});var Qh=_(kr=>{"use strict";var K1=kr&&kr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),V1=kr&&kr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Q1=kr&&kr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&K1(e,r,t);return V1(e,r),e};Object.defineProperty(kr,"__esModule",{value:!0});var X1=L(),Wa=Q1(wr()),Dc=class extends X1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Wa.now(e.reference);case"hoje":return Wa.today(e.reference);case"amanha":case"amanh\xE3":return Wa.tomorrow(e.reference);case"ontem":return Wa.yesterday(e.reference)}return i}};kr.default=Dc});var Xh=_(as=>{"use strict";var Z1=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var qa=Be(),J1=L(),eO=Ut(),tO=Z1(ge()),Sc=class extends J1.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=tO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",qa.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",qa.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",qa.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":eO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",qa.Meridiem.AM),i.imply("hour",12);break}return i}};as.default=Sc});var eg=_(Xe=>{"use strict";var Kr=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createConfiguration=Xe.createCasualConfiguration=Xe.parseDate=Xe.parse=Xe.strict=Xe.casual=void 0;var rO=vr(),Zh=Qt(),nO=Kr(hn()),iO=Kr(qh()),sO=Kr(Yh()),aO=Kr($h()),oO=Kr(jh()),uO=Kr(Vh()),lO=Kr(Qh()),cO=Kr(Xh());Xe.casual=new Zh.Chrono(Jh());Xe.strict=new Zh.Chrono(Rc(!0));function dO(r,e,t){return Xe.casual.parse(r,e,t)}Xe.parse=dO;function fO(r,e,t){return Xe.casual.parseDate(r,e,t)}Xe.parseDate=fO;function Jh(r=!0){let e=Rc(!1,r);return e.parsers.push(new lO.default),e.parsers.push(new cO.default),e}Xe.createCasualConfiguration=Jh;function Rc(r=!0,e=!0){return rO.includeCommonConfiguration({parsers:[new nO.default(e),new iO.default,new sO.default,new uO.default],refiners:[new aO.default,new oO.default]},r)}Xe.createConfiguration=Rc});var tg=_(os=>{"use strict";var pO=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var mO=pO(lr()),Mc=class extends mO.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};os.default=Mc});var rg=_(us=>{"use strict";var hO=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var gO=hO(br()),xc=class extends gO.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};us.default=xc});var ng=_(Or=>{"use strict";var yO=Or&&Or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),TO=Or&&Or.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_O=Or&&Or.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yO(e,r,t);return TO(e,r),e};Object.defineProperty(Or,"__esModule",{value:!0});var bO=L(),Ya=_O(wr()),Ac=class extends bO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Ya.now(e.reference);case"vandaag":return Ya.today(e.reference);case"morgen":case"morgend":return Ya.tomorrow(e.reference);case"gisteren":return Ya.yesterday(e.reference)}return i}};Or.default=Ac});var ig=_(ls=>{"use strict";var vO=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var $a=Be(),EO=L(),wO=vO(ge()),kO=Ut(),OO=1,DO=2,Cc=class extends EO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=wO.default(e.refDate),i=e.createParsingComponents();switch(t[OO]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[DO].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",$a.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",$a.Meridiem.PM),i.imply("hour",20);break;case"middernacht":kO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",$a.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",$a.Meridiem.AM),i.imply("hour",12);break}return i}};ls.default=Cc});var St=_(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.parseTimeUnits=ue.TIME_UNITS_PATTERN=ue.parseYear=ue.YEAR_PATTERN=ue.parseOrdinalNumberPattern=ue.ORDINAL_NUMBER_PATTERN=ue.parseNumberPattern=ue.NUMBER_PATTERN=ue.TIME_UNIT_DICTIONARY=ue.ORDINAL_WORD_DICTIONARY=ue.INTEGER_WORD_DICTIONARY=ue.MONTH_DICTIONARY=ue.WEEKDAY_DICTIONARY=void 0;var ja=Ee(),SO=nt();ue.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};ue.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};ue.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};ue.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};ue.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};ue.NUMBER_PATTERN=`(?:${ja.matchAnyPattern(ue.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function ag(r){let e=r.toLowerCase();return ue.INTEGER_WORD_DICTIONARY[e]!==void 0?ue.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}ue.parseNumberPattern=ag;ue.ORDINAL_NUMBER_PATTERN=`(?:${ja.matchAnyPattern(ue.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function RO(r){let e=r.toLowerCase();return ue.ORDINAL_WORD_DICTIONARY[e]!==void 0?ue.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}ue.parseOrdinalNumberPattern=RO;ue.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function MO(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return SO.findMostLikelyADYear(e)}ue.parseYear=MO;var og=`(${ue.NUMBER_PATTERN})\\s{0,5}(${ja.matchAnyPattern(ue.TIME_UNIT_DICTIONARY)})\\s{0,5}`,sg=new RegExp(og,"i");ue.TIME_UNITS_PATTERN=ja.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",og);function xO(r){let e={},t=r,n=sg.exec(t);for(;n;)AO(e,n),t=t.substring(n[0].length),n=sg.exec(t);return e}ue.parseTimeUnits=xO;function AO(r,e){let t=ag(e[1]),n=ue.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var lg=_(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var ug=St(),CO=Ne(),PO=L(),Pc=class extends PO.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+ug.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=ug.parseTimeUnits(t[1]);return CO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Nc.default=Pc});var dg=_(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var cg=St(),NO=Ee(),IO=L(),FO=mn(),LO=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${NO.matchAnyPattern(cg.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),UO=1,WO=2,qO=3,Ic=class extends IO.AbstractParserWithWordBoundaryChecking{innerPattern(){return LO}innerExtract(e,t){let n=t[WO].toLowerCase(),i=cg.WEEKDAY_DICTIONARY[n],s=t[UO],a=t[qO],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=FO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Fc.default=Ic});var yg=_(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});var YO=nt(),hg=St(),Ga=St(),gg=St(),$O=Ee(),jO=L(),GO=new RegExp(`(?:on\\s*?)?(${Ga.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Ga.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+$O.matchAnyPattern(hg.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${gg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),BO=3,fg=1,pg=2,mg=4,Lc=class extends jO.AbstractParserWithWordBoundaryChecking{innerPattern(){return GO}innerExtract(e,t){let n=hg.MONTH_DICTIONARY[t[BO].toLowerCase()],i=Ga.parseOrdinalNumberPattern(t[fg]);if(i>31)return t.index=t.index+t[fg].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[mg]){let u=gg.parseYear(t[mg]);s.assign("year",u)}else{let u=YO.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[pg])return s;let a=Ga.parseOrdinalNumberPattern(t[pg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Uc.default=Lc});var vg=_(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var _g=St(),HO=nt(),zO=Ee(),bg=St(),KO=L(),VO=new RegExp(`(${zO.matchAnyPattern(_g.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${bg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),QO=1,Tg=2,Wc=class extends KO.AbstractParserWithWordBoundaryChecking{innerPattern(){return VO}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[QO],s=_g.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Tg]){let a=bg.parseYear(t[Tg]);n.assign("year",a)}else{let a=HO.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};qc.default=Wc});var Eg=_($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var XO=L(),ZO=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),JO=1,eD=2,Yc=class extends XO.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZO}innerExtract(e,t){let n=parseInt(t[eD]),i=parseInt(t[JO]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};$c.default=Yc});var wg=_(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var tD=fn(),jc=class extends tD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Gc.default=jc});var Dg=_(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var Og=St(),rD=Ee(),nD=L(),iD=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${rD.matchAnyPattern(Og.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),sD=1,aD=2,kg=3,oD=4,Bc=class extends nD.AbstractParserWithWordBoundaryChecking{innerPattern(){return iD}innerExtract(e,t){let n=t[kg]?parseInt(t[kg]):Og.MONTH_DICTIONARY[t[aD].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[sD]);return{day:parseInt(t[oD]),month:n,year:i}}};Hc.default=Bc});var Sg=_(cs=>{"use strict";var uD=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var lD=L(),Ba=Be(),zc=Ut(),cD=uD(ge()),dD=1,fD=2,Kc=class extends lD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[dD].toLowerCase(),i=t[fD].toLowerCase(),s=e.createParsingComponents(),a=cD.default(e.refDate);switch(n){case"gisteren":zc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":zc.assignSimilarDate(s,a);break;case"morgen":zc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Ba.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Ba.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Ba.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Ba.Meridiem.PM),s.imply("hour",20);break}return s}};cs.default=Kc});var Mg=_(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var Rg=St(),pD=Ne(),mD=L(),hD=Wt(),gD=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Rg.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Vc=class extends mD.AbstractParserWithWordBoundaryChecking{innerPattern(){return gD}innerExtract(e,t){let n=t[1].toLowerCase(),i=Rg.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=hD.reverseTimeUnits(i);break}return pD.ParsingComponents.createRelativeFromReference(e.reference,i)}};Qc.default=Vc});var Cg=_(ds=>{"use strict";var yD=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var Ag=St(),xg=Ne(),TD=yD(ge()),_D=L(),bD=Ee(),vD=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${bD.matchAnyPattern(Ag.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),ED=1,wD=2,Xc=class extends _D.AbstractParserWithWordBoundaryChecking{innerPattern(){return vD}innerExtract(e,t){let n=t[ED].toLowerCase(),i=t[wD].toLowerCase(),s=Ag.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,xg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,xg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=TD.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ds.default=Xc});var Pg=_(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var Jc=St(),kD=Ne(),OD=L(),DD=Wt(),SD=new RegExp("("+Jc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),RD=new RegExp("("+Jc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Zc=class extends OD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?RD:SD}innerExtract(e,t){let n=Jc.parseTimeUnits(t[1]),i=DD.reverseTimeUnits(n);return kD.ParsingComponents.createRelativeFromReference(e.reference,i)}};ed.default=Zc});var Ng=_(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var rd=St(),MD=Ne(),xD=L(),AD=new RegExp("("+rd.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),CD=new RegExp("("+rd.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),PD=1,td=class extends xD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?CD:AD}innerExtract(e,t){let n=rd.parseTimeUnits(t[PD]);return MD.ParsingComponents.createRelativeFromReference(e.reference,n)}};nd.default=td});var Ug=_(Ze=>{"use strict";var st=Ze&&Ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.createConfiguration=Ze.createCasualConfiguration=Ze.parseDate=Ze.parse=Ze.strict=Ze.casual=void 0;var ND=vr(),Ig=Qt(),ID=st(tg()),FD=st(rg()),LD=st(ng()),UD=st(ig()),WD=st(hn()),qD=st(lg()),YD=st(dg()),$D=st(yg()),Fg=st(vg()),jD=st(Eg()),GD=st(wg()),BD=st(Dg()),HD=st(Sg()),zD=st(Mg()),KD=st(Cg()),VD=st(Pg()),QD=st(Ng());Ze.casual=new Ig.Chrono(Lg());Ze.strict=new Ig.Chrono(id(!0));function XD(r,e,t){return Ze.casual.parse(r,e,t)}Ze.parse=XD;function ZD(r,e,t){return Ze.casual.parseDate(r,e,t)}Ze.parseDate=ZD;function Lg(r=!0){let e=id(!1,r);return e.parsers.unshift(new LD.default),e.parsers.unshift(new UD.default),e.parsers.unshift(new HD.default),e.parsers.unshift(new Fg.default),e.parsers.unshift(new KD.default),e.parsers.unshift(new zD.default),e}Ze.createCasualConfiguration=Lg;function id(r=!0,e=!0){return ND.includeCommonConfiguration({parsers:[new WD.default(e),new qD.default,new $D.default,new Fg.default,new YD.default,new BD.default,new jD.default,new GD.default(r),new VD.default(r),new QD.default(r)],refiners:[new FD.default,new ID.default]},r)}Ze.createConfiguration=id});var $g=_(fs=>{"use strict";var JD=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var eS=JD(ge()),tS=L(),rS=1,Wg=2,nS=3,qg=4,Yg=5,iS=6,sd=class extends tS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=eS.default(e.refDate),a=s;if(t[rS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Wg]){let o=t[Wg],u=t[nS];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[qg]){let u=t[qg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Yg]){let o=t[Yg];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[iS];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};fs.default=sd});var ii=_(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.zhStringToYear=vt.zhStringToNumber=vt.WEEKDAY_OFFSET=vt.NUMBER=void 0;vt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};vt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function sS(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?vt.NUMBER[n]:e*vt.NUMBER[n]:e+=vt.NUMBER[n]}return e}vt.zhStringToNumber=sS;function aS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+vt.NUMBER[n]}return parseInt(e)}vt.zhStringToYear=aS});var Gg=_(ps=>{"use strict";var oS=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var uS=oS(ge()),lS=L(),Tn=ii(),ad=1,jg=2,od=3,ud=class extends lS.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Tn.NUMBER).join("")+"]{4}|["+Object.keys(Tn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Tn.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Tn.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=uS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[jg]);if(isNaN(s)&&(s=Tn.zhStringToNumber(t[jg])),i.start.assign("month",s),t[od]){let a=parseInt(t[od]);isNaN(a)&&(a=Tn.zhStringToNumber(t[od])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[ad]){let a=parseInt(t[ad]);isNaN(a)&&(a=Tn.zhStringToYear(t[ad])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};ps.default=ud});var Hg=_(ms=>{"use strict";var cS=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var dS=cS(ge()),fS=L(),Bg=ii(),pS=new RegExp("(\\d+|["+Object.keys(Bg.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),ld=1,mS=2,cd=class extends fS.AbstractParserWithWordBoundaryChecking{innerPattern(){return pS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[ld]);if(isNaN(i)&&(i=Bg.zhStringToNumber(t[ld])),isNaN(i)){let u=t[ld];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=dS.default(e.refDate),o=t[mS][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ms.default=cd});var Kg=_(hs=>{"use strict";var hS=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var gS=hS(ge()),yS=L(),zg=ii(),TS=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(zg.WEEKDAY_OFFSET).join("|")+")"),dd=class extends yS.AbstractParserWithWordBoundaryChecking{innerPattern(){return TS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=zg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=gS.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};hs.default=dd});var Vg=_(gs=>{"use strict";var _S=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var bS=_S(ge()),vS=L(),$t=ii(),ES=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),wS=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Ha=1,za=2,Ka=3,Va=4,Qa=5,Xa=6,Yt=7,si=8,Za=9,fd=class extends vS.AbstractParserWithWordBoundaryChecking{innerPattern(){return ES}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=bS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Ha]){var a=t[Ha];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Va]){var o=t[Va];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[si]){var p=parseInt(t[si]);if(isNaN(p)&&(p=$t.zhStringToNumber(t[si])),p>=60)return null;i.start.assign("second",p)}if(u=parseInt(t[Xa]),isNaN(u)&&(u=$t.zhStringToNumber(t[Xa])),t[Yt]?t[Yt]=="\u534A"?l=30:t[Yt]=="\u6B63"||t[Yt]=="\u6574"?l=0:(l=parseInt(t[Yt]),isNaN(l)&&(l=$t.zhStringToNumber(t[Yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Za]){if(u>12)return null;var h=t[Za][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12))}else if(t[za]){var v=t[za],y=v[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ka]){var O=t[Ka],M=O[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Qa]){var $=t[Qa],q=$[0];q=="\u4E0A"||q=="\u671D"||q=="\u65E9"||q=="\u51CC"?(c=0,u==12&&(u=0)):(q=="\u4E0B"||q=="\u664F"||q=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=wS.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let U=s.clone();if(i.end=e.createParsingComponents(),t[Ha]){var a=t[Ha];a=="\u660E"||a=="\u807D"?n.hour()>1&&U.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?U.add(-1,"day"):a=="\u524D"?U.add(-2,"day"):a=="\u5927\u524D"?U.add(-3,"day"):a=="\u5F8C"?U.add(2,"day"):a=="\u5927\u5F8C"&&U.add(3,"day"),i.end.assign("day",U.date()),i.end.assign("month",U.month()+1),i.end.assign("year",U.year())}else if(t[Va]){var o=t[Va];o=="\u660E"||o=="\u807D"?U.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?U.add(-1,"day"):o=="\u524D"?U.add(-2,"day"):o=="\u5927\u524D"?U.add(-3,"day"):o=="\u5F8C"?U.add(2,"day"):o=="\u5927\u5F8C"&&U.add(3,"day"),i.end.assign("day",U.date()),i.end.assign("month",U.month()+1),i.end.assign("year",U.year())}else i.end.imply("day",U.date()),i.end.imply("month",U.month()+1),i.end.imply("year",U.year());if(u=0,l=0,c=-1,t[si]){var p=parseInt(t[si]);if(isNaN(p)&&(p=$t.zhStringToNumber(t[si])),p>=60)return null;i.end.assign("second",p)}if(u=parseInt(t[Xa]),isNaN(u)&&(u=$t.zhStringToNumber(t[Xa])),t[Yt]?t[Yt]=="\u534A"?l=30:t[Yt]=="\u6B63"||t[Yt]=="\u6574"?l=0:(l=parseInt(t[Yt]),isNaN(l)&&(l=$t.zhStringToNumber(t[Yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Za]){if(u>12)return null;var h=t[Za][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[za]){var v=t[za],y=v[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ka]){var O=t[Ka],M=O[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Qa]){var $=t[Qa],q=$[0];q=="\u4E0A"||q=="\u671D"||q=="\u65E9"||q=="\u51CC"?(c=0,u==12&&(u=0)):(q=="\u4E0B"||q=="\u664F"||q=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};gs.default=fd});var Xg=_(ys=>{"use strict";var kS=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var OS=kS(ge()),DS=L(),Qg=ii(),SS=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Qg.WEEKDAY_OFFSET).join("|")+")"),pd=class extends DS.AbstractParserWithWordBoundaryChecking{innerPattern(){return SS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Qg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=OS.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};ys.default=pd});var Zg=_(Ts=>{"use strict";var RS=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var MS=RS(lr()),md=class extends MS.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ts.default=md});var Jg=_(_s=>{"use strict";var xS=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var AS=xS(br()),hd=class extends AS.default{patternBetween(){return/^\s*$/i}};_s.default=hd});var ey=_(Ye=>{"use strict";var Dr=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConfiguration=Ye.createCasualConfiguration=Ye.parseDate=Ye.parse=Ye.strict=Ye.casual=Ye.hant=void 0;var gd=Qt(),CS=Dr(Ra()),PS=vr(),NS=Dr($g()),IS=Dr(Gg()),FS=Dr(Hg()),LS=Dr(Kg()),US=Dr(Vg()),WS=Dr(Xg()),qS=Dr(Zg()),YS=Dr(Jg());Ye.hant=new gd.Chrono(yd());Ye.casual=new gd.Chrono(yd());Ye.strict=new gd.Chrono(Td());function $S(r,e,t){return Ye.casual.parse(r,e,t)}Ye.parse=$S;function jS(r,e,t){return Ye.casual.parseDate(r,e,t)}Ye.parseDate=jS;function yd(){let r=Td();return r.parsers.unshift(new NS.default),r}Ye.createCasualConfiguration=yd;function Td(){let r=PS.includeCommonConfiguration({parsers:[new IS.default,new LS.default,new WS.default,new US.default,new FS.default],refiners:[new qS.default,new YS.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof CS.default)),r}Ye.createConfiguration=Td});var iy=_(bs=>{"use strict";var GS=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var BS=GS(ge()),HS=L(),zS=1,ty=2,KS=3,ry=4,ny=5,VS=6,_d=class extends HS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=BS.default(e.refDate),a=s;if(t[zS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[ty]){let o=t[ty],u=t[KS];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[ry]){let u=t[ry][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ny]){let o=t[ny];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[VS];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};bs.default=_d});var ai=_(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.zhStringToYear=Et.zhStringToNumber=Et.WEEKDAY_OFFSET=Et.NUMBER=void 0;Et.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Et.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function QS(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Et.NUMBER[n]:e*Et.NUMBER[n]:e+=Et.NUMBER[n]}return e}Et.zhStringToNumber=QS;function XS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Et.NUMBER[n]}return parseInt(e)}Et.zhStringToYear=XS});var ay=_(vs=>{"use strict";var ZS=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var JS=ZS(ge()),e0=L(),_n=ai(),bd=1,sy=2,vd=3,Ed=class extends e0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(_n.NUMBER).join("")+"]{4}|["+Object.keys(_n.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(_n.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(_n.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=JS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[sy]);if(isNaN(s)&&(s=_n.zhStringToNumber(t[sy])),i.start.assign("month",s),t[vd]){let a=parseInt(t[vd]);isNaN(a)&&(a=_n.zhStringToNumber(t[vd])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[bd]){let a=parseInt(t[bd]);isNaN(a)&&(a=_n.zhStringToYear(t[bd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};vs.default=Ed});var uy=_(Es=>{"use strict";var t0=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var r0=t0(ge()),n0=L(),oy=ai(),i0=new RegExp("(\\d+|["+Object.keys(oy.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),wd=1,s0=2,kd=class extends n0.AbstractParserWithWordBoundaryChecking{innerPattern(){return i0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[wd]);if(isNaN(i)&&(i=oy.zhStringToNumber(t[wd])),isNaN(i)){let u=t[wd];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=r0.default(e.refDate),o=t[s0][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Es.default=kd});var cy=_(ws=>{"use strict";var a0=ws&&ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ws,"__esModule",{value:!0});var o0=a0(ge()),u0=L(),ly=ai(),l0=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(ly.WEEKDAY_OFFSET).join("|")+")"),Od=class extends u0.AbstractParserWithWordBoundaryChecking{innerPattern(){return l0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ly.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=o0.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};ws.default=Od});var dy=_(ks=>{"use strict";var c0=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});var d0=c0(ge()),f0=L(),Gt=ai(),p0=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),m0=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Ja=1,eo=2,to=3,ro=4,no=5,io=6,jt=7,oi=8,so=9,Dd=class extends f0.AbstractParserWithWordBoundaryChecking{innerPattern(){return p0}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=d0.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Ja]){let c=t[Ja];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ro]){let c=t[ro];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[oi]){let c=parseInt(t[oi]);if(isNaN(c)&&(c=Gt.zhStringToNumber(t[oi])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[io]),isNaN(a)&&(a=Gt.zhStringToNumber(t[io])),t[jt]?t[jt]=="\u534A"?o=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?o=0:(o=parseInt(t[jt]),isNaN(o)&&(o=Gt.zhStringToNumber(t[jt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[so]){if(a>12)return null;let c=t[so][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[eo]){let p=t[eo][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[to]){let p=t[to][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[no]){let p=t[no][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=m0.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Ja]){let c=t[Ja];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[ro]){let c=t[ro];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[oi]){let c=parseInt(t[oi]);if(isNaN(c)&&(c=Gt.zhStringToNumber(t[oi])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[io]),isNaN(a)&&(a=Gt.zhStringToNumber(t[io])),t[jt]?t[jt]=="\u534A"?o=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?o=0:(o=parseInt(t[jt]),isNaN(o)&&(o=Gt.zhStringToNumber(t[jt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[so]){if(a>12)return null;let c=t[so][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[eo]){let p=t[eo][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[to]){let p=t[to][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[no]){let p=t[no][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ks.default=Dd});var py=_(Os=>{"use strict";var h0=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});var g0=h0(ge()),y0=L(),fy=ai(),T0=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(fy.WEEKDAY_OFFSET).join("|")+")"),Sd=class extends y0.AbstractParserWithWordBoundaryChecking{innerPattern(){return T0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=fy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=g0.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Os.default=Sd});var my=_(Ds=>{"use strict";var _0=Ds&&Ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ds,"__esModule",{value:!0});var b0=_0(lr()),Rd=class extends b0.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Ds.default=Rd});var hy=_(Ss=>{"use strict";var v0=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var E0=v0(br()),Md=class extends E0.default{patternBetween(){return/^\s*$/i}};Ss.default=Md});var gy=_($e=>{"use strict";var Sr=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.createConfiguration=$e.createCasualConfiguration=$e.parseDate=$e.parse=$e.strict=$e.casual=$e.hans=void 0;var xd=Qt(),w0=Sr(Ra()),k0=vr(),O0=Sr(iy()),D0=Sr(ay()),S0=Sr(uy()),R0=Sr(cy()),M0=Sr(dy()),x0=Sr(py()),A0=Sr(my()),C0=Sr(hy());$e.hans=new xd.Chrono(Ad());$e.casual=new xd.Chrono(Ad());$e.strict=new xd.Chrono(Cd());function P0(r,e,t){return $e.casual.parse(r,e,t)}$e.parse=P0;function N0(r,e,t){return $e.casual.parseDate(r,e,t)}$e.parseDate=N0;function Ad(){let r=Cd();return r.parsers.unshift(new O0.default),r}$e.createCasualConfiguration=Ad;function Cd(){let r=k0.includeCommonConfiguration({parsers:[new D0.default,new R0.default,new x0.default,new M0.default,new S0.default],refiners:[new A0.default,new C0.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof w0.default)),r}$e.createConfiguration=Cd});var Ty=_(Rt=>{"use strict";var yy=Rt&&Rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),I0=Rt&&Rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),F0=Rt&&Rt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&yy(e,r,t)},L0=Rt&&Rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yy(e,r,t);return I0(e,r),e};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.hans=void 0;F0(ey(),Rt);Rt.hans=L0(gy())});var wt=_(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.parseTimeUnits=J.TIME_UNITS_PATTERN=J.parseYear=J.YEAR_PATTERN=J.parseOrdinalNumberPattern=J.ORDINAL_NUMBER_PATTERN=J.parseNumberPattern=J.NUMBER_PATTERN=J.TIME_UNIT_DICTIONARY=J.ORDINAL_WORD_DICTIONARY=J.INTEGER_WORD_DICTIONARY=J.MONTH_DICTIONARY=J.FULL_MONTH_NAME_DICTIONARY=J.WEEKDAY_DICTIONARY=J.REGEX_PARTS=void 0;var ao=Ee(),U0=nt();J.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};J.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};J.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};J.MONTH_DICTIONARY=Object.assign(Object.assign({},J.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});J.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};J.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};J.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};J.NUMBER_PATTERN=`(?:${ao.matchAnyPattern(J.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function by(r){let e=r.toLowerCase();return J.INTEGER_WORD_DICTIONARY[e]!==void 0?J.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}J.parseNumberPattern=by;J.ORDINAL_NUMBER_PATTERN=`(?:${ao.matchAnyPattern(J.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function W0(r){let e=r.toLowerCase();return J.ORDINAL_WORD_DICTIONARY[e]!==void 0?J.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}J.parseOrdinalNumberPattern=W0;var Pd="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";J.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Pd}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Pd}|[5-9][0-9]${Pd})`;function q0(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return U0.findMostLikelyADYear(e)}J.parseYear=q0;var vy=`(${J.NUMBER_PATTERN})\\s{0,3}(${ao.matchAnyPattern(J.TIME_UNIT_DICTIONARY)})`,_y=new RegExp(vy,"i");J.TIME_UNITS_PATTERN=ao.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",vy);function Y0(r){let e={},t=r,n=_y.exec(t);for(;n;)$0(e,n),t=t.substring(n[0].length).trim(),n=_y.exec(t);return e}J.parseTimeUnits=Y0;function $0(r,e){let t=by(e[1]),n=J.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var wy=_(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var Rs=wt(),j0=Ne(),G0=L(),Ey=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Rs.TIME_UNITS_PATTERN})${Rs.REGEX_PARTS.rightBoundary}`,B0=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Ey}`,Rs.REGEX_PARTS.flags),H0=new RegExp(Ey,"i"),Nd=class extends G0.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Rs.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?H0:B0}innerExtract(e,t){let n=Rs.parseTimeUnits(t[1]);return j0.ParsingComponents.createRelativeFromReference(e.reference,n)}};Id.default=Nd});var Ry=_(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var z0=nt(),Ms=wt(),Sy=wt(),oo=wt(),K0=Ee(),V0=L(),Q0=new RegExp(`(?:\u0441)?\\s*(${oo.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${oo.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${K0.matchAnyPattern(Ms.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Sy.YEAR_PATTERN}(?![^\\s]\\d)))?${Ms.REGEX_PARTS.rightBoundary}`,Ms.REGEX_PARTS.flags),ky=1,Oy=2,X0=3,Dy=4,Fd=class extends V0.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ms.REGEX_PARTS.leftBoundary}innerPattern(){return Q0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ms.MONTH_DICTIONARY[t[X0].toLowerCase()],s=oo.parseOrdinalNumberPattern(t[ky]);if(s>31)return t.index=t.index+t[ky].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Dy]){let a=Sy.parseYear(t[Dy]);n.start.assign("year",a)}else{let a=z0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Oy]){let a=oo.parseOrdinalNumberPattern(t[Oy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ld.default=Fd});var Ay=_(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var xs=wt(),Z0=nt(),J0=Ee(),xy=wt(),eR=L(),tR=new RegExp(`((?:\u0432)\\s*)?(${J0.matchAnyPattern(xs.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${xy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,xs.REGEX_PARTS.flags),rR=2,My=3,Ud=class extends eR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return xs.REGEX_PARTS.leftBoundary}innerPattern(){return tR}innerExtract(e,t){let n=t[rR].toLowerCase();if(t[0].length<=3&&!xs.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=xs.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[My]){let a=xy.parseYear(t[My]);i.start.assign("year",a)}else{let a=Z0.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Wd.default=Ud});var Py=_(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});var uo=Be(),nR=fn(),Cy=wt(),qd=class extends nR.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Cy.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Cy.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",uo.Meridiem.PM)):i<6&&n.assign("meridiem",uo.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",uo.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",uo.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Yd.default=qd});var Ny=_(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var lo=wt(),iR=Ne(),sR=L(),aR=Wt(),oR=new RegExp(`(${lo.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,lo.REGEX_PARTS.flags),$d=class extends sR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return lo.REGEX_PARTS.leftBoundary}innerPattern(){return oR}innerExtract(e,t){let n=lo.parseTimeUnits(t[1]),i=aR.reverseTimeUnits(n);return iR.ParsingComponents.createRelativeFromReference(e.reference,i)}};jd.default=$d});var Iy=_(As=>{"use strict";var uR=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(As,"__esModule",{value:!0});var lR=uR(lr()),Gd=class extends lR.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};As.default=Gd});var Fy=_(Cs=>{"use strict";var cR=Cs&&Cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cs,"__esModule",{value:!0});var dR=cR(br()),Bd=class extends dR.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Cs.default=Bd});var Ly=_(Rr=>{"use strict";var fR=Rr&&Rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pR=Rr&&Rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mR=Rr&&Rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fR(e,r,t);return pR(e,r),e};Object.defineProperty(Rr,"__esModule",{value:!0});var hR=L(),Ps=mR(wr()),Hd=wt(),gR=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Hd.REGEX_PARTS.rightBoundary}`,Hd.REGEX_PARTS.flags),zd=class extends hR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hd.REGEX_PARTS.leftBoundary}innerPattern(e){return gR}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Ps.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Ps.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Ps.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Ps.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Ps.theDayBefore(e.reference,2)}return i}};Rr.default=zd});var Uy=_(tr=>{"use strict";var yR=tr&&tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),TR=tr&&tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_R=tr&&tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yR(e,r,t);return TR(e,r),e},bR=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tr,"__esModule",{value:!0});var vR=L(),bn=_R(wr()),ER=Ut(),wR=bR(ge()),Kd=wt(),kR=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Kd.REGEX_PARTS.rightBoundary}`,Kd.REGEX_PARTS.flags),Vd=class extends vR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Kd.REGEX_PARTS.leftBoundary}innerPattern(){return kR}innerExtract(e,t){let n=wR.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return bn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return bn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return bn.morning(e.reference);if(i.match(/в\s*полдень/))return bn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return bn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return bn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),ER.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?bn.midnight(e.reference):s}};tr.default=Vd});var Wy=_(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var Ns=wt(),OR=Ee(),DR=L(),SR=mn(),RR=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${OR.matchAnyPattern(Ns.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Ns.REGEX_PARTS.rightBoundary}`,Ns.REGEX_PARTS.flags),MR=1,xR=2,AR=3,Qd=class extends DR.AbstractParserWithWordBoundaryChecking{innerPattern(){return RR}patternLeftBoundary(){return Ns.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[xR].toLowerCase(),i=Ns.WEEKDAY_DICTIONARY[n],s=t[MR],a=t[AR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=SR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Xd.default=Qd});var Yy=_(Fs=>{"use strict";var CR=Fs&&Fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fs,"__esModule",{value:!0});var Is=wt(),qy=Ne(),PR=CR(ge()),NR=L(),IR=Ee(),FR=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${IR.matchAnyPattern(Is.TIME_UNIT_DICTIONARY)})(?=\\s*)${Is.REGEX_PARTS.rightBoundary}`,Is.REGEX_PARTS.flags),LR=1,UR=2,Zd=class extends NR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Is.REGEX_PARTS.leftBoundary}innerPattern(){return FR}innerExtract(e,t){let n=t[LR].toLowerCase(),i=t[UR].toLowerCase(),s=Is.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,qy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,qy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=PR.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Fs.default=Zd});var $y=_(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var Ls=wt(),WR=Ne(),qR=L(),YR=Wt(),$R=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Ls.TIME_UNITS_PATTERN})${Ls.REGEX_PARTS.rightBoundary}`,Ls.REGEX_PARTS.flags),Jd=class extends qR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ls.REGEX_PARTS.leftBoundary}innerPattern(){return $R}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ls.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=YR.reverseTimeUnits(i);break}return WR.ParsingComponents.createRelativeFromReference(e.reference,i)}};ef.default=Jd});var By=_(Je=>{"use strict";var Mt=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});Je.createConfiguration=Je.createCasualConfiguration=Je.parseDate=Je.parse=Je.strict=Je.casual=void 0;var jR=Mt(wy()),GR=Mt(Ry()),BR=Mt(Ay()),HR=Mt(Py()),zR=Mt(Ny()),KR=Mt(Iy()),VR=Mt(Fy()),QR=vr(),XR=Mt(Ly()),ZR=Mt(Uy()),JR=Mt(Wy()),eM=Mt(Yy()),jy=Qt(),tM=Mt(hn()),rM=Mt($y());Je.casual=new jy.Chrono(Gy());Je.strict=new jy.Chrono(tf(!0));function nM(r,e,t){return Je.casual.parse(r,e,t)}Je.parse=nM;function iM(r,e,t){return Je.casual.parseDate(r,e,t)}Je.parseDate=iM;function Gy(){let r=tf(!1);return r.parsers.unshift(new XR.default),r.parsers.unshift(new ZR.default),r.parsers.unshift(new BR.default),r.parsers.unshift(new eM.default),r.parsers.unshift(new rM.default),r}Je.createCasualConfiguration=Gy;function tf(r=!0){return QR.includeCommonConfiguration({parsers:[new tM.default(!0),new jR.default,new GR.default,new JR.default,new HR.default(r),new zR.default],refiners:[new VR.default,new KR.default]},r)}Je.createConfiguration=tf});var Be=_(se=>{"use strict";var sM=se&&se.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aM=se&&se.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Vr=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sM(e,r,t);return aM(e,r),e};Object.defineProperty(se,"__esModule",{value:!0});se.parseDate=se.parse=se.casual=se.strict=se.ru=se.zh=se.nl=se.pt=se.ja=se.fr=se.de=se.Meridiem=se.Chrono=se.en=void 0;var rf=Vr(_l());se.en=rf;var oM=Qt();Object.defineProperty(se,"Chrono",{enumerable:!0,get:function(){return oM.Chrono}});var uM;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(uM=se.Meridiem||(se.Meridiem={}));var lM=Vr(eh());se.de=lM;var cM=Vr(Mh());se.fr=cM;var dM=Vr(Uh());se.ja=dM;var fM=Vr(eg());se.pt=fM;var pM=Vr(Ug());se.nl=pM;var mM=Vr(Ty());se.zh=mM;var hM=Vr(By());se.ru=hM;se.strict=rf.strict;se.casual=rf.casual;function gM(r,e,t){return se.casual.parse(r,e,t)}se.parse=gM;function yM(r,e,t){return se.casual.parseDate(r,e,t)}se.parseDate=yM});var CT=_((xT,AT)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(d){var f=Object.getOwnPropertyNames(d);return f.push.apply(f,Object.getOwnPropertySymbols(d)),f}:Object.keys;function c(){this._events={},this._conf&&p.call(this,this._conf)}function p(d){d&&(this._conf=d,d.delimiter&&(this.delimiter=d.delimiter),d.maxListeners!==r&&(this._maxListeners=d.maxListeners),d.wildcard&&(this.wildcard=d.wildcard),d.newListener&&(this._newListener=d.newListener),d.removeListener&&(this._removeListener=d.removeListener),d.verboseMemoryLeak&&(this.verboseMemoryLeak=d.verboseMemoryLeak),d.ignoreErrors&&(this.ignoreErrors=d.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function h(d,f){var m="(node) warning: possible EventEmitter memory leak detected. "+d+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(m+=" Event name: "+f+"."),typeof process!="undefined"&&process.emitWarning){var g=new Error(m);g.name="MaxListenersExceededWarning",g.emitter=this,g.count=d,process.emitWarning(g)}else console.error(m),console.trace&&console.trace()}var v=function(d,f,m){var g=arguments.length;switch(g){case 0:return[];case 1:return[d];case 2:return[d,f];case 3:return[d,f,m];default:for(var T=new Array(g);g--;)T[g]=arguments[g];return T}};function y(d,f){for(var m={},g,T=d.length,b=f?f.length:0,w=0;w<T;w++)g=d[w],m[g]=w<b?f[w]:r;return m}function O(d,f,m){this._emitter=d,this._target=f,this._listeners={},this._listenersCount=0;var g,T;if((m.on||m.off)&&(g=m.on,T=m.off),f.addEventListener?(g=f.addEventListener,T=f.removeEventListener):f.addListener?(g=f.addListener,T=f.removeListener):f.on&&(g=f.on,T=f.off),!g&&!T)throw Error("target does not implement any known event API");if(typeof g!="function")throw TypeError("on method must be a function");if(typeof T!="function")throw TypeError("off method must be a function");this._on=g,this._off=T;var b=d._observers;b?b.push(this):d._observers=[this]}Object.assign(O.prototype,{subscribe:function(d,f,m){var g=this,T=this._target,b=this._emitter,w=this._listeners,S=function(){var k=v.apply(null,arguments),D={data:k,name:f,original:d};if(m){var P=m.call(T,D);P!==!1&&b.emit.apply(b,[D.name].concat(k));return}b.emit.apply(b,[f].concat(k))};if(w[d])throw Error("Event '"+d+"' is already listening");this._listenersCount++,b._newListener&&b._removeListener&&!g._onNewListener?(this._onNewListener=function(k){k===f&&w[d]===null&&(w[d]=S,g._on.call(T,d,S))},b.on("newListener",this._onNewListener),this._onRemoveListener=function(k){k===f&&!b.hasListeners(k)&&w[d]&&(w[d]=null,g._off.call(T,d,S))},w[d]=null,b.on("removeListener",this._onRemoveListener)):(w[d]=S,g._on.call(T,d,S))},unsubscribe:function(d){var f=this,m=this._listeners,g=this._emitter,T,b,w=this._off,S=this._target,k;if(d&&typeof d!="string")throw TypeError("event must be a string");function D(){f._onNewListener&&(g.off("newListener",f._onNewListener),g.off("removeListener",f._onRemoveListener),f._onNewListener=null,f._onRemoveListener=null);var P=ve.call(g,f);g._observers.splice(P,1)}if(d){if(T=m[d],!T)return;w.call(S,d,T),delete m[d],--this._listenersCount||D()}else{for(b=l(m),k=b.length;k-- >0;)d=b[k],w.call(S,d,m[d]);this._listeners={},this._listenersCount=0,D()}}});function M(d,f,m,g){var T=Object.assign({},f);if(!d)return T;if(typeof d!="object")throw TypeError("options must be an object");var b=Object.keys(d),w=b.length,S,k,D;function P(ae){throw Error('Invalid "'+S+'" option value'+(ae?". Reason: "+ae:""))}for(var me=0;me<w;me++){if(S=b[me],!g&&!e.call(f,S))throw Error('Unknown "'+S+'" option');k=d[S],k!==r&&(D=m[S],T[S]=D?D(k,P):k)}return T}function $(d,f){return(typeof d!="function"||!d.hasOwnProperty("prototype"))&&f("value must be a constructor"),d}function q(d){var f="value must be type of "+d.join("|"),m=d.length,g=d[0],T=d[1];return m===1?function(b,w){if(typeof b===g)return b;w(f)}:m===2?function(b,w){var S=typeof b;if(S===g||S===T)return b;w(f)}:function(b,w){for(var S=typeof b,k=m;k-- >0;)if(S===d[k])return b;w(f)}}var U=q(["function"]),ie=q(["object","function"]);function re(d,f,m){var g,T,b=0,w,S=new d(function(k,D,P){m=M(m,{timeout:0,overload:!1},{timeout:function(Se,I){return Se*=1,(typeof Se!="number"||Se<0||!Number.isFinite(Se))&&I("timeout must be a positive number"),Se}}),g=!m.overload&&typeof d.prototype.cancel=="function"&&typeof P=="function";function me(){T&&(T=null),b&&(clearTimeout(b),b=0)}var ae=function(Se){me(),k(Se)},te=function(Se){me(),D(Se)};g?f(ae,te,P):(T=[function(Se){te(Se||Error("canceled"))}],f(ae,te,function(Se){if(w)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Se!="function")throw TypeError("onCancel callback must be a function");T.push(Se)}),w=!0),m.timeout>0&&(b=setTimeout(function(){var Se=Error("timeout");Se.code="ETIMEDOUT",b=0,S.cancel(Se),D(Se)},m.timeout))});return g||(S.cancel=function(k){if(!!T){for(var D=T.length,P=1;P<D;P++)T[P](k);T[0](k),T=null}}),S}function ve(d){var f=this._observers;if(!f)return-1;for(var m=f.length,g=0;g<m;g++)if(f[g]._target===d)return g;return-1}function G(d,f,m,g,T){if(!m)return null;if(g===0){var b=typeof f;if(b==="string"){var w,S,k=0,D=0,P=this.delimiter,me=P.length;if((S=f.indexOf(P))!==-1){w=new Array(5);do w[k++]=f.slice(D,S),D=S+me;while((S=f.indexOf(P,D))!==-1);w[k++]=f.slice(D),f=w,T=k}else f=[f],T=1}else b==="object"?T=f.length:(f=[f],T=1)}var ae=null,te,Se,I,Ae,Ce,rt=f[g],_r=f[g+1],We,Le;if(g===T)m._listeners&&(typeof m._listeners=="function"?(d&&d.push(m._listeners),ae=[m]):(d&&d.push.apply(d,m._listeners),ae=[m]));else if(rt==="*"){for(We=l(m),S=We.length;S-- >0;)te=We[S],te!=="_listeners"&&(Le=G(d,f,m[te],g+1,T),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else if(rt==="**"){for(Ce=g+1===T||g+2===T&&_r==="*",Ce&&m._listeners&&(ae=G(d,f,m,T,T)),We=l(m),S=We.length;S-- >0;)te=We[S],te!=="_listeners"&&(te==="*"||te==="**"?(m[te]._listeners&&!Ce&&(Le=G(d,f,m[te],T,T),Le&&(ae?ae.push.apply(ae,Le):ae=Le)),Le=G(d,f,m[te],g,T)):te===_r?Le=G(d,f,m[te],g+2,T):Le=G(d,f,m[te],g,T),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else m[rt]&&(ae=G(d,f,m[rt],g+1,T));if(Se=m["*"],Se&&G(d,f,Se,g+1,T),I=m["**"],I)if(g<T)for(I._listeners&&G(d,f,I,T,T),We=l(I),S=We.length;S-- >0;)te=We[S],te!=="_listeners"&&(te===_r?G(d,f,I[te],g+2,T):te===rt?G(d,f,I[te],g+1,T):(Ae={},Ae[te]=I[te],G(d,f,{"**":Ae},g+1,T)));else I._listeners?G(d,f,I,T,T):I["*"]&&I["*"]._listeners&&G(d,f,I["*"],T,T);return ae}function V(d,f,m){var g=0,T=0,b,w=this.delimiter,S=w.length,k;if(typeof d=="string")if((b=d.indexOf(w))!==-1){k=new Array(5);do k[g++]=d.slice(T,b),T=b+S;while((b=d.indexOf(w,T))!==-1);k[g++]=d.slice(T)}else k=[d],g=1;else k=d,g=d.length;if(g>1){for(b=0;b+1<g;b++)if(k[b]==="**"&&k[b+1]==="**")return}var D=this.listenerTree,P;for(b=0;b<g;b++)if(P=k[b],D=D[P]||(D[P]={}),b===g-1)return D._listeners?(typeof D._listeners=="function"&&(D._listeners=[D._listeners]),m?D._listeners.unshift(f):D._listeners.push(f),!D._listeners.warned&&this._maxListeners>0&&D._listeners.length>this._maxListeners&&(D._listeners.warned=!0,h.call(this,D._listeners.length,P))):D._listeners=f,!0;return!0}function Pe(d,f,m,g){for(var T=l(d),b=T.length,w,S,k,D=d._listeners,P;b-- >0;)S=T[b],w=d[S],S==="_listeners"?k=m:k=m?m.concat(S):[S],P=g||typeof S=="symbol",D&&f.push(P?k:k.join(this.delimiter)),typeof w=="object"&&Pe.call(this,w,f,k,P);return f}function Fe(d){for(var f=l(d),m=f.length,g,T,b;m-- >0;)T=f[m],g=d[T],g&&(b=!0,T!=="_listeners"&&!Fe(g)&&delete d[T]);return b}function j(d,f,m){this.emitter=d,this.event=f,this.listener=m}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function A(d,f,m){if(m===!0)T=!0;else if(m===!1)g=!0;else{if(!m||typeof m!="object")throw TypeError("options should be an object or true");var g=m.async,T=m.promisify,b=m.nextTick,w=m.objectify}if(g||b||T){var S=f,k=f._origin||f;if(b&&!i)throw Error("process.nextTick is not supported");T===r&&(T=f.constructor.name==="AsyncFunction"),f=function(){var D=arguments,P=this,me=this.event;return T?b?Promise.resolve():new Promise(function(ae){u(ae)}).then(function(){return P.event=me,S.apply(P,D)}):(b?process.nextTick:u)(function(){P.event=me,S.apply(P,D)})},f._async=!0,f._origin=k}return[f,w?new j(this,d,f):this]}function E(d){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,d)}E.EventEmitter2=E,E.prototype.listenTo=function(d,f,m){if(typeof d!="object")throw TypeError("target musts be an object");var g=this;m=M(m,{on:r,off:r,reducers:r},{on:U,off:U,reducers:ie});function T(b){if(typeof b!="object")throw TypeError("events must be an object");var w=m.reducers,S=ve.call(g,d),k;S===-1?k=new O(g,d,m):k=g._observers[S];for(var D=l(b),P=D.length,me,ae=typeof w=="function",te=0;te<P;te++)me=D[te],k.subscribe(me,b[me]||me,ae?w:w&&w[me])}return t(f)?T(y(f)):T(typeof f=="string"?y(f.split(/\s+/)):f),this},E.prototype.stopListeningTo=function(d,f){var m=this._observers;if(!m)return!1;var g=m.length,T,b=!1;if(d&&typeof d!="object")throw TypeError("target should be an object");for(;g-- >0;)T=m[g],(!d||T._target===d)&&(T.unsubscribe(f),b=!0);return b},E.prototype.delimiter=".",E.prototype.setMaxListeners=function(d){d!==r&&(this._maxListeners=d,this._conf||(this._conf={}),this._conf.maxListeners=d)},E.prototype.getMaxListeners=function(){return this._maxListeners},E.prototype.event="",E.prototype.once=function(d,f,m){return this._once(d,f,!1,m)},E.prototype.prependOnceListener=function(d,f,m){return this._once(d,f,!0,m)},E.prototype._once=function(d,f,m,g){return this._many(d,1,f,m,g)},E.prototype.many=function(d,f,m,g){return this._many(d,f,m,!1,g)},E.prototype.prependMany=function(d,f,m,g){return this._many(d,f,m,!0,g)},E.prototype._many=function(d,f,m,g,T){var b=this;if(typeof m!="function")throw new Error("many only accepts instances of Function");function w(){return--f===0&&b.off(d,w),m.apply(this,arguments)}return w._origin=m,this._on(d,w,g,T)},E.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f,m=this.wildcard,g,T,b,w,S;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(m&&(f=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(T=d.length,s){for(b=0;b<T;b++)if(typeof d[b]=="symbol"){S=!0;break}}S||(d=d.join(this.delimiter))}var k=arguments.length,D;if(this._all&&this._all.length)for(D=this._all.slice(),b=0,T=D.length;b<T;b++)switch(this.event=d,k){case 1:D[b].call(this,d);break;case 2:D[b].call(this,d,arguments[1]);break;case 3:D[b].call(this,d,arguments[1],arguments[2]);break;default:D[b].apply(this,arguments)}if(m)D=[],G.call(this,D,f,this.listenerTree,0,T);else if(D=this._events[d],typeof D=="function"){switch(this.event=d,k){case 1:D.call(this);break;case 2:D.call(this,arguments[1]);break;case 3:D.call(this,arguments[1],arguments[2]);break;default:for(g=new Array(k-1),w=1;w<k;w++)g[w-1]=arguments[w];D.apply(this,g)}return!0}else D&&(D=D.slice());if(D&&D.length){if(k>3)for(g=new Array(k-1),w=1;w<k;w++)g[w-1]=arguments[w];for(b=0,T=D.length;b<T;b++)switch(this.event=d,k){case 1:D[b].call(this);break;case 2:D[b].call(this,arguments[1]);break;case 3:D[b].call(this,arguments[1],arguments[2]);break;default:D[b].apply(this,g)}return!0}else if(!this.ignoreErrors&&!this._all&&d==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},E.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f=this.wildcard,m,g,T,b,w,S;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(f&&(m=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(b=d.length,s){for(w=0;w<b;w++)if(typeof d[w]=="symbol"){g=!0;break}}g||(d=d.join(this.delimiter))}var k=[],D=arguments.length,P;if(this._all)for(w=0,b=this._all.length;w<b;w++)switch(this.event=d,D){case 1:k.push(this._all[w].call(this,d));break;case 2:k.push(this._all[w].call(this,d,arguments[1]));break;case 3:k.push(this._all[w].call(this,d,arguments[1],arguments[2]));break;default:k.push(this._all[w].apply(this,arguments))}if(f?(P=[],G.call(this,P,m,this.listenerTree,0)):P=this._events[d],typeof P=="function")switch(this.event=d,D){case 1:k.push(P.call(this));break;case 2:k.push(P.call(this,arguments[1]));break;case 3:k.push(P.call(this,arguments[1],arguments[2]));break;default:for(T=new Array(D-1),S=1;S<D;S++)T[S-1]=arguments[S];k.push(P.apply(this,T))}else if(P&&P.length){if(P=P.slice(),D>3)for(T=new Array(D-1),S=1;S<D;S++)T[S-1]=arguments[S];for(w=0,b=P.length;w<b;w++)switch(this.event=d,D){case 1:k.push(P[w].call(this));break;case 2:k.push(P[w].call(this,arguments[1]));break;case 3:k.push(P[w].call(this,arguments[1],arguments[2]));break;default:k.push(P[w].apply(this,T))}}else if(!this.ignoreErrors&&!this._all&&d==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(k)},E.prototype.on=function(d,f,m){return this._on(d,f,!1,m)},E.prototype.prependListener=function(d,f,m){return this._on(d,f,!0,m)},E.prototype.onAny=function(d){return this._onAny(d,!1)},E.prototype.prependAny=function(d){return this._onAny(d,!0)},E.prototype.addListener=E.prototype.on,E.prototype._onAny=function(d,f){if(typeof d!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),f?this._all.unshift(d):this._all.push(d),this},E.prototype._on=function(d,f,m,g){if(typeof d=="function")return this._onAny(d,f),this;if(typeof f!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var T=this,b;return g!==r&&(b=A.call(this,d,f,g),f=b[0],T=b[1]),this._newListener&&this.emit("newListener",d,f),this.wildcard?(V.call(this,d,f,m),T):(this._events[d]?(typeof this._events[d]=="function"&&(this._events[d]=[this._events[d]]),m?this._events[d].unshift(f):this._events[d].push(f),!this._events[d].warned&&this._maxListeners>0&&this._events[d].length>this._maxListeners&&(this._events[d].warned=!0,h.call(this,this._events[d].length,d))):this._events[d]=f,T)},E.prototype.off=function(d,f){if(typeof f!="function")throw new Error("removeListener only takes instances of Function");var m,g=[];if(this.wildcard){var T=typeof d=="string"?d.split(this.delimiter):d.slice();if(g=G.call(this,null,T,this.listenerTree,0),!g)return this}else{if(!this._events[d])return this;m=this._events[d],g.push({_listeners:m})}for(var b=0;b<g.length;b++){var w=g[b];if(m=w._listeners,t(m)){for(var S=-1,k=0,D=m.length;k<D;k++)if(m[k]===f||m[k].listener&&m[k].listener===f||m[k]._origin&&m[k]._origin===f){S=k;break}if(S<0)continue;return this.wildcard?w._listeners.splice(S,1):this._events[d].splice(S,1),m.length===0&&(this.wildcard?delete w._listeners:delete this._events[d]),this._removeListener&&this.emit("removeListener",d,f),this}else(m===f||m.listener&&m.listener===f||m._origin&&m._origin===f)&&(this.wildcard?delete w._listeners:delete this._events[d],this._removeListener&&this.emit("removeListener",d,f))}return this.listenerTree&&Fe(this.listenerTree),this},E.prototype.offAny=function(d){var f=0,m=0,g;if(d&&this._all&&this._all.length>0){for(g=this._all,f=0,m=g.length;f<m;f++)if(d===g[f])return g.splice(f,1),this._removeListener&&this.emit("removeListenerAny",d),this}else{if(g=this._all,this._removeListener)for(f=0,m=g.length;f<m;f++)this.emit("removeListenerAny",g[f]);this._all=[]}return this},E.prototype.removeListener=E.prototype.off,E.prototype.removeAllListeners=function(d){if(d===r)return!this._events||c.call(this),this;if(this.wildcard){var f=G.call(this,null,d,this.listenerTree,0),m,g;if(!f)return this;for(g=0;g<f.length;g++)m=f[g],m._listeners=null;this.listenerTree&&Fe(this.listenerTree)}else this._events&&(this._events[d]=null);return this},E.prototype.listeners=function(d){var f=this._events,m,g,T,b,w;if(d===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!f)return[];for(m=l(f),b=m.length,T=[];b-- >0;)g=f[m[b]],typeof g=="function"?T.push(g):T.push.apply(T,g);return T}else{if(this.wildcard){if(w=this.listenerTree,!w)return[];var S=[],k=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,S,k,w,0),S}return f?(g=f[d],g?typeof g=="function"?[g]:g:[]):[]}},E.prototype.eventNames=function(d){var f=this._events;return this.wildcard?Pe.call(this,this.listenerTree,[],null,d):f?l(f):[]},E.prototype.listenerCount=function(d){return this.listeners(d).length},E.prototype.hasListeners=function(d){if(this.wildcard){var f=[],m=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,f,m,this.listenerTree,0),f.length>0}var g=this._events,T=this._all;return!!(T&&T.length||g&&(d===r?l(g).length:g[d]))},E.prototype.listenersAny=function(){return this._all?this._all:[]},E.prototype.waitFor=function(d,f){var m=this,g=typeof f;return g==="number"?f={timeout:f}:g==="function"&&(f={filter:f}),f=M(f,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:U,Promise:$}),re(f.Promise,function(T,b,w){function S(){var k=f.filter;if(!(k&&!k.apply(m,arguments)))if(m.off(d,S),f.handleError){var D=arguments[0];D?b(D):T(v.apply(null,arguments).slice(1))}else T(v.apply(null,arguments))}w(function(){m.off(d,S)}),m._on(d,S,!1)},{timeout:f.timeout,overload:f.overload})};function B(d,f,m){m=M(m,{Promise,timeout:0,overload:!1},{Promise:$});var g=m.Promise;return re(g,function(T,b,w){var S;if(typeof d.addEventListener=="function"){S=function(){T(v.apply(null,arguments))},w(function(){d.removeEventListener(f,S)}),d.addEventListener(f,S,{once:!0});return}var k=function(){D&&d.removeListener("error",D),T(v.apply(null,arguments))},D;f!=="error"&&(D=function(P){d.removeListener(f,k),b(P)},d.once("error",D)),w(function(){D&&d.removeListener("error",D),d.removeListener(f,k)}),d.once(f,k)},{timeout:m.timeout,overload:m.overload})}var C=E.prototype;if(Object.defineProperties(E,{defaultMaxListeners:{get:function(){return C._maxListeners},set:function(d){if(typeof d!="number"||d<0||Number.isNaN(d))throw TypeError("n must be a non-negative number");C._maxListeners=d},enumerable:!0},once:{value:B,writable:!0,configurable:!0}}),Object.defineProperties(C,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return E});else if(typeof xT=="object")AT.exports=E;else{var X=new Function("","return this")();X.EventEmitter2=E}})()});var Tr=_(on=>{"use strict";on.__esModule=!0;var $x;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})($x=on.Operators||(on.Operators={}));var jx;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(jx=on.StructuralCharacters||(on.StructuralCharacters={}));var Gx;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(Gx=on.Tokens||(on.Tokens={}))});var qf=_(Vo=>{"use strict";Vo.__esModule=!0;var Ie=Tr();Vo.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Vo.VALID_TOKENS={identifierOnly:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.NOT}],binaryOperator:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR}],binaryOperatorOrClose:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Yf=_(Fr=>{"use strict";Fr.__esModule=!0;var ki=Tr();Fr.STRUCTURAL_CHARACTERS={"(":ki.StructuralCharacters.OPEN_PARENTHESIS,")":ki.StructuralCharacters.CLOSE_PARENTHESIS};Fr.OPERATORS={AND:ki.Operators.AND,OR:ki.Operators.OR,XOR:ki.Operators.XOR,NOT:ki.Operators.NOT};Fr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Fr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Fr.COMMENT_DELIMITER=String.fromCodePoint(35);Fr.EOL=String.fromCodePoint(10);Fr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var m_=_(Lr=>{"use strict";var $f=Lr&&Lr.__assign||function(){return $f=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},$f.apply(this,arguments)};Lr.__esModule=!0;var p_=Tr(),Fn=Yf();Lr.createResult=function(r,e,t){return{token:$f({name:r},e!==null?{value:e}:{}),remainingString:t}};Lr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Fn.EOL){e=t;break}}return Lr.createResult(p_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Lr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Fn.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Fn.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Fn.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Fn.SEPARATORS.has(s)&&!Fn.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Fn.QUOTED_IDENTIFIER_DELIMITER+" character");return Lr.createResult(p_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var h_=_(jf=>{"use strict";jf.__esModule=!0;var Oi=Tr(),Nt=Yf(),Di=m_();jf.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!Nt.SEPARATORS.has(s)){var a=Nt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Oi.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!Nt.SEPARATORS.has(o)&&o!==Oi.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Di.createResult(Oi.Tokens.STRUCTURAL_CHARACTER,Nt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===Nt.QUOTED_IDENTIFIER_DELIMITER)return Di.getQuotedIdentifier(r.slice(i+1));if(s===Nt.COMMENT_DELIMITER)return Di.getComment(r.slice(i+1));e=i}}else if(Nt.SEPARATORS.has(s)||Nt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===Nt.QUOTED_IDENTIFIER_DELIMITER||s===Nt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(Nt.OPERATORS[u]){if(n&&!Nt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Di.createResult(Oi.Tokens.OPERATOR,Nt.OPERATORS[u],l)}else return Di.createResult(Oi.Tokens.IDENTIFIER,u,l)}return Di.createResult(Oi.Tokens.EOF,null,"")}});var g_=_(Ur=>{"use strict";var Bx=Ur&&Ur.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Ur.__esModule=!0;var Hx=h_(),Si=Tr(),Qo=qf();Ur.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=Hx.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Si.Tokens.COMMENT)return Ur.validateToken(s,t,n),s}}};Ur.getValue=function(r,e){var t=r(Qo.VALID_TOKENS.identifierOrNot),n=t.value===Si.Operators.NOT;n&&(t=r(Qo.VALID_TOKENS.identifierOnly));var i=t.name===Si.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Bx(i,[{name:Si.Tokens.OPERATOR,value:Si.Operators.NOT}]):i};Ur.previousOperatorTakesPrecedent=function(r,e){return Qo.OPERATOR_PRECEDENCE[r]<=Qo.OPERATOR_PRECEDENCE[e]};Ur.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Si.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Bf=_(ia=>{"use strict";var Ri=ia&&ia.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ia.__esModule=!0;var y_=Tr(),T_=qf(),Xo=g_();ia.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Xo.newTokenGenerator(r);return Gf(e)};var Gf=function(r,e){e===void 0&&(e=!1);for(var t=Ri(Xo.getValue(r,Gf)),n=[];;){var i=e?T_.VALID_TOKENS.binaryOperatorOrClose:T_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===y_.Tokens.EOF||s.name===y_.Tokens.STRUCTURAL_CHARACTER)return Ri(t,Ri(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Xo.previousOperatorTakesPrecedent(a.value,s.value))t=Ri(t,[a]),n=n.slice(0,-1);else break}n=Ri(n,[s]),t=Ri(t,Xo.getValue(r,Gf))}}});var Hf=_(Wr=>{"use strict";Wr.__esModule=!0;var __=Tr();Wr.andUtil=function(r,e){return r&&e};Wr.orUtil=function(r,e){return r||e};Wr.xorUtil=function(r,e){return r!==e};Wr.notUtil=function(r){return!r};Wr.isIdentifier=function(r){var e=r.name,t=r.value;return e===__.Tokens.IDENTIFIER&&typeof t=="string"};Wr.isOperator=function(r){var e=r.name,t=r.value;return e===__.Tokens.OPERATOR&&typeof t=="string"};Wr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var b_=_(Vf=>{"use strict";var sa;Vf.__esModule=!0;var zf=Tr(),Kf=Hf();Vf.OPERATOR_MAP=(sa={},sa[zf.Operators.AND]=Kf.andUtil,sa[zf.Operators.OR]=Kf.orUtil,sa[zf.Operators.XOR]=Kf.xorUtil,sa)});var E_=_(Un=>{"use strict";var Qf=Un&&Un.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Un.__esModule=!0;var zx=Bf(),v_=Tr(),Kx=b_(),Ln=Hf();Un.getEvaluator=function(r){var e=zx.parse(r);return function(t){return Un.evaluate(e,t)}};Un.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Ln.isIdentifier(i)||Ln.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===v_.Tokens.IDENTIFIER)return Qf(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===v_.Operators.NOT)return o===void 0&&Ln.throwInvalidExpression("missing identifier"),Qf(n.slice(0,-1),[Ln.notUtil(o)]);(o===void 0||a===void 0)&&Ln.throwInvalidExpression("missing identifier");var u=Kx.OPERATOR_MAP[i.value];return u||Ln.throwInvalidExpression("unknown operator"),Qf(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Ln.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var k_=_(aa=>{"use strict";aa.__esModule=!0;var w_=E_();aa.getEvaluator=w_.getEvaluator;aa.evaluate=w_.evaluate;var Vx=Bf();aa.parse=Vx.parse});var tA={};Q_(tA,{default:()=>lu});module.exports=X_(tA);var $_=require("obsidian");var fi=require("obsidian");var nA=new Error("timeout while waiting for mutex to become available"),iA=new Error("mutex already locked"),Z_=new Error("request for lock canceled"),J_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},pu=class{constructor(e,t=Z_){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return J_(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},eb=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Ta=class{constructor(e){this._semaphore=new pu(1,e)}acquire(){return eb(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var co=ya(Be());var Tt=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new Tt(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new Tt(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var xt=class{static parseDate(e,t=!1){return window.moment(co.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[xt.parseRelativeDateRange,xt.parseNumberedDateRange,xt.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return Tt.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=co.parse(e,void 0,{forwardDate:t});if(n.length===0)return Tt.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new Tt(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=Tt.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return Tt.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new Tt(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return Tt.buildInvalid()}};var TM={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function ui(r){for(let[e,t]of Object.entries(TM))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var fo=["MO","TU","WE","TH","FR","SA","SU"],je=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(fo.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=fo[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Me=function(r){return r!=null},At=function(r){return typeof r=="number"},nf=function(r){return typeof r=="string"&&fo.includes(r)},at=Array.isArray,Bt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var le=function(r,e){var t=0,n=[];if(at(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Hy=function(r){return at(r)?r:[r]};function vn(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=le(t,e/t.length)),t.slice(0,e)+String(n))}var zy=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},lt=function(r,e){var t=r%e;return t*e<0?t+e:t},po=function(r,e){return{div:Math.floor(r/e),mod:lt(r,e)}},Ct=function(r){return!Me(r)||r.length===0},Ue=function(r){return!Ct(r)},de=function(r,e){return Ue(r)&&r.indexOf(e)!==-1};var Qr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[vn(n.getUTCFullYear().toString(),4,"0"),vn(n.getUTCMonth()+1,2,"0"),vn(n.getUTCDate(),2,"0"),"T",vn(n.getUTCHours(),2,"0"),vn(n.getUTCMinutes(),2,"0"),vn(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(Qr||(Qr={}));var z=Qr;var _M=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Mr=_M;var sf=function(r,e){return sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},sf(r,e)};function li(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ot.apply(this,arguments)};function x(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var bM=function(r){li(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Mr),af=bM;var vM={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},En=vM;var Ky=function(r,e){return r.indexOf(e)!==-1},EM=function(r){return r.toString()},wM=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},kM=function(){function r(e,t,n,i){if(t===void 0&&(t=EM),n===void 0&&(n=En),i===void 0&&(i=wM),this.text=[],this.language=n||En,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,p){return c-p}),a.sort(function(c,p){return p-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Me(this.origOptions.byweekday)){var o=at(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,p){return c.weekday-p.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Ky(["dtstart","wkst","freq"],n))return!0;if(!Ky(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[W.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=At(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),at(e)||(e=[e]);var a=function(u,l,c){for(var p="",h=0;h<u.length;h++)h!==0&&(h===u.length-1?p+=" "+c+" ":p+=l+" "),p+=u[h];return p};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),fr=kM;var OM=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Us(r,e){e===void 0&&(e=En);var t={},n=new OM(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var h=n.acceptNumber();if(h&&(t.interval=parseInt(h[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=W.DAILY,n.nextSymbol()&&(a(),p());break;case"weekday(s)":t.freq=W.WEEKLY,t.byweekday=[W.MO,W.TU,W.WE,W.TH,W.FR],n.nextSymbol(),p();break;case"week(s)":t.freq=W.WEEKLY,n.nextSymbol()&&(s(),p());break;case"hour(s)":t.freq=W.HOURLY,n.nextSymbol()&&(s(),p());break;case"minute(s)":t.freq=W.MINUTELY,n.nextSymbol()&&(s(),p());break;case"month(s)":t.freq=W.MONTHLY,n.nextSymbol()&&(s(),p());break;case"year(s)":t.freq=W.YEARLY,n.nextSymbol()&&(s(),p());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=W.WEEKLY;var v=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[W[v]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(W[y]),n.nextSymbol()}c(),p();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=W.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var O=o();if(!O)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(O),n.nextSymbol()}s(),p();break;default:throw new Error("Unknown symbol")}}function s(){var h=n.accept("on"),v=n.accept("the");if(!!(h||v))do{var y=l(),O=u(),M=o();if(y)O?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(W[O].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(O)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(W[O]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[W.MO,W.TU,W.WE,W.TH,W.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var $=n.acceptNumber();if(!$)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt($[0],10)];n.accept("comma");){if($=n.acceptNumber(),!$)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt($[0],10))}}else if(M)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(M);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var h=n.accept("at");if(!!h)do{var v=n.acceptNumber();if(!v)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(v[0],10)];n.accept("comma");){if(v=n.acceptNumber(),!v)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(v[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var h=parseInt(n.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return n.nextSymbol(),n.accept("last")?-h:h;default:return!1}}function c(){n.accept("on"),n.accept("the");var h=l();if(!!h)for(t.bymonthday=[h],n.nextSymbol();n.accept("comma");){if(h=l(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(h),n.nextSymbol()}}function p(){if(n.symbol==="until"){var h=Date.parse(n.text);if(!h)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(h)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var oe;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(oe||(oe={}));function Ws(r){return r<oe.HOURLY}var Vy=function(r,e){return e===void 0&&(e=En),new W(Us(r,e)||void 0)},ci=["count","until","interval","byweekday","bymonthday","bymonth"];fr.IMPLEMENTED=[];fr.IMPLEMENTED[oe.HOURLY]=ci;fr.IMPLEMENTED[oe.MINUTELY]=ci;fr.IMPLEMENTED[oe.DAILY]=["byhour"].concat(ci);fr.IMPLEMENTED[oe.WEEKLY]=ci;fr.IMPLEMENTED[oe.MONTHLY]=ci;fr.IMPLEMENTED[oe.YEARLY]=["byweekno","byyearday"].concat(ci);var Qy=function(r,e,t,n){return new fr(r,e,t,n).toString()},Xy=fr.isFullyConvertible;var di=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Zy=function(r){li(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Qr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=lt(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=po(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Ct(i)||de(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=po(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Ct(i)||de(i,this.hour))&&(Ct(s)||de(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=po(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Ct(i)||de(i,this.hour))&&(Ct(s)||de(s,this.minute))&&(Ct(a)||de(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Qr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Qr.MAXYEAR))return;t=Qr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case oe.YEARLY:return this.addYears(s);case oe.MONTHLY:return this.addMonths(s);case oe.WEEKLY:return this.addWeekly(s,a);case oe.DAILY:return this.addDaily(s);case oe.HOURLY:return this.addHours(s,n,o);case oe.MINUTELY:return this.addMinutes(s,n,o,u);case oe.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(di);function of(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];de(tT,s)||e.push(s),z.isDate(r[s])&&!z.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return ot({},r)}function Jy(r){var e=ot(ot({},qs),of(r));if(Me(e.byeaster)&&(e.freq=W.YEARLY),!(Me(e.freq)&&W.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Me(e.wkst)?At(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=W.MO.weekday,Me(e.bysetpos)){At(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Ue(e.byweekno)||Ue(e.byyearday)||Boolean(e.bymonthday)||Ue(e.bymonthday)||Me(e.byweekday)||Me(e.byeaster)))switch(e.freq){case W.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case W.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case W.WEEKLY:e.byweekday=[z.getWeekday(e.dtstart)];break}if(Me(e.bymonth)&&!at(e.bymonth)&&(e.bymonth=[e.bymonth]),Me(e.byyearday)&&!at(e.byyearday)&&At(e.byyearday)&&(e.byyearday=[e.byyearday]),!Me(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(at(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Me(e.byweekno)&&!at(e.byweekno)&&(e.byweekno=[e.byweekno]),!Me(e.byweekday))e.bynweekday=null;else if(At(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(nf(e.byweekday))e.byweekday=[je.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof je)!e.byweekday.n||e.freq>W.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(At(u)){a.push(u);continue}else if(nf(u)){a.push(je.fromStr(u).weekday);continue}!u.n||e.freq>W.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Ue(a)?a:null,e.bynweekday=Ue(o)?o:null}return Me(e.byhour)?At(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<W.HOURLY?[e.dtstart.getUTCHours()]:null,Me(e.byminute)?At(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<W.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Me(e.bysecond)?At(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<W.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function eT(r){var e=r.dtstart.getTime()%1e3;if(!Ws(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new di(n,i,s,e))})})}),t}function $s(r){var e=r.split(`
`).map(DM).filter(function(t){return t!==null});return ot(ot({},e[0]),e[1])}function Ys(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=z.untilStringToDate(i),e}function DM(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return rT(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return rT(r);case"DTSTART":return Ys(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function rT(r){var e=r.replace(/^RRULE:/i,""),t=Ys(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=oe[o.toUpperCase()];break;case"WKST":t.wkst=Ht[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=SM(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=RM(o);break;case"DTSTART":case"TZID":var c=Ys(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=z.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function SM(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(nT)}return nT(r)}function nT(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function RM(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return Ht[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=Ht[s].weekday;return new je(a,i)})}var wn=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=z.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function js(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(qs),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!de(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Me(o)||at(o)&&!o.length)){switch(a){case"FREQ":u=W.FREQUENCIES[r.freq];break;case"WKST":At(o)?u=new je(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=Hy(o).map(function(v){return v instanceof je?v:at(v)?new je(v[0],v[1]):new je(v)}).toString();break;case"DTSTART":t=MM(o,r.tzid);break;case"UNTIL":u=z.timeToUntilString(o,!r.tzid);break;default:if(at(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var p=e.map(function(v){var y=v[0],O=v[1];return"".concat(y,"=").concat(O.toString())}).join(";"),h="";return p!==""&&(h="RRULE:".concat(p)),[t,h].filter(function(v){return!!v}).join(`
`)}function MM(r,e){return r?"DTSTART"+new wn(new Date(r),e).toString():""}function xM(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var iT=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?z.clone(t):z.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var p=0;p<i.length;p++){var h=i[p];if(!xM(t[h],c[h]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(at(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Mr(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return at(n)?z.cloneDates(n):n instanceof Date?z.clone(n):n},r}();var sT=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,28),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),aT=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,29),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),AM=Bt(1,29),CM=Bt(1,30),Xr=Bt(1,31),ct=Bt(1,32),oT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),CM,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct.slice(0,7),!0),uT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),AM,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct.slice(0,7),!0),PM=Bt(-28,0),NM=Bt(-29,0),Zr=Bt(-30,0),dt=Bt(-31,0),lT=x(x(x(x(x(x(x(x(x(x(x(x(x([],dt,!0),NM,!0),dt,!0),Zr,!0),dt,!0),Zr,!0),dt,!0),dt,!0),Zr,!0),dt,!0),Zr,!0),dt,!0),dt.slice(0,7),!0),cT=x(x(x(x(x(x(x(x(x(x(x(x(x([],dt,!0),PM,!0),dt,!0),Zr,!0),dt,!0),Zr,!0),dt,!0),dt,!0),Zr,!0),dt,!0),Zr,!0),dt,!0),dt.slice(0,7),!0),dT=[0,31,60,91,121,152,182,213,244,274,305,335,366],fT=[0,31,59,90,120,151,181,212,243,273,304,334,365],uf=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Bt(7));return r}();function pT(r,e){var t=new Date(Date.UTC(r,0,1)),n=z.isLeapYear(r)?366:365,i=z.isLeapYear(r+1)?366:365,s=z.toOrdinal(t),a=z.getWeekday(t),o=ot(ot({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},IM(r)),{wnomask:null});if(Ct(e.byweekno))return o;o.wnomask=le(0,n+7);var u,l,c=u=lt(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+lt(a-e.wkst,7)):l=n-c;for(var p=Math.floor(l/7),h=lt(l,7),v=Math.floor(p+h/4),y=0;y<e.byweekno.length;y++){var O=e.byweekno[y];if(O<0&&(O+=v+1),O>0&&O<=v){var M=void 0;O>1?(M=c+(O-1)*7,c!==u&&(M-=7-u)):M=c;for(var $=0;$<7&&(o.wnomask[M]=1,M++,o.wdaymask[M]!==e.wkst);$++);}}if(de(e.byweekno,1)){var M=c+v*7;if(c!==u&&(M-=7-u),M<n)for(var y=0;y<7&&(o.wnomask[M]=1,M+=1,o.wdaymask[M]!==e.wkst);y++);}if(c){var q=void 0;if(de(e.byweekno,-1))q=-1;else{var U=z.getWeekday(new Date(Date.UTC(r-1,0,1))),ie=lt(7-U.valueOf()+e.wkst,7),re=z.isLeapYear(r-1)?366:365,ve=void 0;ie>=4?(ie=0,ve=re+lt(U-e.wkst,7)):ve=n-c,q=Math.floor(52+lt(ve,7)/4)}if(de(e.byweekno,q))for(var M=0;M<c;M++)o.wnomask[M]=1}return o}function IM(r){var e=z.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=z.getWeekday(t);return e===365?{mmask:sT,mdaymask:uT,nmdaymask:cT,wdaymask:uf.slice(n),mrange:fT}:{mmask:aT,mdaymask:oT,nmdaymask:lT,wdaymask:uf.slice(n),mrange:dT}}function mT(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===W.YEARLY)if(Ct(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===W.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Ct(o))return a;a.nwdaymask=le(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],p=l[1]-1,h=0;h<s.bynweekday.length;h++){var v=void 0,y=s.bynweekday[h],O=y[0],M=y[1];M<0?(v=p+(M+1)*7,v-=lt(i[v]-O,7)):(v=c+(M-1)*7,v+=lt(7-i[v]+O,7)),c<=v&&v<=p&&(a.nwdaymask[v]=1)}return a}function hT(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),p=i%4,h=Math.floor(32+2*a+2*c-l-p)%7,v=Math.floor((t+11*l+22*h)/451),y=Math.floor((l+h-7*v+114)/31),O=(l+h-7*v+114)%31+1,M=Date.UTC(r,y-1,O+e),$=Date.UTC(r,0,1);return[Math.ceil((M-$)/(1e3*60*60*24))]}var FM=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=pT(e,n)),Ue(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=mT(e,t,s,a,o,n)}Me(n.byeaster)&&(this.eastermask=hT(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Bt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=le(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=le(null,this.yearlen+7),s=z.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=le(null,this.yearlen),s=z.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),z.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new di(e,t,a,i)});return z.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new di(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case oe.YEARLY:return this.ydayset.bind(this);case oe.MONTHLY:return this.mdayset.bind(this);case oe.WEEKLY:return this.wdayset.bind(this);case oe.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case oe.HOURLY:return this.htimeset.bind(this);case oe.MINUTELY:return this.mtimeset.bind(this);case oe.SECONDLY:return this.stimeset.bind(this)}},r}(),gT=FM;function yT(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=lt(c,e.length)):(u=Math.floor((c-1)/e.length),l=lt(c-1,e.length));for(var p=[],h=t;h<n;h++){var v=s[h];!Me(v)||p.push(v)}var y=void 0;u<0?y=p.slice(u)[0]:y=p[u];var O=e[l],M=z.fromOrdinal(i.yearordinal+y),$=z.combine(M,O);de(a,$)||a.push($)}return z.sort(a),a}function mo(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return xr(r);var u=Zy.fromDate(t),l=new gT(e);l.rebuild(u.year,u.month);for(var c=WM(l,u,e);;){var p=l.getdayset(n)(u.year,u.month,u.day),h=p[0],v=p[1],y=p[2],O=UM(h,v,y,l,e);if(Ue(a))for(var M=yT(a,c,v,y,l,h),$=0;$<M.length;$++){var q=M[$];if(s&&q>s)return xr(r);if(q>=t){var U=TT(q,e);if(!r.accept(U)||o&&(--o,!o))return xr(r)}}else for(var $=v;$<y;$++){var ie=h[$];if(!!Me(ie))for(var re=z.fromOrdinal(l.yearordinal+ie),ve=0;ve<c.length;ve++){var G=c[ve],q=z.combine(re,G);if(s&&q>s)return xr(r);if(q>=t){var U=TT(q,e);if(!r.accept(U)||o&&(--o,!o))return xr(r)}}}if(e.interval===0||(u.add(e,O),u.year>z.MAXYEAR))return xr(r);Ws(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function LM(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Ue(n)&&!de(n,r.mmask[e])||Ue(i)&&!r.wnomask[e]||Ue(s)&&!de(s,r.wdaymask[e])||Ue(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!de(r.eastermask,e)||(Ue(o)||Ue(u))&&!de(o,r.mdaymask[e])&&!de(u,r.nmdaymask[e])||Ue(l)&&(e<r.yearlen&&!de(l,e+1)&&!de(l,-r.yearlen+e)||e>=r.yearlen&&!de(l,e+1-r.yearlen)&&!de(l,-r.nextyearlen+e-r.yearlen))}function TT(r,e){return new wn(r,e.tzid).rezonedDate()}function xr(r){return r.getValue()}function UM(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=LM(n,o,i),s&&(r[o]=null)}return s}function WM(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Ws(n)?eT(t):n>=W.HOURLY&&Ue(i)&&!de(i,e.hour)||n>=W.MINUTELY&&Ue(s)&&!de(s,e.minute)||n>=W.SECONDLY&&Ue(a)&&!de(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var Ht={MO:new je(0),TU:new je(1),WE:new je(2),TH:new je(3),FR:new je(4),SA:new je(5),SU:new je(6)},qs={freq:oe.YEARLY,dtstart:null,interval:1,wkst:Ht.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},tT=Object.keys(qs),W=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new iT,this.origOptions=of(e);var n=Jy(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Us(e,t)},r.fromText=function(e,t){return Vy(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return mo(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new af("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Mr("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!z.isValidDate(e)||!z.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new af("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Mr("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!z.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Mr("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!z.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Mr("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return js(this.origOptions)},r.prototype.toText=function(e,t,n){return Qy(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Xy(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=oe.YEARLY,r.MONTHLY=oe.MONTHLY,r.WEEKLY=oe.WEEKLY,r.DAILY=oe.DAILY,r.HOURLY=oe.HOURLY,r.MINUTELY=oe.MINUTELY,r.SECONDLY=oe.SECONDLY,r.MO=Ht.MO,r.TU=Ht.TU,r.WE=Ht.WE,r.TH=Ht.TH,r.FR=Ht.FR,r.SA=Ht.SA,r.SU=Ht.SU,r.parseString=$s,r.optionsToString=js,r}();function _T(r,e,t,n,i,s){var a={},o=r.accept;function u(h,v){t.forEach(function(y){y.between(h,v,!0).forEach(function(O){a[Number(O)]=!0})})}i.forEach(function(h){var v=new wn(h,s).rezonedDate();a[Number(v)]=!0}),r.accept=function(h){var v=Number(h);return isNaN(v)?o.call(this,h):!a[v]&&(u(new Date(v-1),new Date(v+1)),!a[v])?(a[v]=!0,o.call(this,h)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(h){var v=Number(h);return a[v]?!0:(a[v]=!0,o.call(this,h))});for(var l=0;l<n.length;l++){var c=new wn(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(h){mo(r,h.options)});var p=r._result;switch(z.sort(p),r.method){case"all":case"between":return p;case"before":return p.length&&p[p.length-1]||null;case"after":default:return p.length&&p[0]||null}}var bT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function qM(r,e){var t=[],n=[],i=[],s=[],a=Ys(r),o=a.dtstart,u=a.tzid,l=BM(r,e.unfold);return l.forEach(function(c){var p;if(!!c){var h=GM(c),v=h.name,y=h.parms,O=h.value;switch(v.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push($s(c));break;case"RDATE":var M=(p=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&p!==void 0?p:[],$=M[1];$&&!u&&(u=$),n=n.concat(vT(O,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push($s(O));break;case"EXDATE":s=s.concat(vT(O,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+v)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function YM(r,e){var t=qM(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new cf(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(h){c.rrule(new W(lf(h,o,u),l))}),i.forEach(function(h){c.rdate(h)}),s.forEach(function(h){c.exrule(new W(lf(h,o,u),l))}),a.forEach(function(h){c.exdate(h)}),e.compatible&&e.dtstart&&c.rdate(o),c}var p=n[0]||{};return new W(lf(p,p.dtstart||e.dtstart||o,p.tzid||e.tzid||u),l)}function ho(r,e){return e===void 0&&(e={}),YM(r,$M(e))}function lf(r,e,t){return ot(ot({},r),{dtstart:e,tzid:t})}function $M(r){var e=[],t=Object.keys(r),n=Object.keys(bT);if(t.forEach(function(i){de(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return ot(ot({},bT),r)}function jM(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=zy(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function GM(r){var e=jM(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function BM(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function HM(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function vT(r,e){return HM(e),r.split(",").map(function(t){return z.untilStringToDate(t)})}function ET(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var cf=function(r){li(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=ET.apply(n,["dtstart"]),n.tzid=ET.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return _T(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){wT(t,this._rrule)},e.prototype.exrule=function(t){wT(t,this._exrule)},e.prototype.rdate=function(t){kT(t,this._rdate)},e.prototype.exdate=function(t){kT(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ho(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ho(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(js({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(OT("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(OT("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(W);function wT(r,e){if(!(r instanceof W))throw new TypeError(String(r)+" is not RRule instance");de(e.map(String),String(r))||e.push(r)}function kT(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");de(e.map(Number),Number(r))||(e.push(r),z.sort(e))}function OT(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return z.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function Ar(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var et=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=W.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new W(u);return new et({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){let e=this.nextReferenceDate();if(e!==null){let t=null,n=null,i=null;if(this.referenceDate){if(this.startDate){let s=window.moment.duration(this.startDate.diff(this.referenceDate));t=window.moment(e),t.add(Math.round(s.asDays()),"days")}if(this.scheduledDate){let s=window.moment.duration(this.scheduledDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(s.asDays()),"days")}if(this.dueDate){let s=window.moment.duration(this.dueDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(s.asDays()),"days")}}return{startDate:t,scheduledDate:n,dueDate:i}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ar(this.startDate,e.startDate)!==0||Ar(this.scheduledDate,e.scheduledDate)!==0||Ar(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(){if(this.baseOnToday){let e=window.moment();return this.nextReferenceDateFromToday(e).toDate()}else return this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new W(Dt(he({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=et.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=et.nextAfterYears(e,n,t,a[1])),et.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyMonths(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyYears(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new W(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var df=5;function ff(r,e){let t=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(n,i,s)=>{let a=[];return a=a.concat(KM(n,i,s,t,e)),a=a.concat(VM(n,i,s,r.recurrenceSymbol)),a=a.concat(zM(n,i,s,r)),a.length>0&&!a.some(o=>o.suggestionType==="match")&&a.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),a=a.slice(0,s.autoSuggestMaxItems),a}}function zM(r,e,t,n){let i=u=>Object.values(n.prioritySymbols).some(l=>l.length>0&&u.includes(l)),s=[];if(r.includes(n.dueDateSymbol)||s.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||s.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||s.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),i(r)||(s.push({displayText:`${n.prioritySymbols.High} high priority`,appendText:`${n.prioritySymbols.High} `}),s.push({displayText:`${n.prioritySymbols.Medium} medium priority`,appendText:`${n.prioritySymbols.Medium} `}),s.push({displayText:`${n.prioritySymbols.Low} low priority`,appendText:`${n.prioritySymbols.Low} `}),s.push({displayText:`${n.prioritySymbols.Highest} highest priority`,appendText:`${n.prioritySymbols.Highest} `}),s.push({displayText:`${n.prioritySymbols.Lowest} lowest priority`,appendText:`${n.prioritySymbols.Lowest} `})),r.includes(n.recurrenceSymbol)||s.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let l=xt.parseDate("today",!0).format(H.dateFormat);s.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${l})`,appendText:`${n.createdDateSymbol} ${l} `})}let a=pf(r,/([a-zA-Z'_-]*)/g,e),o=[];if(a&&a.length>0){let u=a[0];if(u.length>=Math.max(1,t.autoSuggestMinMatch)){let l=s.filter(c=>(c.textToMatch||c.displayText).toLowerCase().includes(u.toLowerCase()));for(let c of l)o.push({suggestionType:"match",displayText:c.displayText,appendText:c.appendText,insertAt:a.index,insertSkip:u.length})}}return o.length===0&&t.autoSuggestMinMatch===0?s:o}function KM(r,e,t,n,i){let s=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],a=[],o=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),u=pf(r,o,e);if(u&&u.length>=2){let l=u[1],c=u[2];if(c.length<t.autoSuggestMinMatch)return[];let p=c&&c.length>1?xt.parseDate(ui(c),!0):null;p&&p.isValid()&&a.push({displayText:`${p.format(H.dateFormat)}`,appendText:`${l} #${p.format(H.dateFormat)} `,insertAt:u.index,insertSkip:u[0].length});let h=1,v=s.filter(y=>c&&c.length>=h&&y.toLowerCase().includes(c.toLowerCase())).slice(0,i);v.length===0&&(v=s.slice(0,i));for(let y of v){let M=`${xt.parseDate(y,!0).format(H.dateFormat)}`;a.push({suggestionType:"match",displayText:`${y} (${M})`,appendText:`${l} ${M} `,insertAt:u.index,insertSkip:u[0].length})}}return a}function VM(r,e,t,n){var u;let i=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],s=[],a=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),o=pf(r,a,e);if(o&&o.length>=2){let l=o[1],c=o[2];if(c.length<t.autoSuggestMinMatch)return[];if(c.length>0){let y=(u=et.fromText({recurrenceRuleText:c,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:u.toText();if(y){let O=`${l} ${y} `;if(s.push({suggestionType:"match",displayText:`\u2705 ${y}`,appendText:O,insertAt:o.index,insertSkip:o[0].length}),o[0]==O)return[]}}let p=1,h=t.autoSuggestMaxItems/2,v=i.filter(y=>c&&c.length>=p&&y.toLowerCase().includes(c.toLowerCase())).slice(0,h);v.length===0&&c.trim().length===0&&(v=i.slice(0,h));for(let y of v)s.push({suggestionType:"match",displayText:`${y}`,appendText:`${l} ${y} `,insertAt:o.index,insertSkip:o[0].length})}return s}function pf(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i}function QM(r,e){if(e.length===0)return!1;let t=Object.fromEntries(e.map(([i,s])=>[i,0])),n=Object.fromEntries(e.map(([i,s])=>[s,i]));for(let i of r)i in t?t[i]++:i in n&&(t[n[i]]=Math.max(0,t[n[i]]-1));return Object.values(t).some(i=>i>0)}function DT(r,e){return(t,n,i)=>QM(t.slice(0,n),e)?r(t,n,i):[]}var Gs=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideCreatedDate=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.hideTags=!1;this.shortMode=!1;this.explainQuery=!1}},Jr=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","createdDate","startDate","scheduledDate","dueDate","doneDate","blockLink"];this.hiddenTaskLayoutComponents=[];this.taskListClasses=[];e?this.options=e:this.options=new Gs,t?this.shownTaskLayoutComponents=t:this.shownTaskLayoutComponents=this.defaultLayout,this.shownTaskLayoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(s,a,o)=>a?(this.taskListClasses.push(`tasks-layout-hide-${o}`),this.hiddenTaskLayoutComponents.push(o),s.filter(u=>u!=o)):s,n=(s,a)=>{s&&this.taskListClasses.push(`tasks-layout-hide-${a}`)},i=this.shownTaskLayoutComponents;return i=t(i,e.hidePriority,"priority"),i=t(i,e.hideRecurrenceRule,"recurrenceRule"),i=t(i,e.hideCreatedDate,"createdDate"),i=t(i,e.hideStartDate,"startDate"),i=t(i,e.hideScheduledDate,"scheduledDate"),i=t(i,e.hideDueDate,"dueDate"),i=t(i,e.hideDoneDate,"doneDate"),n(e.hideTags,"tags"),n(e.hideUrgency,"urgency"),n(e.hideBacklinks,"backlinks"),n(e.hideEditButton,"edit-button"),e.shortMode&&this.taskListClasses.push("tasks-layout-short-mode"),i}};var mf={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",recurrenceSymbol:"\u{1F501}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓]\s#*(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu}},kn=class{constructor(e){this.symbols=e}serialize(e){let t=new Jr,n="";for(let i of t.shownTaskLayoutComponents)n+=this.componentToString(e,t,i);return n}componentToString(e,t,n){var p;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,recurrenceSymbol:l,dueDateSymbol:c}=this.symbols;switch(n){case"description":return e.description;case"priority":{let h="";return e.priority==="0"?h=" "+i.Highest:e.priority==="1"?h=" "+i.High:e.priority==="2"?h=" "+i.Medium:e.priority==="4"?h=" "+i.Low:e.priority==="5"&&(h=" "+i.Lowest),h}case"startDate":return e.startDate?t.options.shortMode?" "+s:` ${s} ${e.startDate.format(H.dateFormat)}`:"";case"createdDate":return e.createdDate?t.options.shortMode?" "+a:` ${a} ${e.createdDate.format(H.dateFormat)}`:"";case"scheduledDate":return!e.scheduledDate||e.scheduledDateIsInferred?"":t.options.shortMode?" "+o:` ${o} ${e.scheduledDate.format(H.dateFormat)}`;case"doneDate":return e.doneDate?t.options.shortMode?" "+u:` ${u} ${e.doneDate.format(H.dateFormat)}`:"";case"dueDate":return e.dueDate?t.options.shortMode?" "+c:` ${c} #${e.dueDate.format(H.dateFormat)}`:"";case"recurrenceRule":return e.recurrence?t.options.shortMode?" "+l:` ${l} ${e.recurrence.toText()}`:"";case"blockLink":return(p=e.blockLink)!=null?p:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c="",p=null,h="",v=20,y=0;do{n=!1;let O=e.match(t.priorityRegex);O!==null&&(i=this.parsePriority(O[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let M=e.match(t.doneDateRegex);M!==null&&(u=window.moment(M[1],H.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let $=e.match(t.dueDateRegex);$!==null&&(o=window.moment($[1],H.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let q=e.match(t.scheduledDateRegex);q!==null&&(a=window.moment(q[1],H.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let U=e.match(t.startDateRegex);U!==null&&(s=window.moment(U[1],H.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let ie=e.match(t.createdDateRegex);ie!==null&&(l=window.moment(ie[1],H.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let re=e.match(t.recurrenceRegex);re!==null&&(c=re[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let ve=e.match(H.hashTagsFromEnd);if(ve!=null){e=e.replace(H.hashTagsFromEnd,"").trim(),n=!0;let G=ve[0].trim();h=h.length>0?[G,h].join(" "):G}y++}while(n&&y<=v);return c.length>0&&(p=et.fromText({recurrenceRuleText:c,startDate:s,scheduledDate:a,dueDate:o})),h.length>0&&(e+=" "+h),{description:e,priority:i,startDate:s,createdDate:l,scheduledDate:a,dueDate:o,doneDate:u,recurrence:p,tags:_e.extractHashtags(e)}}};function On(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var hf={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",recurrenceSymbol:"repeat::",TaskFormatRegularExpressions:{priorityRegex:On(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:On(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:On(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:On(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:On(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:On(/completion:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:On(/repeat:: *([a-zA-Z0-9, !]+)/)}},go=class extends kn{constructor(){super(hf)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n);return i!==""&&!["blockLink","description"].includes(n)?`  [${i.trim()}]`:i}};var zt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(zt||{}),tt=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var kt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new kt(new tt("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new kt(new tt("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new kt(new tt(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new kt(new tt("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new kt(new tt("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return zt[e]||"TODO"}static createUnknownStatus(e){return new kt(new tt(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=kt.getTypeFromStatusTypeString(e[3]);return new kt(new tt(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return kt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},ee=kt;ee.DONE=kt.makeDone(),ee.EMPTY=kt.makeEmpty(),ee.TODO=kt.makeTodo();var yo=class{constructor(e=!1,t=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t}};var He=class{constructor(){this.coreStatuses=[ee.makeTodo().configuration,ee.makeDone().configuration],this.customStatuses=[ee.makeInProgress().configuration,ee.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new ee(e);return t.findIndex(i=>new ee(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){He.deleteAllCustomStatuses(e),new He().customStatuses.forEach(n=>{He.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):He.addStatus(e.customStatuses,ee.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var ST=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var pr=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return ST.forEach(t=>{e=[...e,new pr(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return pr.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of pr.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};function To(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Kt=class{static get(){let{globalFilter:e}=Q();return e}static set(e){Ge({globalFilter:e})}static reset(){Ge({globalFilter:Kt.empty})}static isEmpty(){return Kt.get()===Kt.empty}static equals(e){return Kt.get()===e}static includedIn(e){let t=Kt.get();return e.includes(t)}static prependTo(e){return Kt.get()+" "+e}static removeAsWordFromDependingOnSettings(e){let{removeGlobalFilter:t}=Q();return t?Kt.removeAsWordFrom(e):e}static removeAsWordFrom(e){if(Kt.isEmpty())return e;let t=RegExp("(^|\\s)"+To(Kt.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}static removeAsSubstringFrom(e){let t=Kt.get();return e.replace(t,"").trim()}},we=Kt;we.empty="";var Cr={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new kn(mf),buildSuggestions:ff(mf,df)},dataview:{displayName:"Dataview",taskSerializer:new go,buildSuggestions:DT(ff(hf,df),[["(",")"],["[","]"]])}},ZM={globalQuery:"",globalFilter:we.empty,removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new He,features:pr.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new yo},en=he({},ZM),Q=()=>{for(let r in pr.settingsFlags)en.features[r]===void 0&&(en.features[r]=pr.settingsFlags[r]);return en.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=ee.getTypeFromStatusTypeString(r.type);t[e]=new tt((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),he({},en)},Ge=r=>(en=he(he({},en),r),Q());var Dn=(r,e)=>(en.generalSettings[r]=e,Q()),MT=r=>{var e;return(e=en.features[r])!=null?e:!1};function Hs(){return Cr[Q().taskFormat]}function gf(){return{source:Q().globalQuery}}var Re=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==ee.EMPTY.symbol)}static getInstance(){return Re.instance||(Re.instance=new Re),Re.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof ee?this._registeredStatuses.push(e):this._registeredStatuses.push(new ee(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):ee.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):ee.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:ee.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return ee.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:ee.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new Re,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=Re.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new tt(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new ee(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[ee.makeTodo(),ee.makeInProgress(),ee.makeDone(),ee.makeCancelled()].forEach(t=>{this.add(t)})}};var rr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=window.moment().startOf("day"),i=Math.round(n.diff(e.dueDate)/rr.milliSecondsPerDay),s;i>=7?s=1:i>=-14?s=(i+14)*.8/21+.2:s=.2,t+=s*rr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*rr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*rr.startedCoefficient),e.priority){case"0":t+=1.5*rr.priorityCoefficient;break;case"1":t+=1*rr.priorityCoefficient;break;case"2":t+=.65*rr.priorityCoefficient;break;case"3":t+=.325*rr.priorityCoefficient;break;case"5":t-=.3*rr.priorityCoefficient;break}return t}},Pr=rr;Pr.dueCoefficient=12,Pr.scheduledCoefficient=5,Pr.startedCoefficient=-3,Pr.priorityCoefficient=6,Pr.milliSecondsPerDay=1e3*60*60*24;var WT=require("obsidian");var Vs=require("obsidian");var JM=require("obsidian"),PT=ya(CT());var yf=class extends PT.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new Tf(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},_o=new yf,Tf=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};var zs,_f,bf,ex=["md"],Ks=_o.getLogger("tasks"),NT=({metadataCache:r,vault:e,workspace:t})=>{zs=r,_f=e,bf=t},Eo=t=>F(void 0,[t],function*({originalTask:r,newTasks:e}){if(_f===void 0||zs===void 0||bf===void 0){bo("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),Ks.debug(`replaceTaskWithTasks entered. ${r.path}`),FT({originalTask:r,newTasks:e,vault:_f,metadataCache:zs,workspace:bf,previousTries:0})});function bo(r){console.error(r),new Vs.Notice(r,15e3)}function IT(r){console.warn(r),new Vs.Notice(r,1e4)}function tx(r){Ks.debug(r)}var tn=class extends Error{},vo=class extends Error{},FT=a=>F(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){Ks.debug(`tryRepetitive after ${s} previous tries`);let o=()=>{if(s>10){let l=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;bo(l);return}let u=Math.min(Math.pow(10,s),100);Ks.debug(`timeout = ${u}`),setTimeout(()=>{FT({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})},u)};try{let[u,l,c]=yield LT(r,t),p=[...c.slice(0,u),...e.map(h=>h.toFileLineString()),...c.slice(u+1)];yield t.modify(l,p.join(`
`))}catch(u){if(u instanceof tn)return u.message&&IT(u.message),o();if(u instanceof vo)return o();u instanceof Error&&bo(u.message)}});function LT(r,e){return F(this,null,function*(){if(zs===void 0)throw new tn;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof Vs.TFile))throw new tn(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!ex.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=zs.getFileCache(t);if(n==null||n===null)throw new tn(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new tn(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=rx(r,a,i,tx);if(o===void 0)throw new vo;return[o,t,a]})}function vf(r,e){return F(this,null,function*(){try{let[t,n,i]=yield LT(r,e);return[t,n]}catch(t){t instanceof tn?t.message&&IT(t.message):t instanceof Error&&bo(t.message)}})}function UT(r,e){return r<e.length}function rx(r,e,t,n){let i=nx(r,e);return i!==void 0||(i=ix(r,e),i!==void 0)?i:sx(r,e,t,n)}function nx(r,e){let t=r.taskLocation.lineNumber;if(UT(t,e)&&e[t]===r.originalMarkdown)return Ks.debug(`Found original markdown at original line number ${t}`),t}function ix(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function sx(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!UT(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(we.includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}var mr=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return mr.priorityNameUsingNone(e).replace("None","Normal")}};var Sn={description:"task-description",priority:"task-priority",dueDate:"task-due",startDate:"task-start",createdDate:"task-created",scheduledDate:"task-scheduled",doneDate:"task-done",recurrenceRule:"task-recurring",blockLink:""},ax=7,ox="far";function ux(r,e,t,n){return F(this,null,function*(){if(!n)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield WT.MarkdownRenderer.renderMarkdown(r,e,t,n)})}function qT(r,e,t=null){return F(this,null,function*(){var o;t||(t=ux);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text");let s=yield lx(r,e,i,t);for(let u in s)n.dataset[u]=s[u];let a=document.createElement("input");return n.appendChild(a),a.classList.add("task-list-item-checkbox"),a.type="checkbox",r.status.symbol!==" "&&(a.checked=!0,n.classList.add("is-checked")),a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=r.toggleWithRecurrenceInUsersOrder();Eo({originalTask:r,newTasks:l})}),n.prepend(a),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),n.setAttribute("data-task-status-name",r.status.name),n.setAttribute("data-task-status-type",r.status.type),a.setAttribute("data-line",e.listIndex.toString()),(o=e.layoutOptions)!=null&&o.shortMode&&hx({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function lx(r,e,t,n){return F(this,null,function*(){let i={},s=new Jr(e.layoutOptions),a=Cr.tasksPluginEmoji.taskSerializer;for(let o of s.shownTaskLayoutComponents){let u=a.componentToString(r,s,o);if(u){o==="description"&&(u=we.removeAsWordFromDependingOnSettings(u));let l=document.createElement("span");if(t.appendChild(l),l){let c=document.createElement("span");l.appendChild(c),yield cx(c,u,o,r,n,e.obsidianComponent),fx(o,c);let p=dx(o,r);l.classList.add(...p);let h=Ef(o,r);for(let v in h)l.dataset[v]=h[v];i=he(he({},i),h)}}}for(let o of s.hiddenTaskLayoutComponents){let u=Ef(o,r);i=he(he({},i),u)}if(i.taskPriority===void 0){let o=Ef("priority",r);i=he(he({},i),o)}return i})}function cx(r,e,t,n,i,s){return F(this,null,function*(){if(t==="description"){let{debugSettings:a}=Q();a.showTaskHiddenData&&(e+=`<br>\u{1F41B} <b>${n.lineNumber}</b> . ${n.sectionStart} . ${n.sectionIndex} . '<code>${n.originalMarkdown}</code>'<br>'<code>${n.path}</code>' > '<code>${n.precedingHeader}</code>'<br>`),yield i(e,r,n.path,s);let o=r.querySelector("blockquote"),u=o!=null?o:r,l=u.querySelector("p");if(l!==null){for(;l.firstChild;)u.insertBefore(l.firstChild,l);l.remove()}r.querySelectorAll("p").forEach(c=>{c.hasChildNodes()||c.remove()}),r.querySelectorAll(".footnotes").forEach(c=>{c.remove()})}else r.innerHTML=e})}function dx(r,e){let t=[];function n(i,s){i&&t.push(s)}switch(r){case"description":case"recurrenceRule":{t.push(Sn[r]);break}case"priority":{t.push(Sn[r]);break}case"createdDate":{n(e.createdDate,Sn[r]);break}case"dueDate":{n(e.dueDate,Sn[r]);break}case"startDate":{n(e.startDate,Sn[r]);break}case"scheduledDate":{n(e.scheduledDate,Sn[r]);break}case"doneDate":{n(e.doneDate,Sn[r]);break}}return t}function Ef(r,e){let t={};function n(i,s){if(i){let a=px(i);a&&(t[s]=a)}}switch(r){case"description":case"recurrenceRule":break;case"priority":{t.taskPriority=mr.priorityNameUsingNormal(e.priority).toLocaleLowerCase();break}case"createdDate":{n(e.createdDate,"taskCreated");break}case"dueDate":{n(e.dueDate,"taskDue");break}case"startDate":{n(e.startDate,"taskStart");break}case"scheduledDate":{n(e.scheduledDate,"taskScheduled");break}case"doneDate":{n(e.doneDate,"taskDone");break}}return t}function fx(r,e){if(r==="description"){let t=e.getElementsByClassName("tag");for(let n=0;n<t.length;n++){let i=t[n].textContent;if(i){let s=mx(i),a=t[n];s&&(a.dataset.tagName=s)}}}}function px(r){let e=window.moment().startOf("day"),t="",n=e.diff(r,"days");return isNaN(n)?null:n===0?"today":(n>0?t+="past-":n<0&&(t+="future-"),Math.abs(n)<=ax?t+=Math.abs(n).toString()+"d":t+=ox,t)}function mx(r){let e=/["&\x00\r\n]/g,t=r.replace(e,"-");return t=t.replace(/^[-_]+/,""),t.length>0?t:null}function hx({task:r,element:e,isFilenameUnique:t}){let{recurrenceSymbol:n,startDateSymbol:i,createdDateSymbol:s,scheduledDateSymbol:a,dueDateSymbol:o,doneDateSymbol:u}=Cr.tasksPluginEmoji.taskSerializer.symbols;e.addEventListener("mouseenter",()=>{let l=e.createDiv();l.addClasses(["tooltip","pop-up"]),r.recurrence&&l.createDiv().setText(`${n} ${r.recurrence.toText()}`),Qs(l,r.createdDate,s),Qs(l,r.startDate,i),Qs(l,r.scheduledDate,a),Qs(l,r.dueDate,o),Qs(l,r.doneDate,u);let c=r.getLinkText({isFilenameUnique:t});c&&l.createDiv().setText(`\u{1F517} ${c}`),e.addEventListener("mouseleave",()=>{l.remove()})})}function Qs(r,e,t){e&&r.createDiv().setText(gx({signifier:t,date:e}))}function gx({signifier:r,date:e}){return`${r} ${e.format(H.dateFormat)} (${e.from(window.moment().startOf("day"))})`}var Ot=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=Q();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new _e(Dt(he({},e),{taskLocation:e.taskLocation.fromRenamedFile(t),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new _e(Dt(he({},i),{scheduledDateIsInferred:!1}))),i))}};var _t=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(H.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(H.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}};var wo=class{constructor(e){this._path=e}get path(){return this._path}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}};var Pt=class{},H=Pt;H.dateFormat="YYYY-MM-DD",H.dateTimeFormat="YYYY-MM-DD HH:mm",H.indentationRegex=/^([\s\t>]*)/,H.listMarkerRegex=/([-*+]|[0-9]+\.)/,H.checkboxRegex=/\[(.)\]/u,H.afterCheckboxRegex=/ *(.*)/u,H.taskRegex=new RegExp(Pt.indentationRegex.source+Pt.listMarkerRegex.source+" +"+Pt.checkboxRegex.source+Pt.afterCheckboxRegex.source,"u"),H.nonTaskRegex=new RegExp(Pt.indentationRegex.source+Pt.listMarkerRegex.source+"? *("+Pt.checkboxRegex.source+")?"+Pt.afterCheckboxRegex.source,"u"),H.listItemRegex=new RegExp(Pt.indentationRegex.source+Pt.listMarkerRegex.source),H.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,H.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]+/g,H.hashTagsFromEnd=new RegExp(Pt.hashTags.source+"$");var _e=class{constructor({status:e,description:t,taskLocation:n,indentation:i,listMarker:s,priority:a,createdDate:o,startDate:u,scheduledDate:l,dueDate:c,doneDate:p,recurrence:h,blockLink:v,tags:y,originalMarkdown:O,scheduledDateIsInferred:M}){this._urgency=null;this.status=e,this.description=t,this.indentation=i,this.listMarker=s,this.taskLocation=n,this.tags=y,this.priority=a,this.createdDate=o,this.startDate=u,this.scheduledDate=l,this.dueDate=c,this.doneDate=p,this.recurrence=h,this.blockLink=v,this.originalMarkdown=O,this.scheduledDateIsInferred=M}static fromLine({line:e,taskLocation:t,fallbackDate:n}){let i=_e.extractTaskComponents(e);return i===null||!we.includedIn(i.body)?null:_e.parseTaskSignifiers(e,t,n)}static parseTaskSignifiers(e,t,n){let i=_e.extractTaskComponents(e);if(i===null)return null;let{taskSerializer:s}=Hs(),a=s.deserialize(i.body),o=!1;return Ot.canApplyFallback(a)&&n!==null&&(a.scheduledDate=n,o=!0),a.tags=a.tags.map(u=>u.trim()),a.tags=a.tags.filter(u=>!we.equals(u)),new _e(Dt(he(he({},i),a),{taskLocation:t,originalMarkdown:e,scheduledDateIsInferred:o}))}static extractTaskComponents(e){let t=e.match(H.taskRegex);if(t===null)return null;let n=t[1],i=t[2],s=t[3],a=Re.getInstance().bySymbolOrCreate(s),o=t[4].trim(),u=o.match(H.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(H.blockLinkRegex,"").trim()),{indentation:n,listMarker:i,status:a,body:o,blockLink:l}}toLi(e){return F(this,null,function*(){return qT(this,e)})}toString(){return Hs().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=Re.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=Q();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new _e(Dt(he({},this),{status:e,doneDate:t})),s=[];if(n!==null){let{setCreatedDate:a}=Q(),o=null;a&&(o=window.moment());let u=Re.getInstance().getNextStatusOrCreate(e),l=new _e(Dt(he(he({},this),n),{status:u,blockLink:"",createdDate:o}));s.push(l)}return s.push(i),s}toggleWithRecurrenceInUsersOrder(){let e=this.toggle(),{recurrenceOnNextLine:t}=Q();return t?e.reverse():e}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}get priorityNumber(){return Number.parseInt(this.priority)}get descriptionWithoutTags(){return this.description.replace(H.hashTags,"").trim()}get priorityName(){return mr.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=Pr.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get created(){return new _t(this.createdDate)}get done(){return new _t(this.doneDate)}get due(){return new _t(this.dueDate)}get scheduled(){return new _t(this.scheduledDate)}get start(){return new _t(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates.sort(Ar);return new _t(t[0])}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return new wo(this.path)}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(!this.status.identicalTo(e.status)||this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["createdDate","startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ar(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}static extractHashtags(e){var t,n;return(n=(t=e.match(H.hashTags))==null?void 0:t.map(i=>i.trim()))!=null?n:[]}};var Xs=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var ut=class{constructor(e,t,n,i,s){this._path=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new ut(e,0,0,0,null)}fromRenamedFile(e){return new ut(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get path(){return this._path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}};var Rn=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Ta,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>F(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=Q(),t=this.vault.on("create",s=>{s instanceof fi.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof fi.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof fi.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Xs(()=>Ot.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?Ot.updateTaskPath(u,s.path,o.value):new _e(Dt(he({},u),{taskLocation:u.taskLocation.fromRenamedFile(s.path)})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>F(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return F(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}_e.tasksListsIdentical(n,s)||(this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new Xs(()=>Ot.fromPath(i.path)),l=null,c=0;for(let p of t)if(p.task!==void 0){let h=p.position.start.line;if(h>=o)return console.log(`${i.path} Obsidian gave us a line number ${h} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<h)&&(l=Rn.getSection(h,n.sections),c=0),l===null)continue;let v=a[h];if(v===void 0){console.log(`${i.path}: line ${h} - ignoring 'undefined' line.`);continue}let y;try{y=_e.fromLine({line:v,taskLocation:new ut(i.path,h,l.position.start.line,c,Rn.getPrecedingHeader(h,n.headings)),fallbackDate:u.value})}catch(O){this.reportTaskParsingErrorToUser(O,i,p,v);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new fi.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Pf=require("obsidian");var s_=require("obsidian");function Nr(){}function Of(r){return r()}function $T(){return Object.create(null)}function xn(r){r.forEach(Of)}function ko(r){return typeof r=="function"}function GT(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function BT(r){return Object.keys(r).length===0}var HT=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,Js=class{constructor(e){this.options=e,this._listeners="WeakMap"in HT?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)Js.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};Js.entries="WeakMap"in HT?new WeakMap:void 0;var zT=!1;function yx(){zT=!0}function Tx(){zT=!1}function R(r,e){r.appendChild(e)}function gi(r,e,t){r.insertBefore(e,t||null)}function An(r){r.parentNode&&r.parentNode.removeChild(r)}function Df(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function K(r){return document.createElement(r)}function _x(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ft(r){return document.createTextNode(r)}function fe(){return ft(" ")}function bt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function KT(r){return function(e){return e.preventDefault(),r.call(this,e)}}function N(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function VT(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function bx(r){return Array.from(r.childNodes)}function Sf(r,e){e=""+e,r.data!==e&&(r.data=e)}function nr(r,e){r.value=e==null?"":e}function Rf(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function QT(r){let e=r.querySelector(":checked");return e&&e.__value}function ir(r,e,t){r.classList[t?"add":"remove"](e)}var Mn=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=_x(t.nodeName):this.e=K(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)gi(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(An)}};var ea;function Zs(r){ea=r}function vx(){if(!ea)throw new Error("Function called outside component initialization");return ea}function Mf(r){vx().$$.on_mount.push(r)}var mi=[];var Oo=[],hi=[],jT=[],Ex=Promise.resolve(),kf=!1;function wx(){kf||(kf=!0,Ex.then(XT))}function ta(r){hi.push(r)}var wf=new Set,pi=0;function XT(){if(pi!==0)return;let r=ea;do{try{for(;pi<mi.length;){let e=mi[pi];pi++,Zs(e),kx(e.$$)}}catch(e){throw mi.length=0,pi=0,e}for(Zs(null),mi.length=0,pi=0;Oo.length;)Oo.pop()();for(let e=0;e<hi.length;e+=1){let t=hi[e];wf.has(t)||(wf.add(t),t())}hi.length=0}while(mi.length);for(;jT.length;)jT.pop()();kf=!1,wf.clear(),Zs(r)}function kx(r){if(r.fragment!==null){r.update(),xn(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ta)}}function Ox(r){let e=[],t=[];hi.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),hi=e}var Dx=new Set;function Sx(r,e){r&&r.i&&(Dx.delete(r),r.i(e))}var Rx=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],$L=new Set([...Rx]);function Mx(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||ta(()=>{let a=r.$$.on_mount.map(Of).filter(ko);r.$$.on_destroy?r.$$.on_destroy.push(...a):xn(a),r.$$.on_mount=[]}),s.forEach(ta)}function ZT(r,e){let t=r.$$;t.fragment!==null&&(Ox(t.after_update),xn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xx(r,e){r.$$.dirty[0]===-1&&(mi.push(r),wx(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function JT(r,e,t,n,i,s,a,o=[-1]){let u=ea;Zs(r);let l=r.$$={fragment:null,ctx:[],props:s,update:Nr,not_equal:i,bound:$T(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:$T(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(p,h,...v)=>{let y=v.length?v[0]:h;return l.ctx&&i(l.ctx[p],l.ctx[p]=y)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](y),c&&xx(r,p)),h}):[],l.update(),c=!0,xn(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){yx();let p=bx(e.target);l.fragment&&l.fragment.l(p),p.forEach(An)}else l.fragment&&l.fragment.c();e.intro&&Sx(r.$$.fragment),Mx(r,e.target,e.anchor,e.customElement),Tx(),XT()}Zs(u)}var Ax;typeof HTMLElement=="function"&&(Ax=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Of).filter(ko);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){xn(this.$$.on_disconnect)}$destroy(){ZT(this,1),this.$destroy=Nr}$on(r,e){if(!ko(e))return Nr;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!BT(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Do=class{$destroy(){ZT(this,1),this.$destroy=Nr}$on(e,t){if(!ko(t))return Nr;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!BT(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Af=ya(Be());function e_(r,e,t){let n=r.slice();return n[45]=e[t],n}function t_(r,e,t){let n=r.slice();return n[48]=e[t].value,n[49]=e[t].label,n[50]=e[t].symbol,n[51]=e[t].accessKey,n[52]=e[t].accessKeyIndex,n}function Cx(r){let e,t=r[50]+"",n;return{c(){e=K("span"),n=ft(t)},m(i,s){gi(i,e,s),R(e,n)},p:Nr,d(i){i&&An(e)}}}function r_(r){let e,t,n,i,s,a,o,u,l=r[49].substring(0,r[52])+"",c,p,h=r[49].substring(r[52],r[52]+1)+"",v,y,O=r[49].substring(r[52]+1)+"",M,$,q=r[50]&&r[50].charCodeAt(0)>=256,U,ie,re,ve,G,V=q&&Cx(r);return re=VT(r[33][0]),{c(){e=K("span"),t=K("input"),a=fe(),o=K("label"),u=K("span"),c=ft(l),p=K("span"),v=ft(h),y=K("span"),M=ft(O),$=fe(),V&&V.c(),ie=fe(),N(t,"type","radio"),N(t,"id",n="priority-"+r[48]),t.__value=i=r[48],t.value=t.__value,N(t,"accesskey",s=r[15](r[51])),N(p,"class","accesskey"),N(o,"for",U="priority-"+r[48]),re.p(t)},m(Pe,Fe){gi(Pe,e,Fe),R(e,t),t.checked=t.__value===r[1].priority,R(e,a),R(e,o),R(o,u),R(u,c),R(o,p),R(p,v),R(o,y),R(y,M),R(o,$),V&&V.m(o,null),R(e,ie),ve||(G=bt(t,"change",r[32]),ve=!0)},p(Pe,Fe){Fe[0]&32768&&s!==(s=Pe[15](Pe[51]))&&N(t,"accesskey",s),Fe[0]&3&&(t.checked=t.__value===Pe[1].priority),q&&V.p(Pe,Fe)},d(Pe){Pe&&An(e),V&&V.d(),re.r(),ve=!1,G()}}}function n_(r){let e,t=r[45].name+"",n,i,s=r[45].symbol+"",a,o,u;return{c(){e=K("option"),n=ft(t),i=ft(" ["),a=ft(s),o=ft("]"),e.__value=u=r[45],e.value=e.__value},m(l,c){gi(l,e,c),R(e,n),R(e,i),R(e,a),R(e,o)},p(l,c){c[0]&1&&t!==(t=l[45].name+"")&&Sf(n,t),c[0]&1&&s!==(s=l[45].symbol+"")&&Sf(a,s),c[0]&1&&u!==(u=l[45])&&(e.__value=u,e.value=e.__value)},d(l){l&&An(e)}}}function Px(r){let e,t,n,i,s,a,o,u,l,c,p,h,v,y,O,M,$,q,U,ie,re,ve,G,V,Pe,Fe,j,A,E,B,C,X,d,f,m,g,T,b,w,S,k,D,P,me,ae,te,Se,I,Ae,Ce,rt,_r,We,Le,Jf,Ai,ua,ep,ar,la,tp,$n,ca,rp,Lt,da,np,Yr,Ci,fa,ip,$r,pa,sp,Pi,cu,ap,ma,op,Ni,du,up,ha,lp,jn,ln,cp,ga,dp,Ii,fu,fp,Gn=r[20],ht=[];for(let Y=0;Y<Gn.length;Y+=1)ht[Y]=r_(t_(r,Gn,Y));let Bn=r[0],gt=[];for(let Y=0;Y<Bn.length;Y+=1)gt[Y]=n_(e_(r,Bn,Y));return{c(){e=K("div"),t=K("form"),n=K("div"),i=K("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=fe(),a=K("textarea"),u=fe(),l=K("div"),c=K("label"),p=ft("Priority"),v=fe();for(let Y=0;Y<ht.length;Y+=1)ht[Y].c();y=fe(),O=K("div"),M=K("label"),M.textContent="Recurs",$=fe(),q=K("input"),ie=fe(),re=K("code"),ve=ft(r[16]),G=fe(),V=new Mn(!1),Pe=fe(),Fe=K("label"),Fe.textContent="Due",j=fe(),A=K("input"),B=fe(),C=K("code"),X=ft(r[19]),d=fe(),f=new Mn(!1),m=fe(),g=K("label"),g.textContent="Scheduled",T=fe(),b=K("input"),S=fe(),k=K("code"),D=ft(r[18]),P=fe(),me=new Mn(!1),ae=fe(),te=K("label"),te.innerHTML='St<span class="accesskey">a</span>rt',Se=fe(),I=K("input"),Ce=fe(),rt=K("code"),_r=ft(r[17]),We=fe(),Le=new Mn(!1),Jf=fe(),Ai=K("div"),ua=K("label"),ua.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,ep=fe(),ar=K("input"),tp=fe(),$n=K("div"),ca=K("label"),ca.innerHTML='Stat<span class="accesskey">u</span>s',rp=fe(),Lt=K("select");for(let Y=0;Y<gt.length;Y+=1)gt[Y].c();np=fe(),Yr=K("div"),Ci=K("div"),fa=K("label"),fa.textContent="Completed:",ip=fe(),$r=K("input"),sp=fe(),Pi=K("div"),cu=K("span"),cu.textContent="Created on:",ap=fe(),ma=K("code"),op=fe(),Ni=K("div"),du=K("span"),du.textContent="Done on:",up=fe(),ha=K("code"),lp=fe(),jn=K("div"),ln=K("button"),cp=ft("Apply"),dp=fe(),Ii=K("button"),Ii.textContent="Cancel",N(i,"for","description"),N(a,"id","description"),N(a,"class","tasks-modal-description"),N(a,"placeholder","Take out the trash"),N(a,"accesskey",o=r[15]("t")),N(n,"class","tasks-modal-section"),N(c,"for",h="priority-"+r[1].priority),N(l,"class","tasks-modal-section tasks-modal-priorities"),N(M,"for","recurrence"),N(M,"class","accesskey-first"),N(q,"id","recurrence"),N(q,"type","text"),N(q,"placeholder","Try 'every 2 weeks on Thursday'."),N(q,"accesskey",U=r[15]("r")),ir(q,"tasks-modal-error",!r[8]),V.a=null,N(Fe,"for","due"),N(Fe,"class","accesskey-first"),N(A,"id","due"),N(A,"type","text"),N(A,"placeholder",xf),N(A,"accesskey",E=r[15]("d")),ir(A,"tasks-modal-error",!r[7]),f.a=null,N(g,"for","scheduled"),N(g,"class","accesskey-first"),N(b,"id","scheduled"),N(b,"type","text"),N(b,"placeholder",xf),N(b,"accesskey",w=r[15]("s")),ir(b,"tasks-modal-error",!r[5]),me.a=null,N(te,"for","start"),N(I,"id","start"),N(I,"type","text"),N(I,"placeholder",xf),N(I,"accesskey",Ae=r[15]("a")),ir(I,"tasks-modal-error",!r[3]),Le.a=null,N(ua,"for","forwardOnly"),N(ar,"id","forwardOnly"),N(ar,"type","checkbox"),N(ar,"class","task-list-item-checkbox tasks-modal-checkbox"),N(ar,"accesskey",la=r[15]("f")),N(O,"class","tasks-modal-section tasks-modal-dates"),N(ca,"for","status"),N(Lt,"id","status-type"),N(Lt,"class","dropdown"),N(Lt,"accesskey",da=r[15]("u")),r[1].status===void 0&&ta(()=>r[39].call(Lt)),N($n,"class","tasks-modal-section"),N(fa,"for","status"),N($r,"id","status"),N($r,"type","checkbox"),N($r,"class","task-list-item-checkbox tasks-modal-checkbox"),$r.checked=pa=r[1].status.isCompleted(),$r.disabled=!0,N(Yr,"class","tasks-modal-section tasks-modal-status"),ln.disabled=ga=!r[14],N(ln,"type","submit"),N(ln,"class","mod-cta"),N(Ii,"type","button"),N(jn,"class","tasks-modal-section tasks-modal-buttons"),ir(t,"with-accesskeys",r[9]),N(e,"class","tasks-modal")},m(Y,pe){gi(Y,e,pe),R(e,t),R(t,n),R(n,i),R(n,s),R(n,a),nr(a,r[1].description),r[31](a),R(t,u),R(t,l),R(l,c),R(c,p),R(l,v);for(let ce=0;ce<ht.length;ce+=1)ht[ce]&&ht[ce].m(l,null);R(t,y),R(t,O),R(O,M),R(O,$),R(O,q),nr(q,r[1].recurrenceRule),R(O,ie),R(O,re),R(re,ve),R(re,G),V.m(r[12],re),R(O,Pe),R(O,Fe),R(O,j),R(O,A),nr(A,r[1].dueDate),R(O,B),R(O,C),R(C,X),R(C,d),f.m(r[6],C),R(O,m),R(O,g),R(O,T),R(O,b),nr(b,r[1].scheduledDate),R(O,S),R(O,k),R(k,D),R(k,P),me.m(r[4],k),R(O,ae),R(O,te),R(O,Se),R(O,I),nr(I,r[1].startDate),R(O,Ce),R(O,rt),R(rt,_r),R(rt,We),Le.m(r[2],rt),R(O,Jf),R(O,Ai),R(Ai,ua),R(Ai,ep),R(Ai,ar),ar.checked=r[1].forwardOnly,R(t,tp),R(t,$n),R($n,ca),R($n,rp),R($n,Lt);for(let ce=0;ce<gt.length;ce+=1)gt[ce]&&gt[ce].m(Lt,null);Rf(Lt,r[1].status,!0),R(t,np),R(t,Yr),R(Yr,Ci),R(Ci,fa),R(Ci,ip),R(Ci,$r),R(Yr,sp),R(Yr,Pi),R(Pi,cu),R(Pi,ap),R(Pi,ma),ma.innerHTML=r[11],R(Yr,op),R(Yr,Ni),R(Ni,du),R(Ni,up),R(Ni,ha),ha.innerHTML=r[13],R(t,lp),R(t,jn),R(jn,ln),R(ln,cp),R(jn,dp),R(jn,Ii),fu||(fp=[bt(a,"input",r[30]),bt(a,"keydown",r[23]),bt(a,"paste",r[24]),bt(a,"drop",r[24]),bt(l,"keyup",r[21]),bt(q,"input",r[34]),bt(A,"input",r[35]),bt(b,"input",r[36]),bt(I,"input",r[37]),bt(ar,"change",r[38]),bt(Lt,"change",r[39]),bt(Ii,"click",r[22]),bt(t,"submit",KT(r[25]))],fu=!0)},p(Y,pe){if(pe[0]&32768&&o!==(o=Y[15]("t"))&&N(a,"accesskey",o),pe[0]&3&&nr(a,Y[1].description),pe[0]&3&&h!==(h="priority-"+Y[1].priority)&&N(c,"for",h),pe[0]&1081346){Gn=Y[20];let ce;for(ce=0;ce<Gn.length;ce+=1){let Fi=t_(Y,Gn,ce);ht[ce]?ht[ce].p(Fi,pe):(ht[ce]=r_(Fi),ht[ce].c(),ht[ce].m(l,null))}for(;ce<ht.length;ce+=1)ht[ce].d(1);ht.length=Gn.length}if(pe[0]&32768&&U!==(U=Y[15]("r"))&&N(q,"accesskey",U),pe[0]&3&&q.value!==Y[1].recurrenceRule&&nr(q,Y[1].recurrenceRule),pe[0]&256&&ir(q,"tasks-modal-error",!Y[8]),pe[0]&4096&&V.p(Y[12]),pe[0]&32768&&E!==(E=Y[15]("d"))&&N(A,"accesskey",E),pe[0]&3&&A.value!==Y[1].dueDate&&nr(A,Y[1].dueDate),pe[0]&128&&ir(A,"tasks-modal-error",!Y[7]),pe[0]&64&&f.p(Y[6]),pe[0]&32768&&w!==(w=Y[15]("s"))&&N(b,"accesskey",w),pe[0]&3&&b.value!==Y[1].scheduledDate&&nr(b,Y[1].scheduledDate),pe[0]&32&&ir(b,"tasks-modal-error",!Y[5]),pe[0]&16&&me.p(Y[4]),pe[0]&32768&&Ae!==(Ae=Y[15]("a"))&&N(I,"accesskey",Ae),pe[0]&3&&I.value!==Y[1].startDate&&nr(I,Y[1].startDate),pe[0]&8&&ir(I,"tasks-modal-error",!Y[3]),pe[0]&4&&Le.p(Y[2]),pe[0]&32768&&la!==(la=Y[15]("f"))&&N(ar,"accesskey",la),pe[0]&3&&(ar.checked=Y[1].forwardOnly),pe[0]&1){Bn=Y[0];let ce;for(ce=0;ce<Bn.length;ce+=1){let Fi=e_(Y,Bn,ce);gt[ce]?gt[ce].p(Fi,pe):(gt[ce]=n_(Fi),gt[ce].c(),gt[ce].m(Lt,null))}for(;ce<gt.length;ce+=1)gt[ce].d(1);gt.length=Bn.length}pe[0]&32768&&da!==(da=Y[15]("u"))&&N(Lt,"accesskey",da),pe[0]&3&&Rf(Lt,Y[1].status),pe[0]&3&&pa!==(pa=Y[1].status.isCompleted())&&($r.checked=pa),pe[0]&2048&&(ma.innerHTML=Y[11]),pe[0]&8192&&(ha.innerHTML=Y[13]),pe[0]&16384&&ga!==(ga=!Y[14])&&(ln.disabled=ga),pe[0]&512&&ir(t,"with-accesskeys",Y[9])},i:Nr,o:Nr,d(Y){Y&&An(e),r[31](null),Df(ht,Y),Df(gt,Y),fu=!1,xn(fp)}}}var xf="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function Nx(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,{prioritySymbols:u,recurrenceSymbol:l,startDateSymbol:c,scheduledDateSymbol:p,dueDateSymbol:h}=Cr.tasksPluginEmoji.taskSerializer.symbols,v,y={description:"",status:ee.TODO,priority:"none",recurrenceRule:"",createdDate:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},O=!0,M="",$="",q=!0,U="",ie=!0,re="",ve=!0,G="",V=!0,Pe="",Fe=!1,j=!0,A=!0,E=[{value:"lowest",label:"Lowest",symbol:u.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:u.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:u.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:u.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:u.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:u.Highest,accessKey:"i",accessKeyIndex:1}];function B(I,Ae,Ce=void 0){if(!Ae)return`<i>no ${I} date</i>`;let rt=Af.parseDate(Ae,Ce,{forwardDate:Ce!=null});return rt!==null?window.moment(rt).format("YYYY-MM-DD"):`<i>invalid ${I} date</i>`}function C(I,Ae){return B(I,Ae,y.forwardOnly?new Date:void 0)}function X(I){let Ae=null,Ce=Af.parseDate(I,new Date,{forwardDate:y.forwardOnly});return Ce!==null&&(Ae=window.moment(Ce)),Ae}Mf(()=>{let{provideAccessKeys:I}=Q();t(9,j=I);let Ae=we.removeAsWordFrom(s.description);(Ae!=s.description||!we.includedIn(s.description))&&(Fe=!0);let Ce="none";s.priority==="5"?Ce="lowest":s.priority==="4"?Ce="low":s.priority==="2"?Ce="medium":s.priority==="1"?Ce="high":s.priority==="0"&&(Ce="highest"),t(1,y={description:Ae,status:s.status,priority:Ce,recurrenceRule:s.recurrence?s.recurrence.toText():"",createdDate:new _t(s.createdDate).formatAsDate(),startDate:new _t(s.startDate).formatAsDate(),scheduledDate:new _t(s.scheduledDate).formatAsDate(),dueDate:new _t(s.dueDate).formatAsDate(),doneDate:new _t(s.doneDate).formatAsDate(),forwardOnly:!0}),setTimeout(()=>{v.focus()},10)});let d=I=>{if(I.key&&!I.altKey&&!I.ctrlKey){let Ae=E.find(Ce=>Ce.label.charAt(0).toLowerCase()==I.key);Ae&&t(1,y.priority=Ae.value,y)}},f=()=>{a([])},m=I=>{I.key==="Enter"&&(I.preventDefault(),A&&T())},g=()=>{setTimeout(()=>{t(1,y.description=y.description.replace(/[\r\n]+/g," "),y)},0)},T=()=>{let I=y.description.trim();Fe&&(I=we.prependTo(I));let Ae=X(y.startDate),Ce=X(y.scheduledDate),rt=X(y.dueDate),_r=null;y.recurrenceRule&&(_r=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:Ae,scheduledDate:Ce,dueDate:rt}));let We;switch(y.priority){case"lowest":We="5";break;case"low":We="4";break;case"medium":We="2";break;case"high":We="1";break;case"highest":We="0";break;default:We="3"}let Le=new _e(Object.assign(Object.assign({},s),{description:I,status:y.status,priority:We,recurrence:_r,startDate:Ae,scheduledDate:Ce,dueDate:rt,doneDate:window.moment(y.doneDate,"YYYY-MM-DD").isValid()?window.moment(y.doneDate,"YYYY-MM-DD"):null}));a([Le])},b=[[]];function w(){y.description=this.value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function S(I){Oo[I?"unshift":"push"](()=>{v=I,t(10,v)})}function k(){y.priority=this.__value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function D(){y.recurrenceRule=this.value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function P(){y.dueDate=this.value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function me(){y.scheduledDate=this.value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function ae(){y.startDate=this.value,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function te(){y.forwardOnly=this.checked,t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}function Se(){y.status=QT(this),t(1,y),t(6,re),t(2,$),t(4,U),t(0,o)}return r.$$set=I=>{"task"in I&&t(26,s=I.task),"onSubmit"in I&&t(27,a=I.onSubmit),"statusOptions"in I&&t(0,o=I.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&512){e:t(15,n=I=>j?I:null)}if(r.$$.dirty[0]&66){e:t(1,y.dueDate=ui(y.dueDate),y),t(6,re=C("due",y.dueDate)),t(7,ve=!re.includes("invalid"))}if(r.$$.dirty[0]&6){e:t(1,y.startDate=ui(y.startDate),y),t(2,$=C("start",y.startDate)),t(3,q=!$.includes("invalid"))}if(r.$$.dirty[0]&18){e:t(1,y.scheduledDate=ui(y.scheduledDate),y),t(4,U=C("scheduled",y.scheduledDate)),t(5,ie=!U.includes("invalid"))}if(r.$$.dirty[0]&268435458){e:if(t(8,V=!0),!y.recurrenceRule)t(12,G="<i>not recurring</>");else{let I=t(28,i=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();I?t(12,G=I):(t(12,G="<i>invalid recurrence rule</i>"),t(8,V=!1))}}if(r.$$.dirty[0]&2){e:t(29,O=y.description.trim()!=="")}if(r.$$.dirty[0]&536871336){e:t(14,A=ve&&V&&ie&&q&&O)}if(r.$$.dirty[0]&2){e:t(11,M=B("created",y.createdDate)),t(13,Pe=B("done",y.doneDate))}},[o,y,$,q,U,ie,re,ve,V,j,v,M,G,Pe,A,n,l,c,p,h,E,d,f,m,g,T,s,a,i,O,w,S,k,b,D,P,me,ae,te,Se]}var Cf=class extends Do{constructor(e){super(),JT(this,e,Nx,Px,GT,{task:26,onSubmit:27,statusOptions:0},null,[-1,-1])}},i_=Cf;var rn=class extends s_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new i_({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=Re.getInstance().registeredStatuses;return Re.getInstance().bySymbol(this.task.status.symbol)===ee.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};var So=({line:r,path:e})=>{var v,y;let t=_e.parseTaskSignifiers(r,ut.fromUnknownPosition(e),Ot.fromPath(e));if(t!==null)return t;let{setCreatedDate:n}=Q(),i=n?window.moment():null,s=r.match(H.nonTaskRegex);if(s===null)return console.error("Tasks: Cannot create task on line:",r),new _e({status:ee.TODO,description:"",taskLocation:ut.fromUnknownPosition(e),indentation:"",listMarker:"-",priority:"3",createdDate:i,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let a=s[1],o=(v=s[2])!=null?v:"-",u=(y=s[4])!=null?y:" ",l=Re.getInstance().bySymbolOrCreate(u),c=s[5],p=r.match(H.blockLinkRegex),h=p!==null?p[0]:"";return h!==""&&(c=c.replace(H.blockLinkRegex,"")),new _e({status:l,description:c,taskLocation:ut.fromUnknownPosition(e),indentation:a,listMarker:o,blockLink:h,priority:"3",createdDate:i,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var a_=(r,e,t,n)=>{var p;if(r)return t instanceof Pf.MarkdownView;if(!(t instanceof Pf.MarkdownView))return;let i=(p=t.file)==null?void 0:p.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=So({line:o,path:i}),l=h=>{let v=Ot.removeInferredStatusIfNeeded(u,h).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,v)};new rn({app:n,task:u,onSubmit:l}).open()};var Nf=require("obsidian");var o_=(r,e,t)=>{var u;if(r)return t instanceof Nf.MarkdownView;if(!(t instanceof Nf.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=Ix(a,n);e.setLine(s,o.text),e.setCursor(Fx(i,o))},Ix=(r,e)=>{let t=_e.fromLine({line:r,taskLocation:ut.fromUnknownPosition(e),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(H.taskRegex);if(n!==null){let i=n[3],a=Re.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(H.taskRegex,`$1- [${a}] $4`)}}else if(H.listItemRegex.test(r)){let i=r.replace(H.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(H.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},Fx=(r,e)=>{var s;let t={line:0,ch:r.ch},n=he(he({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var Ro=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>a_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:o_})}};var Mo=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var u_=require("obsidian");var xo=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return F(this,null,function*(){var c;let n=new u_.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(p=>{var y;let h=(y=p.textContent)==null?void 0:y.split(`
`);if(h===void 0)return!1;let v=null;for(let O=0;O<h.length;O=O+1)if(h[O]!==""){v=h[O];break}return v===null?!1:we.includedIn(v)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let p=a.lineStart;p<=a.lineEnd;p++){let h=o[p];if(h===void 0)continue;let v=null,y=_e.fromLine({line:h,taskLocation:new ut(s,p,a.lineStart,u,v),fallbackDate:null});y!==null&&(l.push(y),u++)}for(let p=0;p<i.length;p++){let h=l[p],v=i[p];if(h===void 0||v===void 0)continue;let y=(c=v.getAttr("data-line"))!=null?c:"0",O=Number.parseInt(y,10),M=yield h.toLi({parentUlElement:e,listIndex:O,obsidianComponent:n}),$=v.childNodes;for(let ie=0;ie<$.length;ie=ie+1){let re=$[ie];re.nodeName.toLowerCase()==="div"?M.prepend(re):re.nodeName.toLowerCase()==="ul"&&M.append(re)}let q=v.querySelectorAll("[data-footnote-id]"),U=M.querySelectorAll("[data-footnote-id]");if(q.length===U.length)for(let ie=0;ie<q.length;ie++)U[ie].replaceWith(q[ie]);v.replaceWith(M)}})}};var l_=require("@codemirror/view"),c_=require("obsidian");var d_=()=>l_.ViewPlugin.fromClass(If),If=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let h=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(h),new c_.Notice(h,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=_e.fromLine({line:a.text,taskLocation:ut.fromUnknownPosition(""),fallbackDate:null});if(o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(h=>h.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let p=t.checked;return setTimeout(()=>{t.checked=p},1),!0}};var Mi=require("obsidian");function Cn(r,e){let t=`Error: ${r}.
The error message was:
    `,n="";return e instanceof Error?n+=e:n+="Unknown error",`${t}"${n}"`}var Ir=class{constructor(e,t,n){this.property=e,this.comparator=Ir.maybeReverse(n,t)}static maybeReverse(e,t){return e?Ir.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var nn=class{constructor(e,t,n){this.property=e,this.grouper=t,this.reverse=n}};var ke=class{canCreateFilterForLine(e){return ke.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return To(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=ke.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Ir(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`)}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new nn(this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var Oe=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new Oe("None of",e,"NOT")}static booleanXor(e){return new Oe("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new Oe(e,t,n)}};var pt=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}};var hr=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}static fromObject(e,t){let n=new hr(e);return n._queryComponent=t,n}static fromError(e,t){let n=new hr(e);return n._error=t,n}};var Z=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new Z(hr.fromObject(e.instruction,e))}static fromError(e,t){return new Z(hr.fromError(e,t))}};var Ao=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){return e===this._instruction?Z.fromFilter(new pt(e,this._filter,new Oe(e))):Z.fromError(e,`do not understand filter: ${e}`)}};var gr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Ao(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return Z.fromError(e,`do not understand filter: ${e}`)}};var sn=class extends ke{constructor(){super(...arguments);this._filters=new gr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var yr=class extends sn{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=yr.oldStatusName(e),i=yr.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[yr.oldStatusName(e)]}};var mt=class extends ke{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new gr,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=ke.getMatch(this.filterRegExp(),t);if(i===null)return Z.fromError(t,"do not understand query filter ("+this.fieldName()+" date)");let s=i[1],a=i[2],o=i[3],u=xt.parseDateRange(o);if(!u.isValid()){let p=xt.parseDate(s);p.isValid()&&(u=new Tt(p,p))}if(!u.isValid())return Z.fromError(t,"do not understand "+this.fieldName()+" date");let l=this.buildFilterFunction(a,u),c=mt.buildExplanation(this.fieldNameForExplanation(),a,this.filterResultIfFieldMissing(),u);return Z.fromFilter(new pt(t,l,c))}buildFilterFunction(t,n){let i;switch(t){case"before":i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing();break;case"after":i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing();break;case"on or before":case"in or before":i=s=>s?s.isSameOrBefore(n.end):this.filterResultIfFieldMissing();break;case"on or after":case"in or after":i=s=>s?s.isSameOrAfter(n.start):this.filterResultIfFieldMissing();break;default:i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing()}return this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} (((?:on|in) or before|before|(?:on|in) or after|after|on|in)? ?(.*))`)}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a=n,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":case"on or after":u=s.start.format(o);break;case"after":case"on or before":u=s.end.format(o);break;case"in or before":a="on or before",u=s.end.format(o);break;case"in or after":a="on or after",u=s.start.format(o);break;default:if(!s.start.isSame(s.end)){let c=`${t} date is between:`,p=[new Oe(`${s.start.format(o)} and`),new Oe(`${s.end.format(o)} inclusive`)];return i&&p.push(new Oe(`OR no ${t} date`)),new Oe(c,p)}a="on",u=s.start.format(o);break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new Oe(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>Ar(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:[n.format("YYYY-MM-DD dddd")]}}};var yi=class extends mt{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var Ff=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t!==null){let n=t[5],i=null;switch(n){case"lowest":i="5";break;case"low":i="4";break;case"none":i="3";break;case"medium":i="2";break;case"high":i="1";break;case"highest":i="0";break}if(i===null)return Z.fromError(e,"do not understand priority");let s=e,a;switch(t[3]){case"above":a=o=>o.priority.localeCompare(i)<0;break;case"below":a=o=>o.priority.localeCompare(i)>0;break;case"not":a=o=>o.priority!==i;break;default:a=o=>o.priority===i,s=`${this.fieldName()} is ${n}`}return Z.fromFilter(new pt(e,a,new Oe(s)))}else return Z.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return Ff.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>{let t=mr.priorityNameUsingNormal(e.priority);return[`%%${e.priority}%%${t} priority`]}}},Pn=Ff;Pn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/;var Ti=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var _i=class extends Ti{constructor(t){super();this.stringToFind=t}matches(t){return _i.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}explanation(t){return new Oe(t)}};var an=class extends Ti{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/^\/(.+)\/([^/]*)$/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new an(s)}else return null}matches(t){return t.match(this.regex)!==null}static helpMessage(){return String.raw`See https://publish.obsidian.md/tasks/Queries/Regular+Expressions

Regular expressions must look like this:
    /pattern/
or this:
    /pattern/flags

Where:
- pattern: The 'regular expression' pattern to search for.
- flags:   Optional characters that modify the search.
           i => make the search case-insensitive
           u => add Unicode support

Examples:  /^Log/
           /^Log/i
           /File Name\.md/
           /waiting|waits|waited/i
           /\d\d:\d\d/

The following characters have special meaning in the pattern:
to find them literally, you must add a \ before them:
    [\^$.|?*+()

CAUTION! Regular expression (or 'regex') searching is a powerful
but advanced feature that requires thorough knowledge in order to
use successfully, and not miss intended search results.
`}explanation(t){let i=Lx(t,"using regex: ",this.regexAsString());return new Oe(i)}regexAsString(){let t=`'${this.regex.source}' with `;switch(this.regex.flags.length){case 0:t+="no flags";break;case 1:t+=`flag '${this.regex.flags}'`;break;default:t+=`flags '${this.regex.flags}'`;break}return t}};function Lx(r,e,t){var o;let n=r.match(/\//);if(!n)return"Error explaining instruction. Could not find a slash character";let i=2,s=((o=n.index)!=null?o:i)-i;return`${e.padEnd(s)}${t}`}var xe=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return Z.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new _i(s);else if(i.includes("regex")){try{a=an.validateAndConstruct(s)}catch(l){let c=Cn("Parsing regular expression",l)+`

${an.helpMessage()}`;return Z.fromError(e,c)}if(a===null)return Z.fromError(e,`Invalid instruction: '${e}'

${an.helpMessage()}`)}if(a===null)return Z.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new pt(e,this.getFilter(a,o),a.explanation(e));return Z.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var bi=class extends xe{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var vi=class extends ke{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return Z.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}};var Ei=class{static by(e,t){let n=[new vi().comparator(),new yr().comparator(),new yi().comparator(),new Pn().comparator(),new bi().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(Ei.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var Co=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var Po=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Co(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var No=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Io=class extends No{},Fo=class{constructor(e,t){this.root=new Io(t),this.buildGroupingTree(e)}buildGroupingTree(e){let t=[this.root];for(let n of e){let i=[];for(let s of t)for(let a of s.values){let o=n.grouper(a);o.length===0&&o.push("");for(let u of o){let l=s.children.get(u);l===void 0&&(l=new Io([]),s.children.set(u,l),i.push(l)),l.values.push(a)}}t=i}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var Lo=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var wi=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let i=new Fo(e,t).generateTaskTreeStorage();this.addTaskGroups(i),this.sortTaskGroups(),this.setGroupsHeadings(i)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new Lo(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new Po(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var Nn=class extends xe{fieldName(){return"description"}value(e){return we.removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Nn.cleanDescription(e.description),i=Nn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=we.removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Uo=class extends mt{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Wo=class extends mt{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var qo=class extends sn{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var ra=class extends hr{};function na(r){return[["task",r]]}function Lf(r,e){let t=r.map(([n])=>n);try{let n=e.includes("return")?e:`return ${e}`,i=e&&new Function(...t,n);return i instanceof Function?ra.fromObject(e,i):ra.fromError(e,"Error parsing group function")}catch(n){return ra.fromError(e,Cn(`Failed parsing expression "${e}"`,n))}}function Uf(r,e){let t=e.map(([n,i])=>i);return r(...t)}function Wf(r,e,t){try{return Uf(r,e)}catch(n){return Cn(`Failed calculating expression "${t}"`,n)}}function f_(r,e){let t=na(r),n=Lf(t,e);return n.error?n.error:Wf(n.queryComponent,t,e)}var Yo=class{constructor(e){this.line=e,this.functionOrError=Lf(na(null),e)}isValid(){return this.functionOrError.error===void 0}get parseError(){return this.functionOrError.error}evaluate(e){if(!this.isValid())throw Error(`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`);return Uf(this.functionOrError.queryComponent,na(e))}evaluateOrCatch(e){return this.isValid()?Wf(this.functionOrError.queryComponent,na(e),this.line):`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`}};var $o=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return Z.fromError(e,"Unable to parse line");let n=t[1],i=new Yo(n);return i.isValid()?Z.fromFilter(new pt(e,Ux(i),new Oe(e))):Z.fromError(e,i.parseError)}fieldName(){return"function"}filterRegExp(){return new RegExp(`^filter by ${this.fieldNameSingularEscaped()} (.*)`)}supportsGrouping(){return!0}createGrouperFromLine(e){let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new nn("function",qx(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`)}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function Ux(r){return e=>Wx(r,e)}function Wx(r,e){let t=r.evaluate(e);if(typeof t=="boolean")return t;throw Error(`filtering function must return true or false. This returned "${t}".`)}function qx(r){return e=>Yx(e,r)}function Yx(r,e){try{let t=f_(r,e);return Array.isArray(t)?t.map(i=>i.toString()):t===null?[]:[t.toString()]}catch(t){let n=`Error: Failed calculating expression "${e}". The error message was: `;return t instanceof Error?[n+t.message]:[n+"Unknown error"]}}var jo=class extends xe{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var Go=class extends mt{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var Bo=class extends mt{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var Ho=class extends mt{constructor(){let e=new gr;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var zo=class extends sn{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var Ko=class extends xe{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new nn(this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`)}};var In=class extends Ko{constructor(){super();this.filterInstructions=new gr,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.filter!==void 0?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=In.makeCompareByTagComparator(s);return new Ir(this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return In.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var O_=ya(k_());var Zo=class extends ke{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return Z.fromError(t,"empty line");let n=this.preprocessExpression(t);try{let i=(0,O_.parse)(n);for(let o of i)if(o.name==="IDENTIFIER"&&o.value){let u=o.value.trim();if(!(u in this.subFields)){let l=Jo(u);if(l===null)return Z.fromError(t,`couldn't parse sub-expression '${u}'`);if(l.error)return Z.fromError(t,`couldn't parse sub-expression '${u}': ${l.error}`);l.filter&&(this.subFields[u]=l.filter)}}else if(o.name==="OPERATOR"){if(o.value==null)return Z.fromError(t,"empty operator in boolean query");if(!this.supportedOperators.includes(o.value))return Z.fromError(t,`unknown boolean operator '${o.value}'`)}let s=o=>this.filterTaskWithParsedQuery(o,i),a=this.constructExplanation(i);return Z.fromFilter(new pt(t,s,a))}catch(i){let s=i instanceof Error?i.message:"unknown error type";return Z.fromError(t,`malformed boolean query -- ${s} (check the documentation for guidelines)`)}}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(Oe.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(Oe.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(Oe.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(Oe.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i.name);return n[0]}};var eu=class extends xe{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var tu=class extends xe{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var un=class extends ke{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return ke.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=zt[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return Z.fromFilter(new pt(e,o,new Oe(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(zt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return Z.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=un.groupName(e),i=un.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[un.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e.status.type}`}};var ru=class extends xe{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var nu=class extends xe{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var iu=class extends xe{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var su=class extends xe{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return Z.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=xe.escapeMarkdownCharacters(t);return e.precedingHeader&&e.precedingHeader!==t&&(n+=" > "+e.precedingHeader),[n]}}};var Xf=[()=>new tu,()=>new un,()=>new yr,()=>new zo,()=>new Pn,()=>new Ho,()=>new Uo,()=>new Bo,()=>new Go,()=>new yi,()=>new Wo,()=>new bi,()=>new nu,()=>new iu,()=>new su,()=>new Nn,()=>new In,()=>new jo,()=>new qo,()=>new eu,()=>new vi,()=>new ru,()=>new $o,()=>new Zo];function Jo(r){for(let e of Xf){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function D_(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of Xf){let i=t().createSorterFromLine(r);if(i)return i}return null}function S_(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of Xf){let i=t().createGrouperFromLine(r);if(i)return i}return null}var Wn=class{constructor(e){this._searchErrorMessage=void 0;this.taskGroups=e}get searchErrorMessage(){return this._searchErrorMessage}set searchErrorMessage(e){this._searchErrorMessage=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}get groups(){return this.taskGroups.groups}static fromError(e){let t=new Wn(new wi([],[]));return t._searchErrorMessage=e,t}};var qr=class{constructor({source:e}){this._limit=void 0;this._taskGroupLimit=void 0;this._layoutOptions=new Gs;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this._ignoreGlobalQuery=!1;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency|tags)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.ignoreGlobalQueryRegexp=/^ignore global query/;this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.ignoreGlobalQueryRegexp.test(t):this._ignoreGlobalQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.parseGroupBy({line:t}):break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this.setError("do not understand query",t)}})}append(e){return this.source===""?e:e.source===""?this:new qr({source:`${this.source}
${e.source}`})}explainQuery(){let e="",t=this.filters.length;if(t===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<t;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");e+=this.explainQueryLimits();let{debugSettings:n}=Q();return n.ignoreSortInstructions&&(e+=`

NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.`),e}explainQueryLimits(){let e="";function t(n){let i=`

At most ${n} task`;return n!==1&&(i+="s"),i}return this._limit!==void 0&&(e+=t(this._limit),e+=`.
`),this._taskGroupLimit!==void 0&&(e+=t(this._taskGroupLimit),e+=` per group (if any "group by" options are supplied).
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}setError(e,t){this._error=`${e}
Problem line: "${t}"`}get ignoreGlobalQuery(){return this._ignoreGlobalQuery}applyQueryToTasks(e){try{this.filters.forEach(a=>{e=e.filter(a.filterFunction)});let{debugSettings:t}=Q(),i=(t.ignoreSortInstructions?e:Ei.by(this.sorting,e)).slice(0,this.limit),s=new wi(this.grouping,i);return this._taskGroupLimit!==void 0&&s.applyTaskLimit(this._taskGroupLimit),new Wn(s)}catch(t){let n="Search failed";return Wn.fromError(Cn(n,t))}}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"created date":this._layoutOptions.hideCreatedDate=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;case"tags":this._layoutOptions.hideTags=n;break;default:this.setError("do not understand hide/show option",e)}}}parseFilter(e){var n;let t=Jo(e);return t!=null?(t.filter?this._filters.push(t.filter):this.setError((n=t.error)!=null?n:"Unknown error",e),!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);if(t===null){this.setError("do not understand query limit",e);return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy({line:e}){let t=D_(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=S_(e);return t?(this._grouping.push(t),!0):!1}};function R_(r){let e="";we.isEmpty()||(e+=`Only tasks containing the global filter '${we.get()}'.

`);let t=new qr({source:r});if(!t.ignoreGlobalQuery){let n=new qr(gf());n.source.trim()!==""&&(e+=`Explanation of the global query:

${n.explainQuery()}
`)}return e+=`Explanation of this Tasks code block query:

${t.explainQuery()}`,e}function au(r){let e=new qr(gf()),t=new qr({source:r});return t.ignoreGlobalQuery?t:e.append(t)}var ou=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return F(this,null,function*(){n.addChild(new Zf({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Zf=class extends Mi.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=au(this.source),this.queryType="tasks";break;default:this.query=au(this.source),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=au(this.source),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return F(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return F(this,null,function*(){this.query.layoutOptions.explainQuery&&this.createExplanation(i);let a=this.query.applyQueryToTasks(t);if(a.searchErrorMessage!==void 0){this.renderErrorMessage(i,a.searchErrorMessage);return}yield this.addAllTaskGroups(a.taskGroups,i);let o=a.totalTasksCount;this.addTaskCount(i,o)})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=R_(this.source),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return F(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=new Jr(this.query.layoutOptions),o=n.createEl("ul");o.addClasses(["contains-task-list","plugin-tasks-query-result"]),o.addClasses(a.taskListClasses);let u=this.getGroupingAttribute();u&&u.length>0&&(o.dataset.taskGroupBy=u);for(let l=0;l<s;l++){let c=t[l],p=this.isFilenameUnique({task:c}),h=yield c.toLi({parentUlElement:o,listIndex:l,layoutOptions:this.query.layoutOptions,isFilenameUnique:p,taskLayout:a,obsidianComponent:this});h.querySelectorAll("[data-footnote-id]").forEach(M=>M.remove());let y=this.query.layoutOptions.shortMode,O=h.createSpan("task-extras");this.query.layoutOptions.hideUrgency||this.addUrgency(O,c),this.query.layoutOptions.hideBacklinks||this.addBacklinks(O,c,y,p),this.query.layoutOptions.hideEditButton||this.addEditButton(O,c),o.appendChild(h)}return{taskList:o,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{Eo({originalTask:n,newTasks:Ot.removeInferredStatusIfNeeded(n,u)})};new rn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return F(this,null,function*(){for(let i of t.groups){this.addGroupHeadings(n,i.groupHeadings);let{taskList:s}=yield this.createTasksList({tasks:i.tasks,content:n});n.appendChild(s)}})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return F(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=t.createEl(i,{cls:"tasks-group-heading"});yield Mi.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",p=>F(this,null,function*(){let h=yield vf(n,l);if(h){let[v,y]=h;yield this.app.workspace.getLeaf(Mi.Keymap.isModEvent(p)).openFile(y,{eState:{line:v}})}})),o.addEventListener("mousedown",p=>F(this,null,function*(){if(p.button===1){let h=yield vf(n,l);if(h){let[v,y]=h;yield this.app.workspace.getLeaf("tab").openFile(y,{eState:{line:v}})}}})),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var be=require("obsidian");function M_(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function x_(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function A_(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function C_(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function P_(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function N_(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function I_(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var F_=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var sr=require("obsidian");var qn=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=ee.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return qn.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return qn.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=zt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new Re,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var Yn=new qn,It=class extends sr.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new tt(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return F(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new sr.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,It.setValid(l,Yn.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{It.setValid(i,Yn.validateSymbol(this.statusConfiguration()))});let s;new sr.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,It.setValid(l,Yn.validateName(this.statusConfiguration()))})}).then(l=>{It.setValid(s,Yn.validateName(this.statusConfiguration()))});let a;new sr.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,It.setValid(l,Yn.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{It.setValid(a,Yn.validateNextSymbol(this.statusConfiguration()))}),new sr.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(p=>{l.addOption(p,p)}),l.setValue(this.type).onChange(p=>{this.type=ee.getTypeFromStatusTypeString(p)})}),ee.tasksPluginCanCreateCommandsForStatuses()&&new sr.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>F(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new sr.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>F(this,null,function*(){let c=Yn.validate(this.statusConfiguration());if(c.length>0){let p=c.join(`
`)+`

Fix errors before saving.`;new sr.Notice(p);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?It.removeValidationError(t):It.setValidationError(t)}};var Ft=class extends be.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return F(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new be.Setting(t).setName("Task Format").setDesc(Ft.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Cr))i.addOption(s,Cr[s].displayName);i.setValue(Q().taskFormat).onChange(s=>F(this,null,function*(){Ge({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new be.Setting(t).setName("Global task filter").setDesc(Ft.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(we.get()).onChange(s=>F(this,null,function*(){we.set(s),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=Q();i.setValue(s.removeGlobalFilter).onChange(a=>F(this,null,function*(){Ge({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),eA(new be.Setting(t).setDesc(Ft.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=Q();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>F(this,null,function*(){Ge({globalQuery:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=Q();F_.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new be.Setting(t).setName("Set created date on every added task").setDesc(Ft.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=Q();i.setValue(s.setCreatedDate).onChange(a=>F(this,null,function*(){Ge({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Set done date on every completed task").setDesc(Ft.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.setDoneDate).onChange(a=>F(this,null,function*(){Ge({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Ft.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>F(this,null,function*(){Ge({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>F(this,null,function*(){let s=Q();yield this.plugin.saveSettings(),i.setValue(Ft.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>F(this,null,function*(){let o=Ft.parseCommaSeparatedFolders(a);Ge({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new be.Setting(t).setName("Next recurrence appears on the line below").setDesc(Ft.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=Q();i.setValue(s).onChange(a=>F(this,null,function*(){Ge({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new be.Setting(t).setName("Auto-suggest task content").setDesc(Ft.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.autoSuggestInEditor).onChange(a=>F(this,null,function*(){Ge({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=Q();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>F(this,null,function*(){Ge({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=Q();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>F(this,null,function*(){Ge({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new be.Setting(t).setName("Provide access keys in dialogs").setDesc(Ft.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.provideAccessKeys).onChange(a=>F(this,null,function*(){Ge({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:he({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,Ge({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new be.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!MT(o.featureFlag))&&(o.type==="checkbox"?new be.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>F(this,null,function*(){Dn(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new be.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue);let c=p=>F(this,null,function*(){Dn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,be.debounce)(c,500,!0))}):o.type==="textarea"?new be.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue);let c=p=>F(this,null,function*(){Dn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,be.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=Q();i.coreStatuses.forEach(s=>{L_(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=Q();i.customStatuses.forEach(l=>{L_(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new be.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>F(this,null,function*(){He.addStatus(i.customStatuses,new tt("","","",!1,"TODO")),yield xi(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",M_()],["Aura Theme",x_()],["Ebullientworks Theme",A_()],["ITS Theme & SlRvb Checkboxes",C_()],["Minimal Theme",N_()],["Things Theme",I_()],["LYT Mode Theme (Dark mode only)",P_()]];for(let[l,c]of a)new be.Setting(t).addButton(h=>{let v=`${l}: Add ${c.length} supported Statuses`;h.setButtonText(v).onClick(()=>F(this,null,function*(){yield Jx(c,i,n)}))}).infoEl.remove();new be.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>F(this,null,function*(){let p=this.plugin.getTasks().map(v=>v.status),h=Re.getInstance().findUnknownStatuses(p);h.length!==0&&(h.forEach(v=>{He.addStatus(i.customStatuses,v)}),yield xi(i,n))}))}).infoEl.remove(),new be.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>F(this,null,function*(){He.resetAllCustomStatuses(i),yield xi(i,n)}))}).infoEl.remove()}},oa=Ft;oa.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function L_(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new ee(e).previewText();let u=new be.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>F(this,null,function*(){He.deleteStatus(t,e)&&(yield xi(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>F(this,null,function*(){let c=new It(s,e,a);c.onClose=()=>F(this,null,function*(){c.saved&&He.replaceStatus(t,e,c.statusConfiguration())&&(yield xi(n,i))}),c.open()}))}),u.infoEl.remove()}function Jx(r,e,t){return F(this,null,function*(){He.bulkAddStatusCollection(e,r).forEach(i=>{new be.Notice(i)}),yield xi(e,t)})}function xi(r,e){return F(this,null,function*(){Ge({statusSettings:r}),He.applyToStatusRegistry(r,Re.getInstance()),yield e.saveSettings(!0)})}function eA(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var U_=require("obsidian");var uu=class extends U_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return we.includedIn(s)&&s.match(H.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var a,o,u;let n=t.query,i=t.editor.getCursor();return((u=(o=(a=Hs()).buildSuggestions)==null?void 0:o.call(a,n,i.ch,this.settings))!=null?u:[]).map(l=>Dt(he({},l),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let p=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(p);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var W_=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var q_=(r,e)=>{let t=So({line:"",path:""});return new rn({app:r,task:t,onSubmit:e})};var Y_=r=>({createTaskLineModal:()=>W_(r,q_)});var lu=class extends $_.Plugin{get apiV1(){return Y_(app)}onload(){return F(this,null,function*(){_o.registerConsoleLogger(),console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new oa({plugin:this})),NT({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let t=new Mo({obsidianEvents:this.app.workspace});this.cache=new Rn({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new xo({plugin:this}),this.queryRenderer=new ou({plugin:this,events:t}),this.registerEditorExtension(d_()),this.registerEditorSuggest(new uu(this.app,Q())),new Ro({plugin:this})})}loadTaskStatuses(){return F(this,null,function*(){let{statusSettings:t}=Q();He.applyToStatusRegistry(t,Re.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return F(this,null,function*(){let t=yield this.loadData();Ge(t),yield this.loadTaskStatuses()})}saveSettings(){return F(this,null,function*(){yield this.saveData(Q())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
